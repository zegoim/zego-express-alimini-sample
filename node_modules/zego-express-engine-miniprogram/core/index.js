!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:this,(()=>(()=>{var __webpack_modules__={608:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoExpressEngine=void 0;var s=r(887),i=r(875),a=function(e){function t(t,r){var n=this;return s.ZegoExpressWebRTMEngine.version="2.10.3",(n=e.call(this,t,r,1)||this).zegoWechatMini=new i.ZegoWechatMini(n.logger,n.dataReport,n.zegoWebRTM),n}return o(t,e),t.prototype.getNextUrl=function(e){return this.zegoWechatMini.getNextUrl(e)},t.prototype.startPlayingStream=function(e,t){return this.zegoWechatMini.startPlayingStream(e,t)},t.prototype.stopPlayingStream=function(e){return this.zegoWechatMini.stopPlayingStream(e)},t.prototype.updatePlayerNetStatus=function(e,t){return this.zegoWechatMini.updatePlayerNetStatus(e,t)},t.prototype.updatePlayerState=function(e,t){return this.zegoWechatMini.updatePlayerState(e,t)},t.prototype.updateAudioVolumeNotify=function(e,t){return this.zegoWechatMini.updateAudioVolumeNotify(e,t)},t.prototype.checkSystemRequirements=function(){return this.zegoWechatMini.checkSystemRequirements()},t.prototype.setMixerTaskConfig=function(e){return this.zegoWechatMini.setMixerTaskConfig(e)},t.prototype.startMixerTask=function(e){return this.zegoWechatMini.startMixerTask(e)},t.prototype.off=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.off(e,t):!!this.zegoWechatMini.stateCenter.listenerList[e]&&this.zegoWechatMini.off(e,t)},t.prototype.stopMixerTask=function(e){return this.zegoWechatMini.stopMixerTask(e)},t.prototype.on=function(e,t){return this.zegoWebRTM.stateCenter.listenerList[e]?this.zegoWebRTM.on(e,t):!!this.zegoWechatMini.stateCenter.listenerList[e]&&this.zegoWechatMini.on(e,t)},t.prototype.startPublishingStream=function(e,t){return this.zegoWechatMini.startPublishingStream(e,t)},t.prototype.stopPublishingStream=function(e){return this.zegoWechatMini.stopPublishingStream(e)},t.prototype.addPublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWechatMini.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWechatMini.addPublishCdnUrl(e,t)},t.prototype.removePublishCdnUrl=function(e,t){return 3===arguments.length?this.zegoWechatMini.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWechatMini.removePublishCdnUrl(e,t)},t.prototype.setStreamExtraInfo=function(e,t){return this.zegoWechatMini.setStreamExtraInfo(e,t)},t.use=function(e){s.ZegoExpressWebRTMEngine.use(e),i.ZegoWechatMini.use(e)},t.prototype.initContext=function(e){this.zegoWechatMini.initContext(e)},t.prototype.createPusher=function(e){return this.zegoWechatMini.createPusher(e)},t.prototype.getPusherInstance=function(){return this.zegoWechatMini.getPusherInstance()},t.prototype.getPlayerInstance=function(e,t){return this.zegoWechatMini.getPlayerInstance(e,t)},t.prototype.mutePublishStreamVideo=function(e){this.zegoWechatMini.mutePublishStreamVideo(e)},t.prototype.mutePublishStreamAudio=function(e){this.zegoWechatMini.mutePublishStreamAudio(e)},t.prototype.mutePlayStreamVideo=function(e,t){this.zegoWechatMini.mutePlayStreamVideo(e,t)},t.prototype.mutePlayStreamAudio=function(e,t){this.zegoWechatMini.mutePlayStreamAudio(e,t)},t.prototype.setPusherAttributes=function(e){this.zegoWechatMini.setPusherAttributes(e)},t.prototype.setPlayerAttributes=function(e,t){this.zegoWechatMini.setPlayerAttributes(e,t)},t.prototype.getPlayerList=function(e){return this.zegoWechatMini.getPlayerList(e)},t}(s.ZegoExpressWebRTMEngine);t.ZegoExpressEngine=a},262:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WEBRTC_ACTION=void 0,function(e){e.CONSTRUCTOR="zc.0",e.CHECK_SUPPORT="zc.csr",e.CREATE_STREAM="zc.cs",e.DESTROY_STREAM="zc.ds",e.START_PUBLISHING_STREAM="zc.sps.0",e.START_PLAYING_STREAM="zc.sps.1",e.STOP_PUBLISHING_STREAM="zc.sps.0.0",e.STOP_PLAYING_STREAM="zc.sps.1.0",e.SET_MEDIA_SIDE_FLAGS="zc.smsg.0",e.SEND_MEDIA_SIDE_INFO="zc.smsi.0",e.ON_STREAM="zc.os",e.ON_PUSH_STREAM_UPDATE="zc.opsu",e.BIND_WINDOW_LISTENER="zc.wl",e.SET_AUDIO_OUTPUT="zc.sao",e.SET_CUSTOM_SIGNAL_URL="zc.scsu",e.SET_TURN_OVER_TCP_ONLY="zc.stoto",e.RDH_ACTIVE="zc.rdh.a",e.RDH_MAX_TIME="zc.rdh.m",e.RDH_WEBRTC_URL_RSP="zc.rdh.hfwur",e.PUBLISH_STATE_HANDLE="zc.psh.0",e.PLAY_STATE_HANDLE="zc.psh.1",e.STATECENTER_ACTION_LISTENER="zc.sc.al",e.STATECENTER_SET_SETTING="zc.sc.ss",e.SIGNAL_SET_SESSION_INFO="zc.s.ssi",e.SIGNAL_RESET_CONNECT_TIMER="zc.s.rct",e.SIGNAL_BIND_WEBSOCKET_HANDLE="zc.s.bwh",e.SIGNAL_RESET_CHECK_MESSAGE="zc.s.rcm",e.SIGNAL_UPDATE_TOKEN="zc.s.ut",e.SIGNAL_SEND_MESSAGE_WITH_CALLBACK="zc.s.smwc",e.SIGNAL_CONNECT_SERVER="zc.s.cs.0",e.SIGNAL_START_CONNECT_TIMER="zc.s.sct",e.SIGNAL_DISCONNECT_SERVER="zc.s.dc",e.SIGNAL_CREATE_SESSION="zc.s.cs.1",e.SIGNAL_REMOVE_SESSION="zc.s.rs",e.SIGNAL_SEND_REMOVE_SESSION="zc.s.srs",e.SIGNAL_SEND_MESSAGE="zc.s.sm",e.SIGNAL_HANDLE_RESPOND_DATA="zc.s.hrd",e.SIGNAL_ADD_SESSION="zc.s.as",e.SIGNAL_HANDLE_PUSH_DATA="zc.s.hpd",e.SIGNAL_HANDLE_PUSH_RESET_SESSION_DATA="zc.s.hprsd",e.SIGNAL_SEND_MEDIA_DESC="zc.s.smd",e.SIGNAL_SEND_CANDIDATE_INFO="zc.s.sci",e.SIGNAL_SEND_MEDIA_DESC_ACK="zc.s.smda",e.SIGNAL_SEND_CANDIDATE_INFO_ACK="zc.s.scia",e.SIGNAL_SEND_CLOSE_SESSION_ACK="zc.s.scsa",e.SIGNAL_SEND_RESET_SESSION_ACK="zc.s.srsa",e.SIGNAL_REGISTER_PUSH_CALLBACK="zc.s.rpc",e.SIGNAL_CHECK_MESSAGE_TIMEOUT="zc.s.cmt",e.SIGNAL_SEND_HEARTBEAT="zc.s.sh",e.SIGNAL_QUALITY_REPORT="zc.s.qr",e.SIGNAL_SEND_STREAM_STATUS="zc.s.sss",e.SIGNAL_ACTIVE_PLAY_VIDEO_STREAM="zc.s.apvs",e.SIGNAL_ACTIVE_PLAY_AUDIO_STREAM="zc.s.apas",e.SIGNAL_SEND_BROADCAST_STATUS="zc.s.sbs",e.SIGNAL_SEND_NET_PROBE="zc.s.snp",e.SIGNAL_SEND_NET_QUALITY_INFO_PUSH_ACK="zc.s.npa",e.PUBLISHER_START_PUBLISH="zc.p.0.sp.0",e.PUBLISHER_PUBLISH_SUCCESS="zc.p.ps",e.PUBLISHER_ON_CREATE_PUBLISH_SESSION_SUCCESS="zc.p.0.ocpss",e.PUBLISHER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.0.hcsws",e.PUBLISHER_ON_CREATE_OFFER_SUCCESS="zc.p.0.ocos",e.PUBLISHER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.0.oslds",e.PUBLISHER_ON_GET_REMOTE_DESCRIPTION="zc.p.0.ogrd",e.PUBLISHER_ON_RECV_MEDIA_DESC="zc.p.0.ormd",e.PUBLISHER_ON_RECV_CANDIDATE_INFO="zc.p.0.orci.0",e.PUBLISHER_ON_RECV_PUBLISH_EVENT="zc.p.0.orpe",e.PUBLISHER_ON_RECV_CLIENT_INFO="zc.p.0.orci.1",e.PUBLISHER_ON_ICE_CANDIDATE="zc.p.0.oic",e.PUBLISHER_ON_CONNECTION_STATE_CHANGE="zc.p.0.ocsc",e.PUBLISHER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.0.oicsc",e.PUBLISHER_RESET_PUBLISH="zc.p.0.rp",e.PUBLISHER_SET_PLAYER_QUALITY_TIMER="zc.p.0.spqt",e.PUBLISHER_UPLOAD_PUBLISH_QUALITY="zc.p.0.upq",e.PUBLISHER_ON_RECV_RESET_SESSION="zc.p.0.orrs",e.PUBLISHER_ON_RECV_CLOSE_SESSION="zc.p.0.orcs",e.PUBLISHER_SEND_CANDIDATE_INFO="zc.p.0.sci",e.PUBLISHER_STATE_ERROR="zc.p.0.psr",e.PUBLISHER_STOP_PUBLISH="zc.p.0.sp.1",e.PUBLISHER_ON_DISCONNECT="zc.p.0.od",e.PUBLISHER_START_SOUND_LEVEL="zc.p.0.ssl.0",e.PUBLISHER_STOP_SOUND_LEVEL="zc.p.0.ssl.1",e.PUBLISHER_HANDLE_ENC_BITRATE="zc.p.0.heb",e.PUBLISHER_ON_RECV_NET_QUALITY_INFO="zc.p.0.nqi",e.PUBLISHER_ON_RECV_UPDATE_MEDIA_DESC="zc.p.0.orumd",e.PUBLISHER_SEND_SEI="zc.p.0.ss",e.PLAYER_START_PLAY="zc.p.1.sp.0",e.PLAYER_ON_CREATE_PLAY_SESSION_SUCCESS="zc.p.ocpss.1",e.PLAYER_HANDLE_CREATE_SESSION_WITH_SDP="zc.p.hcsws.1",e.PLAYER_ON_CREATE_OFFER_SUCCESS="zc.p.ocos.1",e.PLAYER_ON_SET_LOCAL_DESCRIPTION_SUCCESS="zc.p.oslds.1",e.PLAYER_ON_RECV_MEDIA_DESC="zc.p.ormd.1",e.PLAYER_ON_RECV_CANDIDATE_INFO="zc.p.orci.1",e.PLAYER_ON_RECV_PLAY_EVENT="zc.p.orpe.1",e.PLAYER_ON_RECV_CLIENT_INFO="zc.p.orci.1.1",e.PLAYER_ON_ICE_CANDIDATE="zc.p.oic.1",e.PLAYER_ON_CONNECTION_STATE_CHANGE="zc.p.ocsc.1",e.PLAYER_ON_ICE_CONNECTION_STATE_CHANGE="zc.p.oicsc.1",e.PLAYER_RESET_PLAY="zc.p.rp.1",e.PLAYER_SET_PLAYER_QUALITY_TIMER="zc.p.spqt.1",e.PLAYER_UPLOAD_PLAYER_QUALITY="zc.p.upq.1",e.PLAYER_ON_RECV_RESET_SESSION="zc.p.orrs.1",e.PLAYER_ON_RECV_CLOSE_SESSION="zc.p.orcs.1",e.PLAYER_ON_RECV_STREAM_STATUS="zc.p.orss.1",e.PLAYER_ON_GOT_REMOTE_STREAM="zc.p.ogrs.1",e.PAYER_GET_VIDEO_CODEC="zc.p.gvc",e.PLAYER_SEND_CANDIDATE_INFO="zc.p.sci.1",e.PLAYER_STATE_ERROR="zc.p.psr.1",e.PLAYER_STOP_PLAY="zc.p.1.sp.1",e.PLAYER_ON_DISCONNECT="zc.p.od.1",e.PLAYER_START_SOUND_LEVEL="zc.p.ssl.1",e.PLAYER_STOP_SOUND_LEVEL="zc.p.ssl.1.1",e.PLAYER_ON_RECV_NET_QUALITY_INFO="zc.p.1.nqi",e.UPLOAD_SPEED_LOG_QUALITY="zc.uslq",e.PUBLISH_SET_CAPTURE_VOLUME="zc.p.scv",e.PUBLISH_SET_BEAUTY_EFFECT="zc.p.0.sbe",e.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ="zc.sh.msbss",e.STREAMHANDLER_MERGE_STREAM="zc.sh.ms",e.STREAMHANDLER_PATCH_STREAM_LIST="zc.sh.psl",e.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2="zc.sh.sbr",e.ANALOGSOCKET_UPDATE_MEDIA_READY_STATE="zc.as.umrs",e.ANALOGSOCKET_UPDATE_ACCESS_READY_STATE="zc.as.uars",e.ANALOGSOCKET_SET_MEDIA_SERVER_STATE="zc.as.smss",e.ANALOGSOCKET_SET_ACCESS_SERVER_STATE="zc.as.sass",e.ANALOGSOCKET_SEND="zc.as.s.0",e.ANALOGSOCKET_OPEN="zc.as.op"}(t.ZEGO_WEBRTC_ACTION||(t.ZEGO_WEBRTC_ACTION={}))},824:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_WECHATMINI_ACTION=void 0,function(e){e.ADD_PUBLISH_CDN_URL="zw.apcu",e.REMOVE_PUBLISH_CDN_URL="zw.rpcu",e.STOP_MIXER_TASK="zw.smt",e.ON_STREAM="zw.os",e.ON_PUSH_STREAM_UPDATE="zw.opsu",e.ON_PUBLISH_STATE_UPDATE="zw.w.opsu",e.ON_PUBLISH_STATE_UPDATE_HANDLE="zw.w.opsuh",e.WECHATMINI_SETPREFERPLAYSOURCETYPE="zw.w.sppst.1",e.WECHATMINI_BIND_LISTENER="zw.w.bl",e.WECHATMINI_DELETE_LISTENER="zw.w.dl",e.WECHATMINI_UPDATE_PLAYER_STATE="zw.w.ups",e.WECHATMINI_UPDATE_PLAYER_NET_STATUS="zw.w.upns",e.WECHATMINI_UPDATE_PLAYER_VOLUME_NOTIFY="zw.w.upvn",e.WECHATMINI_SET_CUSTOM_SIGNAL_URL="zw.w.scsu",e.WECHATMINI_GET_NEXT_URL="zw.w.gnu",e.WECHATMINI_BIND_STREAM_CENTER_HANDLER="zw.w.bsch",e.WECHATMINI_BIND_RTM_LISTENER="zw.w.brl",e.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE="zw.pu.sppst.0",e.PUBLISHMODULE_START_PUBLISHING_STREAM="zw.pu.sps.0",e.PUBLISHMODULE_STOP_PUBLISHING_STREAM="zw.pu.sps.0.0",e.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL="zw.pu.fpsu.0",e.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP="zw.pu.hfspur.0",e.PUBLISHMODULE_DO_PUBLISH_STREAM="zw.pu.dps.0",e.PUBLISHMODULE_UPDATE_STREAM_INFO="zw.pu.upi",e.PUBLISHMODULE_HANDLE_STREAM_UPDATE_RSP="zw.pu.hsur",e.PLAYMODULE_START_PLAYING_STREAM="zw.pl.sps.1",e.PLAYMODULE_STOP_PLAYING_STREAM="zw.pl.sps.1.0",e.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN="zw.pl.spsfc",e.PLAYMODULE_START_PLAYING_STREAM_FROM_BGP="zw.pl.spsfb",e.PLAYMODULE_DO_PLAY_STREAM="zw.pl.dps",e.PLAYMODULE_FETCH_PLAY_STREAM_URL="zw.pl.fpsu",e.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP="zw.pl.hfsur",e.STREAMCENTERWECHAT_RESET="zw.scw.r.0",e.STREAMCENTERWECHAT_START_PUBLISHING_STREAM="zw.scw.sps.0",e.STREAMCENTERWECHAT_START_PLAYING_STREAM="zw.scw.sps.1",e.STREAMCENTERWECHAT_START_PLAYER="zw.scw.sp.0",e.STREAMCENTERWECHAT_ON_STREAM_URL_UPDATE="zw.scw.opuu.0",e.STREAMCENTERWECHAT_UPDATE_PLAYER_STATE="zw.scw.ups.0",e.STREAMCENTERWECHAT_UPDATE_PLAYER_NET_STATUS="zw.scw.upns",e.STREAMCENTERWECHAT_UPDATE_PUBLISHING_STATE="zw.scw.ups.0.0",e.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE="zw.scw.ups.1.0",e.STREAMCENTERWECHAT_GET_NEXT_URL="zw.scw.gnu",e.STREAMCENTERWECHAT_STOP_PUBLISHING_STREAM="zw.scw.sps.0.0",e.STREAMCENTERWECHAT_STOP_PLAYING_STREAM="zw.scw.sps.1.0",e.STREAMCENTERWECHAT_STOP_PLAYER="zw.scw.sp.1",e.STREAMCENTERWECHAT_ON_PLAY_START="zw.scw.ops.0",e.STREAMCENTERWECHAT_ON_PLAY_STOP="zw.scw.ops.1",e.STREAMCENTERWECHAT_ON_PLAY_RETRY="zw.scw.opr",e.PLAYWECHAT_TRY_START_PLAYER="zw.pw.tsp.0",e.PLAYWECHAT_UPDATE_EVENT="zw.pw.ue",e.PLAYWECHAT_GET_PLAY_URL="zw.pw.gpu"}(t.ZEGO_WECHATMINI_ACTION||(t.ZEGO_WECHATMINI_ACTION={}))},399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=r(887),o=r(67),s=r(262),i=r(887),a=r(335),c=function(){function e(e,t){this.logger=e,this.dataReport=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.callbackList={},this.publishStreamList={},this.waitPublishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnOverTcpOnly=!1,this.customSetTcpOrUdp=!1,this.supportUdp=!1,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],beautyEffectOverload:[],playerRecvSEI:[],beautyEffectError:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.networkState=i.ENUM_NETWORK_STATE.offline,this.streamRetryTime=300,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.streamConnectTime=0,this.clientIP="",this.type="PUBLIC",this.roomList=[],this.tempRoomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.playAccelerate=!0,this.softCoding=!0,this.connectChanged=!1,this.logReportCallback=o.ClientUtil.logReportCallback,this.unregisterCallback=o.ClientUtil.unregisterCallback,this.checkIllegalCharacters=o.ClientUtil.checkIllegalCharacters,this.decodeServerError=o.ClientUtil.decodeServerError,this.getLiveRoomError=o.ClientUtil.getLiveRoomError,this.getServerError=o.ClientUtil.getServerError,this.mergeStreamList=o.ClientUtil.mergeStreamList,this.checkInteger=o.ClientUtil.checkInteger,this.isUrl=o.ClientUtil.isUrl,this.actionSuccessCallback=o.ClientUtil.actionSuccessCallback,this.checkValidNumber=o.ClientUtil.checkValidNumber,this.getDevices=o.ClientUtil.getDevices,this.uint8arrayToBase64=o.ClientUtil.uint8arrayToBase64,this.getSeq=i.getSeq,this.getReportSeq=n.getReportSeq}return e.prototype.getRequestId=function(){return this.idName+"-"+(0,i.getSeq)()},e.prototype.getSignalCmdContent=function(e,t,r,n){var o={request_id:t,room_id:e,from_userid:this.idName,from_username:this.nickName,to_userid:r};return null!=n&&(o.result=n),JSON.stringify(o)},e.prototype.actionListener=function(e){for(var t=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!["playQualityUpdate","publishQualityUpdate","soundLevelUpdate","capturedSoundLevelUpdate"].includes(e)&&this.listenerList[e]){var i=(0,n.getReportSeq)();this.dataReport.newReport(i,a.ZegoRTCLogEvent.kZegoListener.event),this.dataReport.addMsgInfo(i,{listener:e,params:r}),this.dataReport.uploadReport(i)}this.listenerList[e]&&this.listenerList[e].forEach((function(n){try{setTimeout((function(){n.apply(void 0,r)}),0)}catch(r){t.logger.error(s.ZEGO_WEBRTC_ACTION.STATECENTER_ACTION_LISTENER+" "+e+" "+r)}}))},e.prototype.getRoomByRoomID=function(e){return this.roomList.find((function(t){return t.roomID==e}))},e.prototype.getPlayRoom=function(e){return this.roomList.find((function(t){return!!t.streamList.find((function(t){return t.stream_id==e}))}))},e}();t.StateCenter=c},390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenter=void 0,t.ZegoStreamCenter=function(){this.publisherList={},this.playerList={},this.stopedPlayerList={}}},856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamHandler=void 0;var n=r(887),o=r(716),s=r(262),i=function(){function e(e,t,r,n,o){this.logger=e,this.stateCenter=t,this.rtm=r,this.streamCenter=n,this.roomID=o,this.minStreamSeq=0,this.streamSeq=0,this.streamQuerying=!1,this.streamSeqMergeMap=null,this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3}return e.prototype.setCDNInfo=function(e,t){e.urlFlv=t.urls_flv instanceof Array?t.urls_flv[0]||"":"string"==typeof t.urls_flv?t.urls_flv:"",e.urlHls=t.urls_m3u8 instanceof Array?t.urls_m3u8[0]||"":"string"==typeof t.urls_m3u8?t.urls_m3u8:"",e.urlHttpsFlv=t.urls_https_flv instanceof Array?t.urls_https_flv[0]||"":"string"==typeof t.urls_https_flv?t.urls_https_flv:"",e.urlHttpsHls=t.urls_https_m3u8 instanceof Array?t.urls_https_m3u8[0]||"":"string"==typeof t.urls_https_m3u8?t.urls_https_m3u8:"",e.urlRtmp=t.urls_rtmp instanceof Array?t.urls_rtmp[0]||"":"string"==typeof t.urls_rtmp?t.urls_rtmp:""},e.prototype.onStreamUpdated=function(e,t,r){},e.prototype.onStreamExtraInfoUpdated=function(e,t){},e.prototype.handleStreamStart=function(e,t){this.logger.info("zb.sh.hss call stream update"),this.room=t,e.body?(this.streamListHBMergeInterval=e.body.stream_list_hb_wait_merge_time||2e3,this.streamListMergeInterval=e.body.stream_list_push_merge_timeout||5e3,this.streamQuerying=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[]),this.handleReconnectStream(e.body.stream_info),this.logger.info("zb.sh.hss call end")):this.logger.error("zb.sh.hss server response wrong")},e.prototype.onPublishStateUpdate=function(e,t,r){},e.prototype.updateStreamInfo=function(e,t,r,s){var i,a,c=this;void 0===r&&(r=""),this.logger.info("zb.sh.usi call");var l=r,u=null===(i=this.room)||void 0===i?void 0:i.streamList.find((function(t){return t.stream_id===e}));u||this.logger.warn("zb.sh.usi stream not in room cmd "+t);var h={stream_id:e,extra_info:l};2002!==t&&2003!==t||(h.stream_sid=(null==u?void 0:u.stream_sid)||"");var p=JSON.stringify(h),_={sub_cmd:t,stream_msg:p,third_token:null===(a=this.room)||void 0===a?void 0:a.token},d=this.room;this.room.streamInfoList[e]={};var f=function(r,n){c.handleStreamUpdateRsp(r,e,t)},g=function(i,a){var l=c.room;if(l&&!l.isResetRoom&&!c.rtm.isDisConnect()&&i.code&&i.code==o.errorCodeList.TIMEOUT.code&&l.streamInfoList[e].seq==a)2001==t&&c.stateCenter.publishStreamList[e]&&c.stateCenter.publishStreamList[e].state==n.ENUM_PUBLISH_STREAM_STATE.update_info||2002==t?setTimeout((function(){c.updateStreamInfo(e,t,r,s)}),0):s&&s(o.errorCodeList.TIMEOUT);else if(i.body&&i.body.err_code){var u=c.stateCenter.getServerError(i.body.err_code,c.stateCenter.useNetAgent,i.body.err_message);[1011,1000002002].includes(u.code)&&(u=o.errorCodeList.TOKEN_EXPIRED),s&&s(u,a),t===n.ENUM_STREAM_SUB_CMD.liveBegin&&c.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.error,e,u)}};this.stateCenter.useNetAgent?this.rtm.liveRoomHandler.sendStreamUpdate(_,f,g,{sessionID:null==d?void 0:d.sessionID,roomID:null==d?void 0:d.roomID,roomSessionID:null==d?void 0:d.roomSessionID}):this.room.streamInfoList[e].seq=this.rtm.service.sendMessage("stream",_,f,g,void 0,{sessionID:null==d?void 0:d.sessionID,roomID:null==d?void 0:d.roomID,roomSessionID:null==d?void 0:d.roomSessionID}),this.logger.info("zb.sh.usi call success cmd "+t)},e.prototype.handleStreamUpdateRsp=function(e,t,r){var n,o,s;if(this.rtm.isDisConnect())this.logger.warn("zb.sh.hsur not login");else if(0==e.body.err_code){this.logger.info("zb.sh.hsur stream seq "+this.streamSeq+" server seq "+e.body.stream_seq),this.streamSeq=e.body.stream_seq;var i=this.room;if(i){if(null===(n=null==e?void 0:e.body)||void 0===n?void 0:n.token_remain_time)this.stateCenter.getRoomByRoomID(null===(o=null==e?void 0:e.header)||void 0===o?void 0:o.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.logger.error("zb.sh.hsur room no found ignore "+JSON.stringify(null===(s=e.header)||void 0===s?void 0:s.room_id));if(this.stateCenter.useNetAgent)this.handleStreamSync(e,t,r);else for(var a=0;a<e.body.stream_info.length;a++){var c=e.body.stream_info[a].stream_id;this.handleStreamRsp(i,c,e.body.stream_info[a],r),delete i.streamInfoList[c]}}else this.logger.info("hsur.0 room no found")}else this.logger.error("zb.sh.hsur stream update error "+e.body.err_code)},e.prototype.handleStreamSync=function(e,t,r){if(e.body.stream_seq>this.streamSeq)this.fetchStreamList();else{var n=this.room.streamList.find((function(e){return e.stream_id==t}));n&&e.body.stream_ver>n.stream_ver?this.fetchStreamList(t):this.handleStreamRsp(this.room,t,{stream_id:t,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,stream_nid:e.body.stream_nid},r)}},e.prototype.handleStreamRsp=function(e,t,r,o){var s=this.stateCenter.publishStreamList[t];s?s.state==n.ENUM_PUBLISH_STREAM_STATE.update_info&&(s.state=n.ENUM_PUBLISH_STREAM_STATE.publishing,this.logger.info("hsur.0 cmd "+o),2001===o||e.streamList.find((function(e){return e.stream_id==t}))||e.streamList.push(r),this.onPublishStateUpdate(n.ENUM_PUBLISH_STATE_UPDATE.start,t,{code:0,message:""})):this.logger.info("hsur.0 stream is not exist")},e.prototype.handleFetchStreamListRsp=function(e,t){if(this.logger.info("zb.sh.hfslr call"),this.streamQuerying=!1,0===e.body.err_code)if(this.streamSeq!==e.body.stream_seq){var r=e.body.stream_info;t&&(r=e.body.stream_info.filter((function(e){return e.stream_id===t}))),this.handleFullUpdateStream(e.body.stream_seq,r),this.logger.info("zb.sh.hfslr call success")}else this.logger.info("zb.sh.hfslr same seq");else this.logger.info("zb.sh.hfslr server error=",e.body.err_code)},e.prototype.handleFullUpdateStream=function(e,t){var r=this;this.logger.info("zb.sh.hfus call"),this.streamSeq=e,this.logger.debug("zb.sh.hfus server seq "+this.streamSeq),this.stateCenter.mergeStreamList(this.stateCenter.idName,this.room.streamList,t,(function(e,t,o){0!==e.length&&(r.logger.debug("zb.sh.hfus callback addstream"),r.onStreamUpdated(r.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,r.makeCallbackStreamList(e))),0!==t.length&&(r.logger.debug("zb.sh.hfus callback delstream"),r.onStreamUpdated(r.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,r.makeCallbackStreamList(t))),0!==o.length&&(r.logger.debug("zb.sh.hfus callback updatestream"),r.onStreamExtraInfoUpdated(r.roomID,r.makeCallbackStreamList(o)))})),this.logger.info("zb.sh.hfus call success")},e.prototype.handlePushStreamUpdateMsg=function(e){if(this.logger.warn("zb.sh.hpsum call "+JSON.stringify(e)),e.body.stream_info&&0!==e.body.stream_info.length){if(e.body.stream_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.fetchStreamList();switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD.added:this.handleAddedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.deleted:this.handleDeletedStreamList(e.body.stream_info);break;case n.ENUM_STREAM_UPDATE_CMD.updated:this.handleUpdatedStreamList(e.body.stream_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handlePriPushStreamUpdateMsg=function(e){if(this.logger.info("zb.sh.hpsum call"),e.body.streams_info&&0!==e.body.streams_info.length){if(e.body.streams_info.length+this.streamSeq!==e.body.stream_seq)return this.logger.info("zb.sh.hpsum call updatestream"),void this.mergeStreamByStreamSeq(e.body.stream_cmd,e.body.stream_seq,e.body.streams_info);switch(this.streamSeq=e.body.stream_seq,e.body.stream_cmd){case n.ENUM_STREAM_UPDATE_CMD_PRI.added:this.handleAddedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.deleted:this.handleDeletedStreamList(e.body.streams_info);break;case n.ENUM_STREAM_UPDATE_CMD_PRI.updated:this.handleUpdatedStreamList(e.body.streams_info)}this.logger.info("zb.sh.hpsum call success")}else this.logger.info("zb.sh.hpsum, emtpy list")},e.prototype.handleAddedStreamList=function(e){this.logger.debug("zb.sh.hasl call");for(var t,r=[],o=0;o<e.length;o++)if(e[o].anchor_id_name!=this.stateCenter.idName&&e[o].id_name!=this.stateCenter.idName&&e[o].user_id!==this.stateCenter.idName){t=!1;for(var s=0;s<this.room.streamList.length;s++)if(e[o].stream_id===this.room.streamList[s].stream_id){t=!0;break}t||r.push(e[o])}else this.logger.debug("hdsl.0 have self stream added");if(0!==r.length){this.logger.debug("zb.sh.hasl callback addstream");for(var i=0;i<r.length;i++)this.room.streamList.push(r[i]);this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.added,this.makeCallbackStreamList(r))}this.logger.info("zb.sh.hasl call success")},e.prototype.handleDeletedStreamList=function(e){this.logger.debug("zb.sh.hdsl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var o=this.room.streamList.length-1;o>=0;o--)if(e[r].stream_id===this.room.streamList[o].stream_id){!this.stateCenter.connectChanged&&this.room.streamList.splice(o--,1),t.push(e[r]);break}}else this.logger.debug("zb.sh.hdsl have self stream deleted");0!==t.length&&(this.logger.debug("zb.sh.hdsl callback delstream"),this.onStreamUpdated(this.roomID,n.ENUM_STREAM_UPDATE_TYPE.deleted,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.hdsl call")},e.prototype.handleUpdatedStreamList=function(e){this.logger.debug("zb.sh.husl call");for(var t=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.stateCenter.idName&&e[r].id_name!=this.stateCenter.idName&&e[r].user_id!==this.stateCenter.idName){for(var n=0;n<this.room.streamList.length;n++)if(e[r].stream_id===this.room.streamList[n].stream_id){e[r].extra_info!==this.room.streamList[n].extra_info&&(this.room.streamList[n]=e[r],t.push(e[r]));break}}else this.logger.debug("hsul.0 have self stream updated");0!==t.length&&(this.logger.debug("zb.sh.husl callback updatestream"),this.onStreamExtraInfoUpdated(this.roomID,this.makeCallbackStreamList(t))),this.logger.info("zb.sh.husl call success")},e.prototype.fetchStreamList=function(e){var t,r,n,o=this;if(this.logger.info("zb.sh.fsl call"),this.rtm.isDisConnect())this.logger.info("zb.sh.fsl state error");else if(this.streamQuerying)this.logger.info("zb.sh.fsl already doing");else{if(this.streamQuerying=!0,this.logger.debug("zb.sh.fsl send fetch request"),this.stateCenter.useNetAgent)this.rtm.liveRoomHandler.getStreamList({},(function(t){o.handleFetchStreamListRsp(t,e)}),(function(e){}),{roomID:null===(t=this.room)||void 0===t?void 0:t.roomID,sessionID:null===(r=this.room)||void 0===r?void 0:r.sessionID,roomSessionID:null===(n=this.room)||void 0===n?void 0:n.roomSessionID});else{var s=this.room;this.rtm.service.sendMessage("stream_info",{reserve:0},this.handleFetchStreamListRsp.bind(this),(function(e,t){}),void 0,{roomID:null==s?void 0:s.roomID,sessionID:null==s?void 0:s.sessionID,roomSessionID:null==s?void 0:s.roomSessionID})}this.logger.info("zb.sh.fsl call success")}},e.prototype.handleReconnectStream=function(e){var t,r,o,s;this.logger.info("zb.sh.hrs call");var i=this.streamCenter.publisherList,a=this.streamCenter.playerList,c=function(a){if((null===(r=null===(t=i[a])||void 0===t?void 0:t.room)||void 0===r?void 0:r.roomID)!==l.roomID)return"continue";var c=e.find((function(e){return e.stream_id==a}));if(i[a].publisher.state==n.ENUM_PUBLISH_STATE.publishing&&(!c||c&&c.anchor_id_name!==l.stateCenter.idName))l.updateStreamInfo(a,n.ENUM_STREAM_SUB_CMD.liveBegin,l.stateCenter.publishStreamList[a].extra_info);else if(i[a].publisher.state==n.ENUM_PUBLISH_STATE.stop&&!(null===(s=null===(o=i[a])||void 0===o?void 0:o.retryStreamHandler)||void 0===s?void 0:s.maxTimer)&&e.find((function(e){return e.stream_id==a}))){l.updateStreamInfo(a,n.ENUM_STREAM_SUB_CMD.liveEnd);for(var u=0;u<l.room.streamList.length;u++)if(l.room.streamList[u].stream_id==a){l.room.streamList.splice(u--,1);break}}},l=this;for(var u in i)c(u);for(var u in i){if(i[u].room.roomID===this.roomID)if(i[u].isReDispatch)this.logger.info("zb.sh.hrs "+u+"retry dispatch"),(h=i[u].retryDispatchHandler).stopMaxTime(),h.invalid(),h.initStream(u,i[u].publishOption,!0),h.active(0),i[u].isReDispatch=!1}for(var u in a){var h;if(a[u].room.roomID===this.roomID)if(a[u].isReDispatch)this.logger.info("zb.sh.hrs "+u+"retry dispatch"),(h=a[u].retryDispatchHandler).stopMaxTime(),h.invalid(),h.initStream(u,a[u].playOption,!1),h.active(0),a[u].isReDispatch=!1}var p=this.streamCenter.stopedPlayerList,_=function(e){if(p[e].roomID!==d.roomID)return"continue";var t=d.streamCenter,r=p[e],o=r.playOption,s=r.playStream;t.setPlayStateStart(e,o,r.isDataChannel);var i=t.playerList[e].retryDispatchHandler;t.playSuccessCallBackList[e]=p[e].sucCallBack?p[e].sucCallBack:function(e){for(var t=document.querySelectorAll("video, audio"),r=0;r<t.length;r++){s&&t[r].srcObject===s&&(s.getTracks().forEach((function(e){return s.removeTrack(e)})),e.clone().getTracks().forEach((function(e){return s.addTrack(e)})))}},p[e].errCallBack&&(t.playErrorCallBackList[e]=p[e].errCallBack),t.onPlayStateUpdate(n.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),i.stopMaxTime(),i.invalid(),i.initStream(e,o,!1),i.startMaxTime(),i.active(0),delete p[e]},d=this;for(var u in p)_(u);this.logger.info("zb.sh.hrs end")},e.prototype.makeCallbackStreamList=function(e){var t,r=[];this.stateCenter.useNetAgent&&this.stateCenter.appConfig&&(t=this.stateCenter.appConfig.media_config.play_config.resource_info.find((function(e){return e.resource_type===n.SignalResourceType.CDN})));if(e&&e.length>0)for(var o=0;o<e.length;o++){var s=[],i=[],a=[],c=e[o].stream_id;if(t){for(var l=0;l<t.service_info.length;l++){var u=t.service_info[l],h=u.url_template;switch(u.protocol){case n.ProtocolType.FLV:var p=h.replace("{STREAM_NAME}",c);s.push(p);break;case n.ProtocolType.HLS:var _=h.replace("{STREAM_NAME}",c);i.push(_);break;case n.ProtocolType.RTMP:var d=h.replace("{STREAM_NAME}",c);a.push(d)}}e[o].urls_flv=s,e[o].urls_m3u8=i,e[o].urls_rtmp=a}var f={user:{userID:e[o].anchor_id_name||e[o].id_name,userName:e[o].anchor_nick_name||e[o].nick_name},extraInfo:e[o].extra_info,streamID:e[o].stream_id,roomID:"",urlFlv:"",urlRtmp:"",urlHls:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[o].stream_gid,closeType:e[o].close_type};this.setCDNInfo(f,e[o]),r.push(f)}return r},e.prototype.sendBizChannelRequest=function(e,t,r,n){var o=this;void 0===n&&(n=!1),e=Object.assign(e,{is_retry_req:n?1:0});var s=this.room;this.rtm.service.sendMessage("biz_channel",e,(function(e,r){t(e.header.seq,e.body.cmd,e.body.rsp_body)}),(function(n,s){var i=n.body.err_code;"number"!=typeof i||2002!==i?r(i,s,n.body.rsp_body):o.sendBizChannelRequest(e,t,r,!0)}),void 0,{roomID:null==s?void 0:s.roomID,sessionID:null==s?void 0:s.sessionID,roomSessionID:null==s?void 0:s.roomSessionID})},e.prototype.sendBizChannelRequestV2=function(e,t,r,n){var o=this,i=e.server,a=e.location,c=e.cmd,l=e.channel,u=this.rtm.netAgent,h=this.room,p=void 0,_=t.timestamp;t&&(p=JSON.stringify(t));var d={cmd:c,req_body:p,appid:this.stateCenter.appid,timestamp:_||Math.ceil((new Date).getTime()/1e3),token:null==h?void 0:h.token,user_id:this.stateCenter.idName,channel:l||"media"};this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" "+JSON.stringify(d)+" request "+JSON.stringify(e)),u.startHttpRequest({service:i,headers:[],body:d,idName:this.stateCenter.idName,method_no:2,ack:!1,location:a},(function(e){o.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_SEND_BIZCHANNEL_REQUESTV2+" rsp "+JSON.stringify(e.body));var i=e.status_code,a=e.body;if(200===i){var c=a;if("string"==typeof a)try{c=JSON.parse(a)}catch(e){throw n(i),e}var l=c.err_code,u=c.rsp_body,h=void 0;try{h=JSON.parse(u)}catch(e){h=u}if(0!==l)return"number"==typeof l&&2002===l?void o.sendBizChannelRequest(t,r,n,!0):void n(i,l,h);r(h)}else n(i)}),(function(e){n(-1,null==e?void 0:e.code,void 0,e)}))},e.prototype.updateStreamExtraInfo=function(e,t,r,n){},e.prototype.setStreamExtraInfo=function(e,t,r,n){},e.prototype._publishTarget=function(e,t,r){},e.prototype.patchStreamList=function(e){var t=this;if("number"==typeof e.body.StreamRefresh&&0!==e.body.StreamRefresh)return this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" stream refresh "),void this.fetchStreamList();e.body.stream_seq===this.streamSeq||this.streamSeqMergeMap||(this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_PATCH_STREAM_LIST+" call update stream "+this.streamSeq+" server "+e.body.stream_seq),this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.streamListHBMergeInterval)),this.minStreamSeq=e.body.stream_seq},e.prototype.getStreamSeq=function(){return this.streamSeq},e.prototype.mergeStreamByStreamSeq=function(e,t,r){var n=this;this.streamSeqMergeMap||(this.logger.warn(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" new merge stream list "+this.streamSeq+" server "+t),this.streamSeqMergeMap={},this.streamSeqMergeTimer&&clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.streamListMergeInterval)),this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM_BY_STREAM_SEQ+" ".concat(this.streamSeqMergeMap," ").concat(e," ").concat(t," ").concat(r)),this.streamSeqMergeMap[t]={cmd:e,streamList:r}},e.prototype.handleMergeTimeout=function(){if(this.streamSeqMergeMap){var e=Object.keys(this.streamSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.minStreamSeq?this.mergeStream(e):(this.streamSeqMergeMap=null,this.fetchStreamList())}},e.prototype.mergeStream=function(e){var t=this;this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" merge streamList "+this.streamSeq+" streamSeqList "+e.join(","));var r=e[e.length-1],o=[];e.forEach((function(e){if(t.streamSeqMergeMap&&t.streamSeqMergeMap[e])switch(t.streamSeqMergeMap[e].cmd){case n.ENUM_STREAM_UPDATE_CMD.added:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t),o.push(e)}));break;case n.ENUM_STREAM_UPDATE_CMD.deleted:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t)}));break;case n.ENUM_STREAM_UPDATE_CMD.updated:t.streamSeqMergeMap[e].streamList.forEach((function(e){var t=o.findIndex((function(t){return t.stream_id==e.stream_id}));-1!==t&&o.splice(t),o.push(e)}))}})),this.streamSeqMergeMap=null,this.logger.info(s.ZEGO_WEBRTC_ACTION.STREAMHANDLER_MERGE_STREAM+" "+o),this.handleFullUpdateStream(r,o)},e.prototype.reset=function(){this.minStreamSeq=0,this.streamSeqMergeMap=null,this.streamSeqMergeTimer&&(clearTimeout(this.streamSeqMergeTimer),this.streamSeqMergeTimer=void 0),this.streamListHBMergeInterval=2e3,this.streamListMergeInterval=5e3},e}();t.StreamHandler=i},887:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ENUM_SOURCE_TYPE=t.ENUM_DISPATCH_TYPE=t.ENUM_BROADCASTER_STATUS=t.ENUM_PLAY_SOURCE_TYPE=t.ENUM_PUBLISH_STATE_NEGO=t.ENUM_PUSH_SIGNAL_SUB_CMD=t.ENUM_SIGNAL_SUB_CMD=t.QUALITYLEVEL=t.SERVER_ERROR_CODE=t.ENUM_STREAM_UPDATE_CMD_PRI=t.ENUM_STREAM_UPDATE_CMD=t.MINIUM_HEARTBEAT_INTERVAL=t.STREAM_DELETE_REASON=t.ENUM_NETWORK_STATE=t.ENUM_RUN_STATE=t.ENUM_STREAM_UPDATE_TYPE=t.ENUM_STREAM_CMD_PRI=t.ENUM_STREAM_SUB_CMD=t.ENUM_PUBLISH_STREAM_STATE=t.MAX_RETRY_CONNECT_INTERVAL=t.MAX_TRANS_DATA_LENGTH=t.MAX_TRANS_TYPE_LENGTH=t.MAX_MIX_TASK_ID_LENGTH=t.MAX_MESSAGE_LENGTH=t.MAX_ROOM_ID_LENGTH=t.MAX_USER_NAME_LENGTH=t.MAX_USER_ID_LENGTH=t.MAX_STREAM_ID_LENGTH=t.MAX_TRY_HEARTBEAT_COUNT=t.SEND_MSG_TIMEOUT=t.SEND_MSG_RESET=t.MAX_TRY_CONNECT_COUNT=t.streamMap=t.ENUM_CONNECT_STATE=t.ProtocolType=t.SignalResourceType=t.ENUM_PROBE_STATE=t.ENUM_PLAY_STATE_NEGO=t.ENUM_PLAYER_STATE=t.ENUM_PLAY_STATE=t.ENUM_PUBLISH_STATE=t.ENUM_SCREEM_RESOLUTION_TYPE=t.ENUM_RESOLUTION_TYPE=t.ENUM_SIGNAL_STATE=t.ERROR_CODES=t.ENUM_REMOTE_TYPE=t.LOG_LEVEL=t.ENUM_LOG_LEVEL=t.ROOMVERSION=t.PROTO_VERSION=void 0,t.BusinessService=t.NetConnection=t.ZegoExpressWebRTM=t.ZegoDataReport=t.ZegoLogger=t.ZegoExpressWebRTMEngine=t.getReportSeq=t.getSeq=t.ZegoSEIType=t.QUALITY_CONSTANT=t.QualityGrade=t.REPORT_ACTION=t.ENUM_RETRY_STATE=t.ENUM_PLAY_STATE_UPDATE=t.ENUM_PUBLISH_STATE_UPDATE=t.LinkedList=t.ListNode=t.E_CLIENT_TYPE=void 0,t.PROTO_VERSION="2.10.3",t.ROOMVERSION="V1",function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={})),t.LOG_LEVEL={debug:0,info:1,warn:2,error:3,report:99,disable:100},function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={})),t.ERROR_CODES={ROOM_SESSION_ID_ERR:1000000152,FETCH_TRANS_UNKNOWN_CHANNEL:1000001108,FETCH_TRANS_UNKNOWN_TYPE:1000001109,FETCH_TRANS_WRONG_SEQ:1000001110},function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(t.ENUM_SIGNAL_STATE||(t.ENUM_SIGNAL_STATE={})),t.ENUM_RESOLUTION_TYPE={LOW:{width:320,height:240,frameRate:15,bitRate:300},MEDIUM:{width:640,height:480,frameRate:15,bitRate:800},HIGH:{width:1280,height:720,frameRate:20,bitRate:1500}},t.ENUM_SCREEM_RESOLUTION_TYPE={LOW:{frameRate:20,bitRate:800},MEDIUM:{frameRate:15,bitRate:1500},HIGH:{frameRate:5,bitRate:2e3}},t.ENUM_PUBLISH_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,publishing:6,stop:7,didNotStart:8},t.ENUM_PLAY_STATE={start:0,waitingSessionRsp:1,waitingOfferRsp:2,waitingServerAnswer:3,waitingServerICE:4,connecting:5,playing:6,stop:7,didNotStart:8},t.ENUM_PLAYER_STATE={start:0,playing:1,stop:2},t.ENUM_PLAY_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.tryProbe=0]="tryProbe",e[e.probed=2]="probed"}(t.ENUM_PROBE_STATE||(t.ENUM_PROBE_STATE={})),function(e){e[e.CDN=0]="CDN",e[e.RTC=1]="RTC",e[e.L3=2]="L3"}(t.SignalResourceType||(t.SignalResourceType={})),function(e){e[e.UDP=0]="UDP",e[e.RTMP=1]="RTMP",e[e.FLV=2]="FLV",e[e.HLS=3]="HLS",e[e.WEBRTC=4]="WEBRTC"}(t.ProtocolType||(t.ProtocolType={})),t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},t.streamMap={"/lr/push/stream_add":12001,"/lr/push/stream_delete":12002,"/lr/push/stream_update":12003},t.MAX_TRY_CONNECT_COUNT=3,t.SEND_MSG_RESET=2,t.SEND_MSG_TIMEOUT=1,t.MAX_TRY_HEARTBEAT_COUNT=5,t.MAX_STREAM_ID_LENGTH=256,t.MAX_USER_ID_LENGTH=64,t.MAX_USER_NAME_LENGTH=256,t.MAX_ROOM_ID_LENGTH=128,t.MAX_MESSAGE_LENGTH=1024,t.MAX_MIX_TASK_ID_LENGTH=256,t.MAX_TRANS_TYPE_LENGTH=128,t.MAX_TRANS_DATA_LENGTH=4096,t.MAX_RETRY_CONNECT_INTERVAL=12,t.ENUM_PUBLISH_STREAM_STATE={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},t.ENUM_STREAM_SUB_CMD={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},t.ENUM_STREAM_CMD_PRI={liveBegin:"zegochat_js.room_stream_create_req",liveEnd:"zegochat_js.room_stream_delete_req",liveUpdate:"zegochat_js.room_stream_update_req"},t.ENUM_STREAM_UPDATE_TYPE={added:1,deleted:0},function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(t.ENUM_RUN_STATE||(t.ENUM_RUN_STATE={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={})),t.STREAM_DELETE_REASON={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}},function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CDN=1]="CDN",e[e.RTC=2]="RTC",e[e.L3=3]="L3"}(n||(n={})),t.MINIUM_HEARTBEAT_INTERVAL=3e3,t.ENUM_STREAM_UPDATE_CMD={added:12001,deleted:12002,updated:12003},t.ENUM_STREAM_UPDATE_CMD_PRI={added:1,updated:2,deleted:3},t.SERVER_ERROR_CODE=1e4,function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(t.QUALITYLEVEL||(t.QUALITYLEVEL={})),t.ENUM_SIGNAL_SUB_CMD={none:0,joinLiveRequest:1001,joinLiveResult:1002,joinLiveInvite:1003,joinLiveStop:1004},t.ENUM_PUSH_SIGNAL_SUB_CMD={none:0,pushJoinLiveRequest:11001,pushJoinLiveResult:11002,pushJoinLiveInvite:11003,pushJoinLiveStop:11004},t.ENUM_PUBLISH_STATE_NEGO={stop:0,start:1,waiterAnswer:2,waitingCandidate:3,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8},function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra"}(t.ENUM_PLAY_SOURCE_TYPE||(t.ENUM_PLAY_SOURCE_TYPE={})),function(e){e[e.stop=0]="stop",e[e.start=1]="start"}(t.ENUM_BROADCASTER_STATUS||(t.ENUM_BROADCASTER_STATUS={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra",e[e.customUrl=2]="customUrl"}(t.ENUM_DISPATCH_TYPE||(t.ENUM_DISPATCH_TYPE={})),function(e){e[e.CDN=0]="CDN",e[e.BGP=1]="BGP"}(t.ENUM_SOURCE_TYPE||(t.ENUM_SOURCE_TYPE={})),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}(t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}));var o=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();t.ListNode=o;var s=function(){function e(){this.start=new o,this.end=new o,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return e.prototype.insertBefore=function(e,t){var r=new o(this._idCounter,t);return r.next=e,r.prev=e.prev,e.prev&&(e.prev.next=r),e.prev=r,++this._idCounter,++this._numNodes,r},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(e>=0)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},e.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()},e}();t.LinkedList=s,t.ENUM_PUBLISH_STATE_UPDATE={start:0,error:1,retry:2},t.ENUM_PLAY_STATE_UPDATE={start:0,error:1,retry:2,stop:3},t.ENUM_RETRY_STATE={didNotStart:0,retrying:1,finished:2},t.REPORT_ACTION={eventStart:"eventStart",eventEndWithMsgInfo:"eventEndWithMsgInfo",addEventMsg:"addEventMsg",addEvent:"addEvent",eventEnd:"eventEnd",addMsgInfo:"addMsgInfo"},function(e){e[e.Unknown=-1]="Unknown",e[e.Excellent=0]="Excellent",e[e.Good=1]="Good",e[e.Middle=2]="Middle",e[e.Poor=3]="Poor",e[e.Die=4]="Die"}(t.QualityGrade||(t.QualityGrade={})),function(e){e[e.MinQuality=0]="MinQuality",e[e.DieQuality=0]="DieQuality",e[e.PoorMinQuality=1]="PoorMinQuality",e[e.MiddleMinQuality=30]="MiddleMinQuality",e[e.GoodMinQuality=60]="GoodMinQuality",e[e.ExcellentMinQuality=85]="ExcellentMinQuality",e[e.MaxQuality=100]="MaxQuality"}(t.QUALITY_CONSTANT||(t.QUALITY_CONSTANT={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(t.ZegoSEIType||(t.ZegoSEIType={}));var i=r(545);Object.defineProperty(t,"getSeq",{enumerable:!0,get:function(){return i.getSeq}}),Object.defineProperty(t,"getReportSeq",{enumerable:!0,get:function(){return i.getReportSeq}}),Object.defineProperty(t,"ZegoExpressWebRTMEngine",{enumerable:!0,get:function(){return i.ZegoExpressWebRTMEngine}}),Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return i.ZegoLogger}}),Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return i.ZegoDataReport}}),Object.defineProperty(t,"ZegoExpressWebRTM",{enumerable:!0,get:function(){return i.ZegoExpressWebRTM}}),Object.defineProperty(t,"NetConnection",{enumerable:!0,get:function(){return i.NetConnection}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return i.BusinessService}})},716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={NOT_LOGIN:{code:1000002,message:"not login room"},STREAMID_TOO_LONG:{code:1000014,message:"stream ID is too long"},STREAM_ID_NULL:{code:1000015,message:"streamID is empty"},STREAM_ID_INVALID_CHARACTER:{code:1000016,message:"stream ID contains illegal characters"},NETWORK_BROKEN:{code:1000017,message:"network is broken"},LOCALSTREAM_WRONG:{code:1000018,message:"local stream wrong"},INPUT_PARAM:{code:1100001,message:"input param error."},TIMEOUT:{code:1100002,message:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},INIT_SDK_WRONG:{code:1101e3,message:"init sdk wrong"},WX_GET_SETTING_FAIL:{code:1101001,message:"wx get setting fail"},GET_CONFIG_FAIL:{code:1101002,message:"get app config fail"},USER_ID_NULL:{code:1002005,message:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,message:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,message:"user ID is too long"},USER_NAME_NULL:{code:1002008,message:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,message:"username is too long"},ROOM_ID_NULL:{code:1002011,message:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,message:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,message:"room ID is too long"},LOGIN_TIMEOUT:{code:1002031,message:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,message:"users logging into the room exceeds the maximum number"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,message:"kickout may be the same user ID login other"},ROOM_RETRY_TIMEOUT:{code:1002053,message:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,message:"server has sent a signal to kick out"},ROOM_INNER_ERROR:{code:1002099,message:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,message:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,message:"parse json error."},LOGIN_PROCESSING:{code:1102012,message:"login is processing."},LIVEROOM_REQUEST_ERROR:{code:1102013,message:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,message:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,message:"user login state is wrong."},TOKEN_ERROR:{code:1102016,message:"token error"},DISPATCH_ERROR:{code:1102017,message:"dispatch error"},TOKEN_EXPIRED:{code:1102018,message:"token expired"},SUBCMD_ERROR:{code:1102019,message:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,message:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,message:"biz channel error."},DISPATCH_TIMEOUT:{code:1102022,message:"dispatch request timeout"},CONNECT_FAILED:{code:1102023,message:"connect signal fail"},PUBLISHER_MEDIA_SERVER_FORBID:{code:1003025,message:"stream is forbided by media server"},PUBLISHER_EXTRA_INFO_TOO_LONG:{code:1003051,message:"stream extra info is too long"},PUBLISHER_PARAM:{code:1103001,message:"input param error"},PUBLISHER_BROWSER_NOT_SUPPORT:{code:1103002,message:"browser do not support"},PUBLISHER_DISPATCH_FAIL:{code:1103003,message:"dispatch request error"},PUBLISHER_SCREEN_FAILED:{code:1103010,message:"screen fail"},ENUMERATE_DEVICES_FAIL:{code:1103011,message:"enumerate devices fail"},PUBLISHER_DISPATCH_REQUEST_FAIL:{code:1103020,message:"dispatch request fail"},PUBLISHER_SESSION_REQUEST_FAIL:{code:1103021,message:"session request fail"},PUBLISHER_CREATE_OFFER_ERROR:{code:1103022,message:"create offer error"},PUBLISHER_SET_LOCAL_DESC_ERROR:{code:1103023,message:"setLocalDescription error"},PUBLISHER_MEDIA_DESC_ERROR:{code:1103024,message:"mediaDesc error"},PUBLISHER_SET_REMOTE_DESC_ERROR:{code:1103025,message:"other side offer error"},PUBLISHER_CANDIDATE_ERROR:{code:1103026,message:"candidate error"},PUBLISHER_SESSION_CLOSED:{code:1103027,message:"server session closed"},PUBLISHER_MEDIA_CONNECTION_ERROR:{code:1103028,message:"ice connection error"},PUBLISHER_SERVER_NEGO_TIMEOUT:{code:1103030,message:"negotiation timeout"},PUBLISH_DEVICE_OUT_ERR:{code:1103041,message:"device change "},PUBLISH_SCREEN_CANCELED:{code:1103042,message:"screen canceled"},PUBLISH_SCREEN_NOT_SUPPORT:{code:1103043,message:"screen not support"},PUBLISH_NO_PREVIEW:{code:1103044,message:"stream is not from zego"},REPEATED_PULL:{code:1103049,message:"repeated pull same stream"},PUBLISHER_WEBSOCKET_DISCONNECTED:{code:1103050,message:"websocket disconnected"},PUBLISHER_RETRY_TIMEOUT:{code:1103051,message:"publisher retry timeout"},PUBLISHER_HTTPS_REQUIRED:{code:1103053,message:"https is required"},PUBLISHER_NO_PREVIEW:{code:1103054,message:"no preview"},PUBLISHER_STREAM_NO_FOUND:{code:1103055,message:"publish stream no found"},PUBLISHER_IS_PUBLISHING:{code:1103056,message:"publish is publishing"},PUBLISHER_CLIENT_IP_CHANGED:{code:1103058,message:"client ip changed"},PUBLISHER_TTL_OVERTIME:{code:1103059,message:"ttl over time"},PUBLISHER_SESSION_TIMEOUT:{code:1103060,message:"session request timeout"},PUBLISHER_GET_USER_MEDIA_FAIL:{code:1103061,message:"get media fail"},PUBLISHER_DEVICE_NO_ALLOWED:{code:1103064,message:"get device not allowed"},PUBLISHER_DEVICE_NO_READABLE:{code:1103065,message:"device is not readable"},PUBLISHER_OVER_CONSTRAINED:{code:1103066,message:"device does not meet constraints"},PUBLISHER_UPDATE_SDP_TIMEOUT:{code:1103067,message:"update sdp time out"},PUBLISHER_UPDATE_SDP_FAIL:{code:1103068,message:"update sdp fail"},VIDEO_EFFECT_IS_STARTING:{code:1103073,message:"video effect is starting, please operate after video effect is started"},PLAYER_PARAM:{code:1104001,message:"input parm error"},PLAYER_DISPATCH_REQUEST_FAIL:{code:1104020,message:"dispatch request fail"},PLAYER_SESSION_REQUEST_FAIL:{code:1104021,message:"session request fail"},PLAYER_CREATE_OFFER_ERROR:{code:1104022,message:"create offer error"},PLAYER_SET_LOCAL_DESC_ERROR:{code:1104023,message:"setLocalDescription error"},PLAYER_MEDIA_DESC_ERROR:{code:1104024,message:"mediaDesc error"},PLAYER_SET_REMOTE_DESC_ERROR:{code:1104025,message:"other side offer error"},PLAYER_CANDIDATE_ERROR:{code:1104026,message:"candidate error"},PLAYER_SESSION_CLOSED:{code:1104027,message:"server session closed"},PLAYER_MEDIA_CONNECTION_ERROR:{code:1104028,message:"ice connection error"},PLAYER_WEBSOCKET_DISCONNECTED:{code:1104029,message:"websocket disconnected"},PLAYER_SERVER_NEGO_TIMEOUT:{code:1104030,message:"negotiation timeout"},PLAYER_RETRY_TIMEOUT:{code:1104031,message:"player retry timeout"},PLAYER_IS_PLAYING:{code:1104032,message:"player is playing"},PLAYER_CLIENT_IP_CHANGED:{code:1104033,message:"client ip changed"},PLAYER_TTL_OVERTIME:{code:1104034,message:"ttl is over time"},PLAYER_SESSION_RESET:{code:1104035,message:"reset session push"},PLAYER_SESSION_TIMEOUT:{code:1104036,message:"session request timeout"},PLAYER_PROBE_TIMEOUT:{code:1104037,message:"probe time out"},PLAYER_UNSUPPORTED_PROTOCOL:{code:1104038,message:"resource mode is not supported"},PLAYER_STREAM_NOT_EXIST:{code:1104039,message:"play stream not found"},PLAYER_PLAY_FAILED:{code:1104040,message:"play fail,check whether the stream is pulled repeatedly or the room already exists"},DEVICE_ERROR_TYPE_UNPLUGGED:{code:1006006,message:"the device is unplugged"},IM_CONTENT_NULL:{code:1009001,message:"message content is empty"},IM_CONTENT_TOO_LONG:{code:1009002,message:"message content is too long"},IM_SEND_FAILED:{code:1009010,message:"failed to send message"},FREQ_LIMITED:{code:1109001,message:"frequency limited."}}},335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatLogEvent=t.ZegoRTCLogEvent=void 0;var n=r(716),o=function(e){return e};t.ZegoRTCLogEvent={kZegoTaskCreateStream:{event:"/sdk/create_stream",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kParamError:n.errorCodeList.PUBLISHER_PARAM,kScreenCancelError:n.errorCodeList.PUBLISH_SCREEN_CANCELED,kScreenFailedError:n.errorCodeList.PUBLISHER_SCREEN_FAILED,kScreenNotSupportError:n.errorCodeList.PUBLISH_SCREEN_NOT_SUPPORT,kHttpsRequiredError:n.errorCodeList.PUBLISHER_HTTPS_REQUIRED,kGetUserMediaError:n.errorCodeList.PUBLISHER_GET_USER_MEDIA_FAIL,kDeviceNoAllowedError:n.errorCodeList.PUBLISHER_DEVICE_NO_ALLOWED,kDeviceNoReadableError:n.errorCodeList.PUBLISHER_DEVICE_NO_READABLE,kDeviceOverConstrainedError:n.errorCodeList.PUBLISHER_OVER_CONSTRAINED},stream_type:o,screen:o,camera:o,custom:o},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoPreviewError:n.errorCodeList.PUBLISH_NO_PREVIEW,kPublishEffectIsStarting:n.errorCodeList.VIDEO_EFFECT_IS_STARTING,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kMediaServerForbidError:n.errorCodeList.PUBLISHER_MEDIA_SERVER_FORBID,kPublishTokenExpiredError:n.errorCodeList.TOKEN_EXPIRED,kPublishSessionClosedError:n.errorCodeList.PUBLISHER_SESSION_CLOSED,kPublishNegoTimeoutError:n.errorCodeList.PUBLISHER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PUBLISHER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PUBLISHER_SET_LOCAL_DESC_ERROR,kSessionTimeoutError:n.errorCodeList.PUBLISHER_SESSION_TIMEOUT,kSessionRequestError:n.errorCodeList.PUBLISHER_SESSION_REQUEST_FAIL,kSetRemoteDescError:n.errorCodeList.PUBLISHER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PUBLISHER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PUBLISHER_WEBSOCKET_DISCONNECTED,kMediaDescError:n.errorCodeList.PUBLISHER_MEDIA_DESC_ERROR,kCandidateError:n.errorCodeList.PUBLISHER_CANDIDATE_ERROR,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING,kClientIPChangedError:n.errorCodeList.PUBLISHER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PUBLISHER_TTL_OVERTIME,kUpdateMediaDescriptionTimeOut:n.errorCodeList.PUBLISHER_UPDATE_SDP_TIMEOUT,kUpdateMediaDescriptionError:n.errorCodeList.PUBLISHER_UPDATE_SDP_FAIL},publishOption:o,message:o,session_id:o,stream:o,video_en_codec_id:o,cap_w:o,cap_h:o,w:o,h:o,video_en_fps:o,video_en_bps:o,audio_c_channel_count:o,audio_en_bps:o,aec_level:o,ans_level:o,agc:o,traffic_control_min_video_bitrate:o,use_na:o},kZegoTaskVideoCaptureSize:{event:"/sdk/api/publish_video_c_size",session_id:o,w:o,h:o},kZegoTaskVideoPlaySize:{event:"/sdk/play_video_size_changed",session_id:o,w:o,h:o},kZegoTaskRePublish:{event:"/sdk/republish",stream:o},kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDToLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayUnsupportedResourceMode:n.errorCodeList.PLAYER_UNSUPPORTED_PROTOCOL,kPlayStreamNotFound:n.errorCodeList.PLAYER_STREAM_NOT_EXIST,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kPlaySessionClosedError:n.errorCodeList.PLAYER_SESSION_CLOSED,kPlaySessionResetError:n.errorCodeList.PLAYER_SESSION_RESET,kPlayNegoTimeoutError:n.errorCodeList.PLAYER_SERVER_NEGO_TIMEOUT,kCreateOfferError:n.errorCodeList.PLAYER_CREATE_OFFER_ERROR,kSetLocalDescError:n.errorCodeList.PLAYER_SET_LOCAL_DESC_ERROR,kSessionRequestError:n.errorCodeList.PLAYER_SESSION_REQUEST_FAIL,kSessionTimeoutError:n.errorCodeList.PLAYER_SESSION_TIMEOUT,kSetRemoteDescError:n.errorCodeList.PLAYER_SET_REMOTE_DESC_ERROR,kMediaConnectionError:n.errorCodeList.PLAYER_MEDIA_CONNECTION_ERROR,kWebsocketDisconnectedError:n.errorCodeList.PLAYER_WEBSOCKET_DISCONNECTED,kCandidateError:n.errorCodeList.PLAYER_CANDIDATE_ERROR,kMediaDescError:n.errorCodeList.PLAYER_MEDIA_DESC_ERROR,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING,kClientIPChangedError:n.errorCodeList.PLAYER_CLIENT_IP_CHANGED,kTTLOverTimeError:n.errorCodeList.PLAYER_TTL_OVERTIME,kProbeTimeOutError:n.errorCodeList.PLAYER_PROBE_TIMEOUT,kPlayFailed:n.errorCodeList.PLAYER_PLAY_FAILED},playOption:o,message:o,session_id:o,stream:o,audio_activate:o,video_activate:o,use_na:o},kZegoTaskRePlay:{event:"/sdk/replay",stream:o},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o},kZegoTaskEnumDevices:{event:"/device/list",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},dev_list:o},kZegoTaskAudioOutput:{event:"/device/audio_capture",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:o,device:o},kZegoTaskVideoCapture:{event:"/device/video_capture",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:o,device:o},kZegoTaskDeviceInterrupt:{event:"/device/interrupt",error:{kBrowserNotSupportError:n.errorCodeList.PUBLISHER_BROWSER_NOT_SUPPORT,kEnumDevicesError:n.errorCodeList.ENUMERATE_DEVICES_FAIL},session_id:o,interrupt:o},kZegoTaskSetDebug:"/sdk/set_debug",kZegoTaskSetLog:"/sdk/set_log_config",kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",capability:o},kZegoTaskRemoteCameraUpdate:{event:"/sdk/remote_camera_update",stream:o,status:o},kZegoTaskRemoteMicUpdate:{event:"/sdk/remote_mic_update",stream:o,status:o},kZegoTaskDestroyStream:{event:"/sdk/destroy_stream",error:{kLocalStreamError:n.errorCodeList.LOCALSTREAM_WRONG}},kZegoTaskScreenSharingEnded:"/sdk/screen_share_end",kZegoTaskAudioOutputChanged:{event:"/device/api/audio_output",session_id:o,stream:o,device:o,reason:o},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:o,update_stream:o},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:o},kZegoTaskPlayDecodeFirstVideoFrame:{event:"/sdk/play_decode_first_video_frame",session_id:o,fft_consumed:o},kZegoVisibilityChange:{event:"/app/background"},kZegoSetCaptureVolume:{event:"/sdk/set_capture_volume",error:{kParamError:n.errorCodeList.INPUT_PARAM}},kZegoListener:{event:"/sdk/listener"},kZegoNetProbe:{event:"/sdk/net_probe"},kZegoNetProbeResult:{event:"/sdk/net_probe_result"},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"}},t.ZegoWechatLogEvent={kZegoTaskCheckSystemRequirements:{event:"/sdk/check_system",error:{kCheckSystemGetSettingFailError:n.errorCodeList.WX_GET_SETTING_FAIL},capability:o},kZegoTaskPublishStart:{event:"/sdk/api/publish_request",error:{kPublishStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPublishParamError:n.errorCodeList.PUBLISHER_PARAM,kPublishStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPublishStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPublishNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPublishDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPublishDispatchError:n.errorCodeList.DISPATCH_ERROR,kPublishNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPublishNoLoginError:n.errorCodeList.NOT_LOGIN,kPublishRetryTimeoutError:n.errorCodeList.PUBLISHER_RETRY_TIMEOUT,kIsPublishing:n.errorCodeList.PUBLISHER_IS_PUBLISHING},publishOption:o,stream:o,message:o},kZegoTaskPlayStart:{event:"/sdk/api/play_request",error:{kPlayStreamIDNullError:n.errorCodeList.STREAM_ID_NULL,kPlayParamError:n.errorCodeList.PLAYER_PARAM,kPlayStreamIDTooLongError:n.errorCodeList.STREAMID_TOO_LONG,kPlayStreamIDInvalidCharacterError:n.errorCodeList.STREAM_ID_INVALID_CHARACTER,kPlayNoLoginError:n.errorCodeList.NOT_LOGIN,kPlayRepeatedPullError:n.errorCodeList.REPEATED_PULL,kPlayNetworkTimeoutError:n.errorCodeList.TIMEOUT,kPlayDispatchTimeoutError:n.errorCodeList.DISPATCH_TIMEOUT,kPlayDispatchError:n.errorCodeList.DISPATCH_ERROR,kPlayNetworkBrokenError:n.errorCodeList.NETWORK_BROKEN,kPlayRetryTimeoutError:n.errorCodeList.PLAYER_RETRY_TIMEOUT,kIsPlaying:n.errorCodeList.PLAYER_IS_PLAYING,kPlayFailed:n.errorCodeList.PLAYER_PLAY_FAILED},playOption:o,message:o,session_id:o,stream:o,audio_activate:o,video_activate:o},kZegoEventPublishStat:"/sdk/publish_stat_report",kZegoEventPlayStat:"/sdk/play_stat_report",kZegoTaskRePublish:"/sdk/republish",kZegoTaskRePlay:"/sdk/replay",kZegoTaskPublishStop:{event:"/sdk/stop_publish",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o},kZegoTaskPlayStop:{event:"/sdk/stop_play",error:{kParamError:n.errorCodeList.PUBLISHER_PARAM},stream:o},kZegoTaskLiveRoomGetStreamUpdateInfo:{event:"/liveroom/get_stream_update_info",stream_update_type:o,update_stream:o},kZegoTaskLiveRoomGetStreamExtraInfo:{event:"/liveroom/get_stream_extra_info",update_stream:o}}},67:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientUtil=void 0;var n=r(887),o=r(335),s=function(){function e(){}return e.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},e.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("avertp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},e.registerCallback=function(e,t,r){t.success&&(r[e+"SuccessCallback"]=t.success),t.error&&(r[e+"ErrorCallback"]=t.error)},e.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},e.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},e.logReportCallback=function(t,r,n,o){e.registerCallback(t,{success:function(t,o){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];e.dataReportEvent(r,n,t,o,s)}},o)},e.actionLogReportCallback=function(t,r,n,o,s){e.actionSuccessCallback(t,r)&&e.actionSuccessCallback(t,r)(n,o)},e.getServerError=function(e,t,r){if(t)return{code:e,message:r||"liveroom error"};var n={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",1013:"token03 format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return{code:0,message:""};var o={code:0,message:"liveroom cmd error"};if(o.code=e,e>1e9){var s=n[e];o.message=s?"liveroom cmd error, code: "+e+", message: "+s:n[1e9]+e}else o.message=n[e]?n[e]+" code:"+e:"unknown error code:"+e;return o},e.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},e.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return e>1e9&&(r.code=e-1e9+52e6),t&&(r.message=t),r},e.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};if(t)return e>2e5&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR";return e>1e9?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},e.getKickoutError=function(e){var t={};switch(e){case 1:t.code=63000001,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:t.code=63000002,t.message="zpush manual kickout",t.name="MANUAL_KICKOUT";break;case 3:t.code=63000003,t.message="kickout reason = "+e;break;case 4:t.code=63000004,t.message="zpush multiple login kickout",t.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:t.code=63000005,t.message="zpush token expired",t.name="TOKEN_EXPIRED";break;default:t.code=e,t.message="kickout reason = "+e}return t},e.dataReportEvent=function(e,t,r,n,o){switch(r){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,o[0]);break;case"addEventMsg":e.addEventMsg(t,n,o[0],o[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,o[0])}},e.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},e.mergeStreamList=function(e,t,r,n){var o,s=[],i=[],a=[];r||(r=[]);for(var c=0;c<r.length;c++)if(r[c].anchor_id_name!=e&&r[c].id_name!=e&&r[c].user_id!=e){o=!1;for(var l=0;l<t.length;l++)if(r[c].stream_id===t[l].stream_id){r[c].extra_info!==t[l].extra_info&&a.push(r[c]),o=!0;break}o||s.push(r[c])}for(var u=0;u<t.length;u++){o=!1;for(var h=0;h<r.length;h++)if(t[u].stream_id===r[h].stream_id){o=!0;break}o||i.push(t[u])}t.splice(0);for(c=0;c<r.length;c++)t.push(r[c]);n(s,i,a)},e.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&e>=0:"number"==typeof e&&e%1==0&&e>0},e.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&e>=t&&e<=r},e.uuid=function(e,t){var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{var s=void 0;for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(s=0|16*Math.random(),o[r]=n[19==r?3&s|8:s])}return o.join("")},e.getDevices=function(e,t){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then((function(t){for(var r=[],n=[],o=[],s=0;s<t.length;s++){var i=t[s];"audioinput"===i.kind&&r.push({deviceName:i.label,deviceID:i.deviceId}),"audiooutput"===i.kind&&n.push({deviceName:i.label,deviceID:i.deviceId}),"videoinput"===i.kind&&o.push({deviceName:i.label,deviceID:i.deviceId})}e&&e({microphones:r,speakers:n,cameras:o})})).catch((function(e){console.error("enumerate devices wrong "+e),t&&t(o.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kEnumDevicesError)})):t&&t(o.ZegoRTCLogEvent.kZegoTaskEnumDevices.error.kBrowserNotSupportError)},e.getPublisherStateType=function(e){return 0==e||1==e?0==e?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"},e.getPlayerStateType=function(e){return 0==e||1==e?0==e?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"},e.getSteamUpdateType=function(e){return 0==e?"DELETE":"ADD"},e.checkScreenParams=function(t,r){if("object"==typeof t&&void 0!==t.videoQuality&&!e.checkInteger(t.videoQuality))return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," videoQuality must be integer number"),!1;if("object"==typeof t&&void 0!==t.sourceID&&"string"!=typeof t.sourceID)return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," sourceID must be string"),!1;if("object"==typeof t&&4===t.videoQuality){if(!e.checkCameraOrScreenBitRate(t.bitRate,r))return!1;if(!e.checkParamsWithConstraintExtend(t,r))return!1}return!0},e.checkParamsWithConstraintExtend=function(t,r){for(var n=0,s=["frameRate","width","height"];n<s.length;n++){var i=s[n],a=t[i];if(void 0===a)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," is required when videoQuality is 4")),!1;if("number"==typeof a&&!e.checkInteger(a,!1))return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," must be integer number")),!1;if("number"==typeof a&&("width"===i||"height"===i)&&a<0)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," must greater than 0.")),!1;if("number"==typeof a&&"width"===i&&a>7680)r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," cannot greater than 7680."));else if("number"==typeof a&&"height"===i&&a>4320)r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," cannot greater than 4320."));else if("object"==typeof a){if("width"===i&&!e.checkConstraintExtend(a,i,r,0,7680))return!1;if("height"===i&&!e.checkConstraintExtend(a,i,r,0,4320))return!1;if("frameRate"===i&&!e.checkConstraintExtend(a,i,r))return!1}else if("number"!=typeof a&&"object"!=typeof a)return r&&r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," ".concat(i," must be number or object")),!1}return!0},e.checkConstraintExtendWithMessage=function(t,r,n,o){if("object"!=typeof t)return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(0===Object.keys(t).length)return{result:!1,message:"".concat(r," can not be a empty object")};for(var s=0,i=["exact","ideal","max","min"];s<i.length;s++){var a=i[s],c=t[a];if("number"==typeof c&&!e.checkInteger(c,!1))return{result:!1,message:" ".concat(a," of ").concat(r," must be integer number")};if("number"==typeof n&&"number"==typeof c&&c<n)return{result:!1,message:" ".concat(a," of ").concat(r," must greater than ").concat(n)};if("number"==typeof o&&"number"==typeof c&&c>o)return{result:!1,message:" ".concat(a," of ").concat(r," cannot greater than ").concat(o)}}return{result:!0,message:"Constraint Extend OK."}},e.checkConstraintExtend=function(t,r,n,s,i){var a=e.checkConstraintExtendWithMessage(t,r,s,i);return a.result||n&&n(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError,a.message),a.result},e.checkBitRateLimit=function(e,t){return!(e>10240)||(t(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate cannot greater than 10 Mbps"),!1)},e.checkCameraOrScreenBitRate=function(t,r){if(void 0===t)return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate is required when videoQuality is 4"),!1;if("number"==typeof t){if(!e.checkValidNumber(t))return r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be integer number"),!1;if(!e.checkBitRateLimit(t,r))return!1}else r(o.ZegoRTCLogEvent.kZegoTaskCreateStream.error.kParamError," bitrate must be number");return!0},e.checkCameraParams=function(t,r){return!!e.checkParamsWithConstraintExtend(t,r)&&!!e.checkCameraOrScreenBitRate(t.bitRate,r)},e.isParamEmpty=function(e){return null!=e&&""!==e},e.isTypeString=function(e){return"string"==typeof e},e.isTooLong=function(e,t){return!(e.length>=t)},e.isReDispatch=function(e){var t=e.message.match(/action:(\d+)/),r=t?Number(t[1]):NaN;return[o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kTTLOverTimeError,o.ZegoRTCLogEvent.kZegoTaskPlayStart.error.kClientIPChangedError,o.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kTTLOverTimeError,o.ZegoRTCLogEvent.kZegoTaskPublishStart.error.kClientIPChangedError].includes(e)||[6].includes(r)},e.arrAvg=function(e,t,r){return e.push(t),e.length>r&&e.shift(),e.reduce((function(e,t){return e+t}))/e.length},e.getNetQuality=function(e,t,r){if(void 0!==r){return.15*this.calcQualityOfJitter(r)+.85*Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!1))}return Math.min(this.calcQualityOfRtt(e),this.calcQualityOfLostRate(t,!0))},e.calcQualityOfRtt=function(e){return e<600?97-Math.pow(.09*e,1.1):18*Math.exp(.002*(600-e))},e.calcQualityOfJitter=function(e){return e<=50?98-Math.pow(e,1.15):n.QUALITY_CONSTANT.PoorMinQuality},e.calcQualityOfLostRate=function(e,t){if(t){return e<=55?99-Math.pow(.8*e,1.18):n.QUALITY_CONSTANT.PoorMinQuality}var r=100*e;return r<=40?96-Math.pow(r,1.22):n.QUALITY_CONSTANT.PoorMinQuality},e.quality2QualityGrade=function(e){return e>=n.QUALITY_CONSTANT.ExcellentMinQuality?n.QualityGrade.Excellent:e>=n.QUALITY_CONSTANT.GoodMinQuality?n.QualityGrade.Good:e>=n.QUALITY_CONSTANT.MiddleMinQuality?n.QualityGrade.Middle:e>=n.QUALITY_CONSTANT.PoorMinQuality?n.QualityGrade.Poor:n.QualityGrade.Die},e.checkAudioTrackIsActive=function(e){return!!e.enabled},e.checkVideoTrackIsActive=function(e){return!!e.enabled},e.isSupportEncodedTransforms=function(){var e=!!window.RTCRtpScriptTransform;if(!e){var t=!!RTCRtpSender.prototype.createEncodedStreams,r=!1;try{new ReadableStream;r=!0}catch(e){console.error("Transferable streams are not supported.")}e=t&&r}return e},e.uint8arrayToBase64=function(e){for(var t,r=0,n=e.length,o="";r<n;)t=e.subarray(r,Math.min(r+32768,n)),o+=String.fromCharCode.apply(null,Array.from(t)),r+=32768;return btoa(o)},e}();t.ClientUtil=s},546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportLive=void 0;t.isSupportLive=function(e,t){var r="当前微信版本过低，无法使用相关组件",n="需要摄像头和录音功能的授权",o=wx.getSystemInfoSync().SDKVersion,s={code:0,msg:""};(function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;n<r;n++){var o=parseInt(e[n]),s=parseInt(t[n]);if(o>s)return 1;if(o<s)return-1}return 0})(o,"1.7.0")<0&&(s={code:10001,msg:r},e&&e(s)),wx.getSetting({success:function(t){var r=t.authSetting;r["scope.camera"]&&r["scope.record"]||(s={code:10002,msg:n}),e&&e(s)},fail:function(e){console.error("get setting error",e),t&&t(e)}})}},875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWechatMini=void 0;var n=r(824),o=r(399),s=r(887),i=r(199),a=r(438),c=r(911),l=r(856),u=r(788),h=function(){function e(e,t,r,n){void 0===n&&(n=1),this.logger=e,this.dataReport=t,this.RTM=r,this.stateCenter=new o.StateCenter(this.logger,this.dataReport),this.stateCenter.clientType="wxMini",this.streamCenter=new u.ZegoStreamCenterWechat(this.logger,this.stateCenter,this.dataReport),this.wechatMiniModules=new i.WechatMiniModules(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.RTM)}return e.prototype.checkSystemRequirements=function(){return this.wechatMiniModules.checkSystemRequirements()},e.prototype.getVersion=function(){return s.PROTO_VERSION},e.prototype.on=function(e,t){return this.wechatMiniModules.bindListener(e,t)},e.prototype.off=function(e,t){return this.wechatMiniModules.deleteListener(e,t)},e.prototype.startPublishingStream=function(e,t){return this.wechatMiniModules.publishModule.startPublishingStream(e,t)},e.prototype.stopPublishingStream=function(e){return this.wechatMiniModules.publishModule.stopPublishingStream(e)},e.prototype.getNextUrl=function(e){return this.wechatMiniModules.getNextUrl(e)},e.prototype.setCustomSignalUrl=function(e,t){if(void 0===t&&(t=!0),this.logger.info(n.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" call: "+JSON.stringify(e)),!e||0==e.length)return this.logger.error(n.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" param error"),!1;var r=!0;return e.forEach((function(e){return 0!=e.indexOf("rtmp://")&&(r=!1)})),r?(t?this.stateCenter.customUrl=e:this.stateCenter.customPlayUrl=e,!0):(this.logger.error(n.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" url is not correct"),!1)},e.prototype.addPublishCdnUrl=function(e,t){var r;this.logger.info(n.ZEGO_WECHATMINI_ACTION.ADD_PUBLISH_CDN_URL+" call "+e+" "+t);var o=null===(r=this.wechatMiniModules.streamCenter.publisherList[e])||void 0===r?void 0:r.room;return new Promise((function(r,n){o.streamHandler._publishTarget({type:"addpush",streamID:e,pushUrl:t},r,n)}))},e.prototype.removePublishCdnUrl=function(e,t){return this.logger.info(n.ZEGO_WECHATMINI_ACTION.REMOVE_PUBLISH_CDN_URL+" call "+e+" "+t),this.wechatMiniModules.streamCommonModule?this.wechatMiniModules.streamCommonModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):new Promise((function(e,t){console.error("should install advanced module"),e({errorCode:-1,extendedData:"should install advanced module"})}))},e.prototype.startMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setMixerTaskConfig=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.stopMixerTask=function(e){return new Promise((function(e,t){console.error("未引入混流模块"),t()}))},e.prototype.setStreamExtraInfo=function(e,t){return new Promise((function(e,t){console.error("should use advanced module first"),t()}))},e.prototype.startPlayingStream=function(e,t){return this.wechatMiniModules.playModule.startPlayingStream(e,t)},e.prototype.stopPlayingStream=function(e){this.wechatMiniModules.playModule.stopPlayingStream(e)},e.prototype.updatePlayerState=function(e,t){this.wechatMiniModules.updatePlayerState(e,t)},e.prototype.updatePlayerNetStatus=function(e,t){this.wechatMiniModules.updatePlayerNetStatus(e,t)},e.use=function(t){switch(t.type){case"MixStream":t.install(e,l.StreamHandler,i.WechatMiniModules);break;case"StreamCommon":t.install(e,i.WechatMiniModules,l.StreamHandler)}},e.prototype.updateAudioVolumeNotify=function(e,t){this.wechatMiniModules.updateAudioVolumeNotify(e,t)},e.prototype.initContext=function(e){e.wxContext&&(this.wxContext=e.wxContext),e.pushAtr&&(this.pushAtr=e.pushAtr),e.playAtr&&(this.playAtr=e.playAtr)},e.prototype.createPusher=function(e){return this.logger.info("zw.cp call"),this.wxContext&&this.wxContext.setData&&this.pushAtr?(this.wechatMiniModules.streamCenter.pusherInstance||(this.wechatMiniModules.streamCenter.pusherInstance=new a.LivePusher(this.wxContext,this.pushAtr,this,e)),this.logger.info("zw.cp call success"),this.wechatMiniModules.streamCenter.pusherInstance):(this.logger.error("zw.cp init context wrong"),null)},e.prototype.setPusherAttributes=function(e,t){var r;this.logger.info("zw.spa.0 call"),this.wechatMiniModules.streamCenter.pusherInstance?(null===(r=this.wechatMiniModules.streamCenter.pusherInstance)||void 0===r||r.setPusherAttributes(e,t),this.logger.info("zw.spa.0 call success")):this.logger.error("zw.spa.0 publisher no found")},e.prototype.setPlayerAttributes=function(e,t,r){if(this.logger.info("zw.spa.1 call"),"string"==typeof e&&"string"==typeof this.playAtr){var n=this.wechatMiniModules.streamCenter.livePlayerList.find((function(t){return t.attributes.id==e}));n?(n.setPlayerAttributes(t,r),this.logger.info("zw.spa.1 call success")):this.logger.error("zw.spa.1 player no found")}else this.logger.error("zw.spa.1 stream no found")},e.prototype.getPusherInstance=function(){return this.wechatMiniModules.streamCenter.pusherInstance?this.wechatMiniModules.streamCenter.pusherInstance:null},e.prototype.getPlayerInstance=function(e,t){if(this.logger.info("zw.gpi call"),"string"!=typeof e||"string"!=typeof this.playAtr)return this.logger.error("zw.gpi param error"),null;var r=this.wechatMiniModules.streamCenter.livePlayerList.find((function(t){return t.attributes.id==e}));return t&&(this.wechatMiniModules.streamCenter.playerContextMap[e]=t),r||(r=new c.LivePlayer(this.wxContext,e,this,this.wechatMiniModules.streamCenter.playerContextMap[e]),this.wechatMiniModules.streamCenter.livePlayerList.push(r)),this.setPlayData(),this.logger.info("zw.gpi call success"),r},e.prototype.getPlayerList=function(e){if(this.logger.info("zw.gpl call"),void 0!==e&&"string"!=typeof e||"string"!=typeof this.playAtr)return this.logger.error("zw.gpl param error"),[];if(e){var t=this.wechatMiniModules.streamCenter.livePlayerList.find((function(t){return t.attributes.id==e}));return t?[t.attributes]:[]}return this.logger.info("zw.gpl call success"),this.wechatMiniModules.streamCenter.livePlayerList.map((function(e){return e.attributes}))},e.prototype.mutePublishStreamVideo=function(e){this.setPusherAttributes({enableCamera:e})},e.prototype.mutePublishStreamAudio=function(e){this.setPusherAttributes({enableMic:e})},e.prototype.mutePlayStreamVideo=function(e,t){this.setPlayerAttributes(e,{muteVideo:t})},e.prototype.mutePlayStreamAudio=function(e,t){this.setPlayerAttributes(e,{muteAudio:t})},e.prototype.setPlayData=function(e){if(this.logger.info("zw.spd call"),this.wxContext&&this.playAtr){void 0!==e&&"function"!=typeof e&&this.logger.error("zw.spd callBack is not function");var t={};t[this.playAtr]=this.wechatMiniModules.streamCenter.livePlayerList.map((function(e){return e.attributes})),this.wxContext.setData(t,e),this.logger.info("zw.spd call success")}else this.logger.error("zw.spd init context wrong")},e}();t.ZegoWechatMini=h},199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WechatMiniModules=void 0;var n=r(856),o=r(478),s=r(800),i=r(887),a=r(335),c=r(67),l=r(824),u=r(546),h=function(){function e(e,t,r,n,a){this.logger=e,this.dataReport=t,this.stateCenter=r,this.rtm=a,this.currentPlaySourceType=i.ENUM_DISPATCH_TYPE.cdn,this.mixStreamList={},this.ultraPlaySourceType="rtmp_v2",this.streamCenter=n,this.publishModule=new o.PublishModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.playModule=new s.PlayModule(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.rtm),this.init(),this.initStreamCommon()}return e.prototype.init=function(){this.bindRTMListener(),this.bindStreamCenterHandler()},e.prototype.initStreamCommon=function(){},e.prototype.bindRTMListener=function(){var e=this;this.rtm._on("roomLoginResponse",(function(t){e.logger.info("zc.rlr call "+JSON.stringify(t));var r=t.header.room_id;e.stateCenter.appid=e.rtm.getAppID(),e.stateCenter.idName=e.rtm.getUserID(),e.stateCenter.testEnvironment=e.rtm.isTestEnvironment(),e.stateCenter.isMultiRoom=e.rtm.getMultiRoom();var o=e.rtm.getToken(r),s=e.rtm.getSessionId(r),i=e.rtm.getRoomSessionID(r),a=e.stateCenter.getRoomByRoomID(r);if(!a){var c=new n.StreamHandler(e.logger,e.stateCenter,e.rtm,e.streamCenter,r);e.bindStreamHandler(c),e.stateCenter.roomList.push(a={roomID:r,streamHandler:c,sessionID:s,roomSessionID:i,token:o,isResetRoom:!1,streamList:[],streamInfoList:[]}),c.handleStreamStart(t,a)}a.sessionID=s,a.roomSessionID=i,a.token=a.token,e.logger.info("zc.rlr end "+r)})),this.rtm._on("_roomLogin",(function(t,r){e.stateCenter.useNetAgent=e.rtm.getUseNetAgent()})),this.rtm._on("HBResponse",(function(t){var r,n=null===(r=null==t?void 0:t.header)||void 0===r?void 0:r.room_id,o=e.stateCenter.getRoomByRoomID(n);null==o||o.streamHandler.patchStreamList(t)})),this.rtm._on("_roomStateUpdate",(function(t,r,n,o){if("DISCONNECTED"==r){e.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_BIND_RTM_LISTENER+" _roomStateUpdate "+t+" disconnected "+(n?n+" ":"")+(o||""));var s=e.stateCenter.getRoomByRoomID(t);if(s){var i=e.stateCenter.roomList.findIndex((function(e){return e.roomID==t}));s.isResetRoom=!0,s.streamHandler.reset(),e.streamCenter.reset(t,n),e.stateCenter.roomList.splice(i,1)}}else e.logger.info("zc.rsu "+t+" state: "+r)})),this.rtm.service.on("stream",(function(t){var r,n=(null===(r=null==t?void 0:t.header)||void 0===r?void 0:r.room_id)||"",o=e.stateCenter.getRoomByRoomID(n);o?o.streamHandler.handleStreamUpdateRsp(t):e.logger.error(l.ZEGO_WECHATMINI_ACTION.ON_STREAM+" room no found")})),this.rtm.service.on("push_stream_update",(function(t){var r,n=(null===(r=null==t?void 0:t.header)||void 0===r?void 0:r.room_id)||"",o=e.stateCenter.getRoomByRoomID(n);o?o.streamHandler.handlePushStreamUpdateMsg(t):e.logger.error(l.ZEGO_WECHATMINI_ACTION.ON_PUSH_STREAM_UPDATE+" room no found")})),this.rtm.service.on("zegochat_js.push_room_stream_update_req",(function(t){var r,n=(null===(r=null==t?void 0:t.header)||void 0===r?void 0:r.room_id)||"",o=e.stateCenter.getRoomByRoomID(n);o?o.streamHandler.handlePriPushStreamUpdateMsg(t):e.logger.error(l.ZEGO_WECHATMINI_ACTION.ON_STREAM+" room no found")}))},e.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(e,r,n){var o=n.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}})),s=(0,i.getReportSeq)();if(t.dataReport.newReport(s,a.ZegoWechatLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.event),t.dataReport.addMsgInfo(s,{stream_update_type:a.ZegoWechatLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.stream_update_type(1===r?"added":"deleted"),update_stream:a.ZegoWechatLogEvent.kZegoTaskLiveRoomGetStreamUpdateInfo.update_stream(n)}),t.dataReport.uploadReport(s),t.stateCenter.actionListener("roomStreamUpdate",e,c.ClientUtil.getSteamUpdateType(r),o),1===r){var l=[];o.forEach((function(e){e.extraInfo&&l.push({streamID:e.streamID,user:e.user,extraInfo:e.extraInfo})})),l.length>0&&t.stateCenter.actionListener("streamExtraInfoUpdate",e,l)}},e.onPublishStateUpdate=function(e,r,n){t.logger.info(l.ZEGO_WECHATMINI_ACTION.ON_PUBLISH_STATE_UPDATE+" "+r);var o=t.stateCenter.reportSeqList.startPublish[r];t.streamCenter.publishingList[r]&&(0==e||1==e)&&o&&(t.dataReport.eventEndWithMsgInfo(o,"PublishState",{type:e}),1==e&&t.dataReport.addMsgInfo(o,n),t.dataReport.uploadReport(o),1012===n.code&&t.streamCenter.stopPublishingStream(r),delete t.stateCenter.reportSeqList.startPublish[r]),t.stateCenter.actionListener("publisherStateUpdate",{state:c.ClientUtil.getPublisherStateType(e),streamID:r,errorCode:n.code,extendedData:n.message})},e.onStreamExtraInfoUpdated=function(e,r){var n=r.map((function(e){return{streamID:e.streamID,user:e.user,extraInfo:e.extraInfo}})),o=(0,i.getReportSeq)();t.dataReport.newReport(o,a.ZegoWechatLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.event),t.dataReport.addMsgInfo(o,{update_stream:a.ZegoWechatLogEvent.kZegoTaskLiveRoomGetStreamExtraInfo.update_stream(n)}),t.dataReport.uploadReport(o),t.stateCenter.actionListener("streamExtraInfoUpdate",e,n)}},e.prototype.bindStreamCenterHandler=function(){var e=this;this.streamCenter.onPlayStateUpdate=function(t,r,n){var o=e.stateCenter.reportSeqList.startPlay[r];e.streamCenter.playingList.find((function(e){return e.streamID===r}))&&(0==t||1==t)&&o&&(e.dataReport.eventEndWithMsgInfo(o,"PlayState",{type:t}),1==t&&n&&e.dataReport.addMsgInfo(o,n),e.dataReport.uploadReport(o),delete e.stateCenter.reportSeqList.startPlay[r]),e.stateCenter.actionListener("playerStateUpdate",{state:c.ClientUtil.getPlayerStateType(t),streamID:r,errorCode:n&&n.code,extendedData:n&&n.message}),1===t&&(e.streamCenter.playErrorCallBackList[r]&&(e.streamCenter.playErrorCallBackList[r](n),delete e.streamCenter.playErrorCallBackList[r]),e.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_BIND_STREAM_CENTER_HANDLER+" stop play called by sdk"))},this.streamCenter.onPublishStateUpdate=function(t,r,n){e.onPublishStateUpdateHandle(t,r,n)},this.streamCenter.onPublishQualityUpdate=function(t,r){e.stateCenter.actionListener("publishQualityUpdate",t,r)},this.streamCenter.onPlayQualityUpdate=function(t,r){e.stateCenter.actionListener("playQualityUpdate",t,r)}},e.prototype.onPublishStateUpdateHandle=function(e,t,r){var n=this;this.logger.info(l.ZEGO_WECHATMINI_ACTION.ON_PUBLISH_STATE_UPDATE_HANDLE+" call");var o=this.streamCenter.publisherList[t].room;o?0==e?this.stateCenter.publishStreamList[t]&&(this.stateCenter.publishStreamList[t].state!=i.ENUM_PUBLISH_STREAM_STATE.tryPublish||o.streamList.find((function(e){return e.stream_id==t&&e.id_name===n.stateCenter.idName}))?(this.stateCenter.publishStreamList[t].state=i.ENUM_PUBLISH_STREAM_STATE.publishing,o.streamHandler.onPublishStateUpdate(e,t,r),this.dataReport.uploadReport(this.stateCenter.reportSeqList.startPublish[t]),delete this.stateCenter.reportSeqList.startPublish[t],c.ClientUtil.unregisterCallback("kZegoTaskPublishStart"+t,this.stateCenter.reportList)):(this.stateCenter.publishStreamList[t].state=i.ENUM_PUBLISH_STREAM_STATE.update_info,o.streamHandler.updateStreamInfo(t,i.ENUM_STREAM_SUB_CMD.liveBegin,this.stateCenter.publishStreamList[t].extra_info,(function(e){})),this.dataReport.uploadReport(this.stateCenter.reportSeqList.startPublish[t]),delete this.stateCenter.reportSeqList.startPublish[t],c.ClientUtil.unregisterCallback("kZegoTaskPublishStart"+t,this.stateCenter.reportList))):(o.streamHandler.onPublishStateUpdate(e,t,r),1==e&&(this.logger.info(l.ZEGO_WECHATMINI_ACTION.ON_PUBLISH_STATE_UPDATE_HANDLE+" stop publish called by sdk"),this.publishModule.stopPublishingStream(t))):this.logger.error("zc.opsuh.0 room not exist")},e.prototype.bindListener=function(e,t){return this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_BIND_LISTENER+" call"),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_BIND_LISTENER+" listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_BIND_LISTENER+" event "+e+" no found"),!1)},e.prototype.deleteListener=function(e,t){if(this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_DELETE_LISTENER+" call"),!this.stateCenter.listenerList[e])return this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_DELETE_LISTENER+" listener no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},e.prototype.checkSystemRequirements=function(){var e=this;return new Promise((function(t,r){var n=(0,i.getReportSeq)();e.dataReport.newReport(n,a.ZegoWechatLogEvent.kZegoTaskCheckSystemRequirements.event);(0,u.isSupportLive)((function(r){e.dataReport.addMsgInfo(n,{check_system:r}),e.dataReport.uploadReport(n),t(r)}),(function(t){e.dataReport.addMsgInfo(n,a.ZegoWechatLogEvent.kZegoTaskCheckSystemRequirements.error.kCheckSystemGetSettingFailError),e.dataReport.uploadReport(n),r(t)}))}))},e.prototype.updatePlayerState=function(e,t){this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_UPDATE_PLAYER_STATE+" call "+e),this.streamCenter.updatePlayerState(e,t)},e.prototype.updatePlayerNetStatus=function(e,t){this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_UPDATE_PLAYER_NET_STATUS+" call "+e),this.streamCenter.updatePlayerNetStatus(e,t)},e.prototype.updateAudioVolumeNotify=function(e,t){this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_UPDATE_PLAYER_VOLUME_NOTIFY+" call "+e),this.streamCenter.updateAudioVolumeNotify(e,t)},e.prototype.getNextUrl=function(e){return"string"!=typeof e||""==e?(this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_GET_NEXT_URL+" stream ID must be string and not empty"),""):this.streamCenter.getNextUrl(e)},e.prototype.setCustomSignalUrl=function(e,t){if(void 0===t&&(t=!0),this.logger.info(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" call: "+JSON.stringify(e)),!e||0==e.length)return this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" param error"),!1;var r=!0;e.forEach((function(e){return 0!=e.indexOf("rtmp://")&&(r=!1)})),r?t?this.stateCenter.customUrl=e:this.stateCenter.customPlayUrl=e:this.logger.error(l.ZEGO_WECHATMINI_ACTION.WECHATMINI_SET_CUSTOM_SIGNAL_URL+" url is not correct")},e}();t.WechatMiniModules=h},800:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayModule=void 0;var o=r(887),s=r(335),i=r(67),a=r(824),c=function(){function e(e,t,r,n,s){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.rtm=s,this.mixStreamList={},this.preferPlaySourceType=o.ENUM_PLAY_SOURCE_TYPE.ultra,this.ultraPlaySourceType="rtmp_v2"}return e.prototype.startPlayingStream=function(e,t){var r=this;return new Promise((function(c,l){r.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM+" call "+e);var u=(0,o.getReportSeq)();r.stateCenter.reportSeqList.startPlay[e]=u,r.dataReport.newReport(u,s.ZegoWechatLogEvent.kZegoTaskPlayStart.event);var h=function(t,o){r.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM+" "+(o||t.message)),r.dataReport.uploadReport(u,void 0,t,o),delete r.stateCenter.reportSeqList.startPlay[e],l(n(n({},t),{errorCode:t.code,extendedData:t.message+(o?" "+o:"")}))};if(i.ClientUtil.isParamEmpty(e))if(i.ClientUtil.isTypeString(e))if(i.ClientUtil.isTooLong(e,o.MAX_STREAM_ID_LENGTH))if(i.ClientUtil.checkIllegalCharacters(e)){if(r.stateCenter.customPlayUrl&&0!=r.stateCenter.customPlayUrl.length){var p=r.streamCenter.updatePlayingState(e,t?t.streamParams:void 0,!0);if(!0!==p){var _=JSON.parse(JSON.stringify(p));return void h(_,"cannot start play")}return r.streamCenter.playErrorCallBackList[e]=function(e){h(e)},r.streamCenter.startPlayingStream(e,r.stateCenter.customPlayUrl,1)}if(r.rtm.service.isDisConnect())h(s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError);else{var d=r.streamCenter.updatePlayingState(e,t?t.streamParams:void 0,!0);if(!0===d){if(r.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.retry,e,{code:0,message:""}),i.ClientUtil.logReportCallback("kZegoTaskPlayStart"+e,r.dataReport,u,r.stateCenter.reportList),r.dataReport.addMsgInfo(u,{stream:s.ZegoWechatLogEvent.kZegoTaskPlayStart.stream(e),playOption:s.ZegoWechatLogEvent.kZegoTaskPlayStart.playOption(t),mini_systemInfos:r.streamCenter.systemInfo}),r.streamCenter.playSuccessCallBackList[e]=function(e,t){i.ClientUtil.actionLogReportCallback("kZegoTaskPlayStart"+e,r.stateCenter.reportList,o.REPORT_ACTION.eventEnd,"get_play_url"),c({streamID:e,url:t})},r.streamCenter.playErrorCallBackList[e]=function(t){i.ClientUtil.actionLogReportCallback("kZegoTaskPlayStart"+e,r.stateCenter.reportList,o.REPORT_ACTION.eventEnd,"get_play_url"),h(t)},t&&t.isMix)return r.mixStreamList[e]={ultra_url_rtmp:null},void r.fetchPlayStreamUrl(e,"rtmp_cdn",o.ENUM_DISPATCH_TYPE.cdn);i.ClientUtil.actionLogReportCallback("kZegoTaskPlayStart"+e,r.stateCenter.reportList,o.REPORT_ACTION.eventStart,"get_play_url"),t&&"CDN"==t.sourceType||r.preferPlaySourceType===o.ENUM_PLAY_SOURCE_TYPE.cdn?r.startPlayingStreamFromCDN(e):r.startPlayingStreamFromBGP(e)}else{_=JSON.parse(JSON.stringify(d));h(_)}}}else h(s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDInvalidCharacterError);else h(s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDTooLongError);else h(s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayParamError);else h(s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDNullError)}))},e.prototype.stopPlayingStream=function(e){this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_STOP_PLAYING_STREAM+" call "+e);var t=(0,o.getReportSeq)();if(this.dataReport.newReport(t,s.ZegoWechatLogEvent.kZegoTaskPlayStop.event),this.dataReport.addMsgInfo(t,{stream_id:e}),"string"!=typeof e||""==e)return this.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_STOP_PLAYING_STREAM+" stream ID must be string and not empty"),this.dataReport.addMsgInfo(t,s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayParamError),void this.dataReport.uploadReport(t);var r=this.streamCenter.playerList[e],n=r&&r.state!==o.ENUM_PLAYER_STATE.stop;for(var i in this.streamCenter.stopPlayingStream(e),n&&this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,e,{code:0,message:""}),this.stateCenter.streamUrlMap)if(this.stateCenter.streamUrlMap[i]===e){delete this.stateCenter.streamUrlMap[i];break}this.mixStreamList[e]&&delete this.mixStreamList[e],this.dataReport.uploadReport(t),this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_STOP_PLAYING_STREAM+" call success")},e.prototype.startPlayingStreamFromCDN=function(e){this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN+" call "+e);var t=this.stateCenter.getPlayRoom(e)||this.stateCenter.roomList[0];if(t){for(var r=null,n=0;n<t.streamList.length;n++)if(t.streamList[n].stream_id===e){r=t.streamList[n].urls_rtmp||[];break}return!r||r.length<=0?(this.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN+" cannot find stream url,Please check if CDN is configured "),this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,e,s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError),!1):(this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN+" play stream"),this.doPlayStream(e,r,o.ENUM_DISPATCH_TYPE.cdn))}this.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM_FROM_CDN+" room no found")},e.prototype.startPlayingStreamFromBGP=function(e){return this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_START_PLAYING_STREAM_FROM_BGP+" fetch stream url"),this.fetchPlayStreamUrl(e,this.ultraPlaySourceType,o.ENUM_DISPATCH_TYPE.ultra),!0},e.prototype.doPlayStream=function(e,t,r){return this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_DO_PLAY_STREAM+" call"),this.streamCenter.startPlayingStream(e,t,r),!0},e.prototype.fetchPlayStreamUrl=function(e,t,r){var n=this;if(this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_FETCH_PLAY_STREAM_URL+" call "+e),this.rtm.service.isDisConnect())this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_FETCH_PLAY_STREAM_URL+" state error");else{this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_FETCH_PLAY_STREAM_URL+" send fetch request");var i=this.rtm.service.sendMessage("stream_url",{stream_ids:[e],url_type:t},(function(e){n.handleFetchStreamUrlRsp(e,r)}),(function(e){n.stateCenter.streamUrlMap[i]?n.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,n.stateCenter.streamUrlMap[i],s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError):n.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_FETCH_PLAY_STREAM_URL+" already stop play")}));-1!==i&&(this.stateCenter.streamUrlMap[i]=e,this.streamCenter.playerList[e]&&(this.streamCenter.playerList[e].seq=i)),this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_FETCH_PLAY_STREAM_URL+" call success")}},e.prototype.handleFetchStreamUrlRsp=function(e,t){var r,n;this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+" call ");var i=this.stateCenter.streamUrlMap[e.header.seq];i&&delete this.stateCenter.streamUrlMap[e.header.seq];var c=null===(r=e.body)||void 0===r?void 0:r.err_code;if(0!==c)return this.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+" server error= "+c),void this.streamCenter.onPlayStateUpdate(o.ENUM_PLAY_STATE_UPDATE.error,i,s.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayDispatchError);var l="",u=[];e.body.stream_url_infos&&e.body.stream_url_infos.length>0&&(l=e.body.stream_url_infos[0].stream_id,u=e.body.stream_url_infos[0].urls_ws);var h=!1,p=this.stateCenter.getRoomByRoomID(null===(n=null==e?void 0:e.header)||void 0===n?void 0:n.room_id);if(p)if(e.header.seq===this.streamCenter.playerList[l].seq){for(var _=0;_<p.streamList.length;_++)if(p.streamList[_].stream_id==l){p.streamList[_].urltra_url_rtmp=u,h=!0;break}!h&&this.mixStreamList[l]&&(this.mixStreamList[l].urltra_url_rtmp=u,t=o.ENUM_DISPATCH_TYPE.cdn,h=!0),h||(this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+"cannot find streamInfo in existing stream list"),p.streamList.push({stream_id:l,urltra_url_rtmp:u})),this.doPlayStream(l,u,t),this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+" call success")}else this.logger.info(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+" seq is not match, ignore "+l);else this.logger.error(a.ZEGO_WECHATMINI_ACTION.PLAYMODULE_HANDLE_FETCH_STREAM_URL_RSP+" room no found")},e.prototype.setPreferPlaySourceType=function(e){return this.logger.info(a.ZEGO_WECHATMINI_ACTION.WECHATMINI_SETPREFERPLAYSOURCETYPE+" call"),e!==o.ENUM_PLAY_SOURCE_TYPE.cdn&&e!==o.ENUM_PLAY_SOURCE_TYPE.ultra?(this.logger.error(a.ZEGO_WECHATMINI_ACTION.WECHATMINI_SETPREFERPLAYSOURCETYPE+" sourceType can be number 0 or 1, which can be represented auto or ultra"),!1):(this.preferPlaySourceType=e,this.logger.info(a.ZEGO_WECHATMINI_ACTION.WECHATMINI_SETPREFERPLAYSOURCETYPE+" call success"),!0)},e}();t.PlayModule=c},911:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LivePlayer=void 0;var o=function(){function e(e,t,r,n){this.wxContext=e,this.streamID=t,this.zegoWechatMini=r,this.attributes={},this.isPlaying=!1,this.logger=this.zegoWechatMini.logger,this.attributes.id=t,this.context=wx.createLivePlayerContext(this.attributes.id,n||this.wxContext)}return e.prototype.setPlayerAttributes=function(e,t){this.logger.info("zw.p.1.spa call "+this.streamID+" "+JSON.stringify(e)),Object.assign(this.attributes,e),this.zegoWechatMini.setPlayData(t),this.logger.info("zw.p.1.spa call success "+this.streamID+" "+JSON.stringify(this.attributes))},e.prototype.play=function(e){return r(this,void 0,void 0,(function(){var t=this;return n(this,(function(o){return new Promise((function(o,s){return r(t,void 0,void 0,(function(){var t,r,i=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zegoWechatMini.startPlayingStream(this.streamID,e)];case 1:return t=n.sent().url,this.attributes.url=t,this.isPlaying=!0,this.zegoWechatMini.setPlayData(),this.context.play({success:function(){o(!0)},fail:function(){i.logger.error("zw.p.1.p.0 start play fail"),s()}}),[3,3];case 2:return r=n.sent(),this.logger.error("zw.p.1.p.0 start play catch fail "+JSON.stringify(r)),s(),[3,3];case 3:return[2]}}))}))})),[2]}))}))},e.prototype.stop=function(){var e=this;this.logger.info("zw.p.1.s call stop "+this.streamID),this.isPlaying?(this.context.stop(),this.zegoWechatMini.stopPlayingStream(this.streamID),this.zegoWechatMini.wechatMiniModules.streamCenter.livePlayerList=this.zegoWechatMini.wechatMiniModules.streamCenter.livePlayerList.filter((function(t){return t.streamID!==e.streamID})),this.isPlaying=!1,this.zegoWechatMini.setPlayData(),this.logger.info("zw.p.1.s call success")):this.logger.error("zw.p.1.s stream is not playing")},e.prototype.pause=function(e){this.logger.info("zw.p.1.p.1 pull pause call "+this.streamID);try{this.context.pause(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.p.1 pull pause success")},e.prototype.resume=function(e){this.logger.info("zw.p.1.r call "+this.streamID);try{this.context.resume(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.r call success")},e.prototype.mute=function(e){this.logger.info("zw.p.1.m mute call "+this.streamID);try{this.context.mute(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.m mute success")},e.prototype.requestFullScreen=function(e){this.logger.info("zw.p.1.rfs call "+this.streamID);try{this.context.requestFullScreen(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.rfs call success")},e.prototype.exitFullScreen=function(e){this.logger.info("zw.p.1.efs call "+this.streamID);try{this.context.exitFullScreen(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.efs call success")},e.prototype.requestPictureInPicture=function(e){this.logger.info("zw.p.1.rpip call "+this.streamID);try{this.context.requestPictureInPicture(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.rpip call success")},e.prototype.exitPictureInPicture=function(e){this.logger.info("zw.p.1.epip call "+this.streamID);try{this.context.exitPictureInPicture(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.epip call success")},e.prototype.snapshot=function(e){this.logger.info("zw.p.1.ss call "+this.streamID);try{this.context.snapshot(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.1.ss call success")},e}();t.LivePlayer=o},478:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishModule=void 0;var o=r(887),s=r(824),i=r(335),a=r(67),c=function(){function e(e,t,r,n,s){this.logger=e,this.dataReport=t,this.stateCenter=r,this.streamCenter=n,this.rtm=s,this.preferPublishSourceType=o.ENUM_DISPATCH_TYPE.ultra,this.ultraPlaySourceType="rtmp_v2"}return e.prototype.startPublishingStream=function(e,t){var r=this;return new Promise((function(c,l){r.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_START_PUBLISHING_STREAM+" call");var u=(0,o.getReportSeq)();r.stateCenter.reportSeqList.startPublish[e]=u,r.dataReport.newReport(u,i.ZegoWechatLogEvent.kZegoTaskPublishStart.event);var h=function(t,o){r.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_START_PUBLISHING_STREAM+" "+(o||t.message)),r.dataReport.uploadReport(u,void 0,t,o),delete r.stateCenter.reportSeqList.startPublish[e],l(n(n({},t),{errorCode:t.code,extendedData:t.message+(o?" "+o:"")}))};if(a.ClientUtil.isParamEmpty(e))if(a.ClientUtil.isTypeString(e)){if(!a.ClientUtil.isTooLong(e,o.MAX_STREAM_ID_LENGTH))return h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishStreamIDTooLongError),!1;if(!a.ClientUtil.checkIllegalCharacters(e))return h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishStreamIDInvalidCharacterError),!1;if(r.stateCenter.isMultiRoom&&(!t||"string"!=typeof t.roomID||""==t.roomID))return h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishParamError,"  roomID is need if set multi room"),!1;var p=(null==t?void 0:t.roomID)?t.roomID:r.stateCenter.roomList[0].roomID,_=r.stateCenter.getRoomByRoomID(p);if(r.dataReport.addMsgInfo(u,{publish_room_id:p}),_){if(r.stateCenter.customUrl&&0!=r.stateCenter.customUrl.length){r.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.waiting_url,extra_info:t&&t.extraInfo?t.extraInfo:null};var d=r.streamCenter.updatePublishingState(_,e,t&&t.streamParams?t.streamParams:void 0,!0);if(!0!==d){var f=JSON.parse(JSON.stringify(d));return void h(f,"cannot start publish")}return r.streamCenter.publishSuccessCallBackList[e]=function(e,t){c({streamID:e,url:t})},r.streamCenter.startPublishingStream(e,r.stateCenter.customUrl,1)}if(r.rtm.service.isDisConnect())h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishNoLoginError);else{var g=r.streamCenter.updatePublishingState(_,e,t&&t.streamParams?t.streamParams:void 0,!0);if(!0===g)a.ClientUtil.logReportCallback("kZegoTaskPublishStart"+e,r.dataReport,u,r.stateCenter.reportList),_.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""}),r.dataReport.addMsgInfo(u,{stream:i.ZegoWechatLogEvent.kZegoTaskPublishStart.stream(e),publishOption:i.ZegoWechatLogEvent.kZegoTaskPublishStart.publishOption(t),mini_systemInfos:r.streamCenter.systemInfo}),!t||"CDN"!=t.sourceType&&"BGP"!=t.sourceType||r.setPreferPublishSourceType(o.ENUM_SOURCE_TYPE[t.sourceType]),r.stateCenter.publishStreamList[e]={state:o.ENUM_PUBLISH_STREAM_STATE.waiting_url,extra_info:t&&t.extraInfo?t.extraInfo:null},r.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_START_PUBLISHING_STREAM+" fetch stream url"),a.ClientUtil.actionLogReportCallback("kZegoTaskPublishStart"+e,r.stateCenter.reportList,o.REPORT_ACTION.eventStart,"get_publish_url"),r.streamCenter.publishSuccessCallBackList[e]=function(e,t){a.ClientUtil.actionLogReportCallback("kZegoTaskPublishStart"+e,r.stateCenter.reportList,o.REPORT_ACTION.eventEnd,"get_publish_url"),c({streamID:e,url:t})},r.streamCenter.publishErrorCallBackList[e]=function(e){h(e)},r.fetchPublishStreamUrl(e,_);else{f=JSON.parse(JSON.stringify(g));h(f,"cannot start publish")}}}else h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishParamError,"room no found")}else h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishParamError);else h(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishStreamIDNullError)}))},e.prototype.setPreferPublishSourceType=function(e,t){return this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE+" call"),e!==o.ENUM_DISPATCH_TYPE.cdn&&e!==o.ENUM_DISPATCH_TYPE.ultra&&e!==o.ENUM_DISPATCH_TYPE.customUrl?(this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE+" sourceType only can be number 0 1 2"),!1):e!==o.ENUM_DISPATCH_TYPE.customUrl||"string"==typeof t&&""!=t?(this.preferPublishSourceType=e,this.customCdnUrl=t,this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE+" call success"),!0):(this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_SET_PREFER_PUBLISH_SOURCE_TYPE+" customUrl must be string and not empty"),!1)},e.prototype.fetchPublishStreamUrl=function(e,t){var r=this;this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL+" call"),this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL+" send fetch publish request");var n="";this.preferPublishSourceType==o.ENUM_DISPATCH_TYPE.cdn?n="cdn":this.preferPublishSourceType==o.ENUM_DISPATCH_TYPE.ultra&&(n="bgp");var a=this.rtm.service.sendMessage("stream_publish",{stream_id:e,url_type:this.ultraPlaySourceType,publish_type:n,header_kvs:[{key:"grpc-metadata-push",value:this.customCdnUrl||""}]},(function(e){r.handleFetchStreamPublishUrlRsp(e)}),(function(n,s){r.streamCenter.publishErrorCallBackList[e](i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),t.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),r.streamCenter.stopPublishingStream(e)}),void 0,{sessionID:t.sessionID,roomID:t.roomID,roomSessionID:t.roomSessionID});-1!==a&&(this.stateCenter.streamUrlMap[a]=e),this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_FETCH_PUBLISH_STREAM_URL+" call success")},e.prototype.handleFetchStreamPublishUrlRsp=function(e){var t,r;this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP+" call");var n=null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.room_id,a=this.stateCenter.getRoomByRoomID(n);if(a){var c=this.stateCenter.streamUrlMap[e.header.seq];c&&delete this.stateCenter.streamUrlMap[e.header.seq];var l=null===(r=e.body)||void 0===r?void 0:r.err_code;if(0!==l)return this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP+" server error= "+l),void(this.stateCenter.publishStreamList[c]&&(this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP+" liveRoom cmd error"),this.streamCenter.publishErrorCallBackList[c](i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),a.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,c,{code:i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError.code,message:"server error= "+l}),this.streamCenter.stopPublishingStream(c)));if(e.body.stream_url_info){var u,h=e.body.stream_url_info.stream_id;if(u=e.body.stream_url_info.urls_ws,!this.stateCenter.publishStreamList[h])return void this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP+" cannot find stream");this.stateCenter.publishStreamList[h].url_rtmp=u,this.stateCenter.publishStreamList[h].state=o.ENUM_PUBLISH_STREAM_STATE.tryPublish,this.doPublishStream(h,u,a)}}else this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_HANDLE_FETCH_STREAM_PUBLISH_URL_RSP+" room no found")},e.prototype.doPublishStream=function(e,t,r){return this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_DO_PUBLISH_STREAM+" call "+e+"streamUrl: "+t),!t||t.length<=0?(this.streamCenter.publishErrorCallBackList[e](i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),r.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishDispatchError),!1):(this.streamCenter.startPublishingStream(e,t,this.preferPublishSourceType),this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_DO_PUBLISH_STREAM+" call success"),!0)},e.prototype.stopPublishingStream=function(e){var t=this;this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_STOP_PUBLISHING_STREAM+" call "+e);var r=(0,o.getReportSeq)();this.dataReport.newReport(r,i.ZegoWechatLogEvent.kZegoTaskPublishStop.event),this.dataReport.addMsgInfo(r,{stream_id:e});var n=function(n,o){t.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_STOP_PUBLISHING_STREAM+" "+(o||n.message)),t.dataReport.uploadReport(r,void 0,n,o),delete t.stateCenter.reportSeqList.startPublish[e]};if(!a.ClientUtil.isParamEmpty(e))return n(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishStreamIDNullError),!1;if(!a.ClientUtil.isTypeString(e))return this.logger.error(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_STOP_PUBLISHING_STREAM+" room no found"),!1;var c=this.streamCenter.publisherList[e],l=null==c?void 0:c.room;if(!l)return n(i.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishParamError," room no found"),!1;if(c&&c.state!==o.ENUM_PLAYER_STATE.stop&&l.streamHandler.onPublishStateUpdate(o.ENUM_PUBLISH_STATE_UPDATE.error,e,{code:0,message:""}),this.streamCenter.stopPublishingStream(e),this.stateCenter.publishStreamList[e]){if(this.stateCenter.publishStreamList[e].state>=o.ENUM_PUBLISH_STREAM_STATE.update_info){l.streamHandler.updateStreamInfo(e,o.ENUM_STREAM_SUB_CMD.liveEnd);for(var u=0;u<l.streamList.length;u++)if(l.streamList[u].stream_id==e){l.streamList.splice(u--,1);break}}delete this.stateCenter.publishStreamList[e]}return this.stateCenter.streamUrlMap[e]&&delete this.stateCenter.streamUrlMap[e],this.dataReport.uploadReport(r),this.logger.info(s.ZEGO_WECHATMINI_ACTION.PUBLISHMODULE_STOP_PUBLISHING_STREAM+" call success"),!0},e}();t.PublishModule=c},438:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LivePusher=void 0;var o=function(){function e(e,t,r,n){this.wxContext=e,this.dataAtr=t,this.zegoWechatMini=r,this.defaultAttributes={enableCamera:!0,enableMic:!0},this.attributes={},this.isPublishing=!1,this.logger=this.zegoWechatMini.logger,this.context=wx.createLivePusherContext(),Object.assign(this.attributes,this.defaultAttributes),Object.assign(this.attributes,n)}return e.prototype.setWXData=function(e){if(this.wxContext&&this.dataAtr)if(void 0===e||"function"==typeof e){var t={};t[this.dataAtr]=this.attributes,this.wxContext.setData(t,e)}else this.logger.info("zw.p.0.swd callBack is not function");else this.logger.error("zw.p.0.swd context wrong")},e.prototype.iswxContext=function(){return!!this.wxContext},e.prototype.setPusherAttributes=function(e,t){this.logger.info("zw.p.0.spa call "+JSON.stringify(e)),Object.assign(this.attributes,e),this.setWXData(t),this.logger.info("zw.p.0.spa call success "+JSON.stringify(this.attributes))},e.prototype.startPreview=function(e){this.logger.info("zw.p.0.sp.0 call");try{this.context.startPreview(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.sp.0 call success")},e.prototype.stopPreview=function(e){this.logger.info("zw.p.0.sp.1 call");try{this.context.stopPreview(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.sp.1 call success")},e.prototype.start=function(e,t){var o=this;return new Promise((function(s,i){return r(o,void 0,void 0,(function(){var r,o,a=this;return n(this,(function(n){switch(n.label){case 0:if("string"!=typeof e)return this.logger.error("zw.p.0.s.0 streamID type error"),[2];this.attributes.id=e,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.zegoWechatMini.startPublishingStream(e,t)];case 2:return r=n.sent(),this.attributes.url=r.url,this.isPublishing=!0,this.setWXData(),this.context.start({success:function(){a.logger.info("zw.p.0.s.0 publish success"),s()},fail:function(e){a.logger.error(JSON.stringify(e)),i(e)}}),[3,4];case 3:return o=n.sent(),this.logger.error("zw.p.0.s.0 "+JSON.stringify(o)),i(o),[3,4];case 4:return[2]}}))}))}))},e.prototype.pause=function(e){this.logger.info("zw.p.0.p call");try{this.context.pause(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.p call success")},e.prototype.resume=function(e){this.logger.info("zw.p.0.r call");try{this.context.resume(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.r call success")},e.prototype.stop=function(){if(this.logger.info("zw.p.0.s.1 call"),this.attributes.id){try{this.context.stop(),this.zegoWechatMini.stopPublishingStream(this.attributes.id),this.attributes={},Object.assign(this.attributes,this.defaultAttributes),this.isPublishing=!1,this.setWXData()}catch(e){return void this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.s.1 call success")}else this.logger.error("zw.p.0.s.1 publish id no found")},e.prototype.snapshot=function(e){this.logger.info("zw.p.0.ss call");try{this.context.snapshot(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.ss call success")},e.prototype.playBGM=function(e){this.logger.info("zw.p.0.pb.0 call");try{this.context.playBGM(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.pb.0 call success")},e.prototype.pauseBGM=function(e){this.logger.info("zw.p.0.pb.1 call");try{this.context.pauseBGM(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.pb.1 call success")},e.prototype.resumeBGM=function(e){this.logger.info("zw.p.0.rb call");try{this.context.resumeBGM(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.rb call success")},e.prototype.stopBGM=function(e){this.logger.info("zw.p.0.sb call");try{this.context.stopBGM(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.sb call success")},e.prototype.setBGMVolume=function(e){this.logger.info("zw.p.0.sbv call");try{this.context.setBGMVolume(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.sbv call success")},e.prototype.setMICVolume=function(e){this.logger.info("zw.p.0.smv call");try{this.context.setMICVolume(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.smv call success")},e.prototype.switchCamera=function(e){this.logger.info("zw.p.0.sc call");try{this.context.switchCamera(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.sc call success")},e.prototype.toggleTorch=function(e){this.logger.info("zw.p.0.tt call");try{this.context.toggleTorch(e)}catch(e){this.logger.error(JSON.stringify(e))}this.logger.info("zw.p.0.tt call success")},e}();t.LivePusher=o},151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoPlayWechat=void 0;var n=r(824),o=r(67),s=r(887),i=r(335),a=function(){function e(e,t,r,n,o,i){this.logger=e,this.streamId=t,this.streamCenter=r,this.dataReport=n,this.stateCenter=o,this.room=i,this.urls=[],this.tryUrls=[],this.playUrlIndex=0,this.playUrlTryCount=0,this.currentUrl=null,this.retryIndex=0,this.reconnectCount=0,this.state=s.ENUM_PLAYER_STATE.stop,this.reconnectLimit=0,this.sourceType=0,this.playerType=0,this.playerSeq=0,this.playerReportSeq=0,this.publishQualitySeq=0,this.publishQualityCount=0,this.publishQulaityMaxCount=30,this.playQualitySeq=0,this.playQualityCount=0,this.playQulaityMaxCount=30,this.everSuccess=!1,this.pushBegin=!1,this.playBegin=!1,this.playerLogUploadTime=(new Date).getTime(),this.seq=-1}return e.prototype.resetPlayer=function(){this.state=s.ENUM_PLAYER_STATE.stop},e.prototype.newPlayer=function(){this.resetPlayer();var e=this.getCurrentPlayerUrl(),t=e;0!=this.params.length&&(t=e+"?"+this.params);var r=(new Date).getTime();return t=t.indexOf("?")>-1?t+"&zgseq="+r+"&zgdid="+this.room.sessionID:t+"?zgseq="+r+"&zgdid="+this.room.sessionID,e!==this.currentUrl?(this.currentUrl=e,this.streamCenter.onStreamUrlUpdate(this.streamId,t,this.playerType)):this.streamCenter.onPlayerRetry(this.streamId,this.playerType),0==this.everSuccess?0==this.playerType?(this.dataReport.eventStart(this.playerReportSeq,"PlayBegin"),this.dataReport.addEventInfo(this.playerReportSeq,"PlayBegin","url",t),this.tryUrls.push(t)):(this.dataReport.eventStart(this.playerReportSeq,"PublishBegin"),this.dataReport.addEventInfo(this.playerReportSeq,"PublishBegin","url",t),this.tryUrls.push(t)):this.dataReport.addEventInfo(this.playerSeq,0==this.playerType?"PlayRetry":"PublishRetry","url",t),this.state=s.ENUM_PLAYER_STATE.start,!0},e.prototype.stopPlayer=function(){0==this.playerType?this.dataReport.eventEndWithMsg(this.playerReportSeq,"PlayStat",{quality:this.playerInfo}):(this.dataReport.addEventInfo(this.playerReportSeq,"PublishStat","quality",this.playerInfo),this.dataReport.eventEndWithMsg(this.playerReportSeq,"PublishStat",{quality:this.playerInfo}))},e.prototype.tryStartPlayer=function(e){for(this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_TRY_START_PLAYER+" call");this.playUrlTryCount<this.urls.length;)if(++this.reconnectCount>this.reconnectLimit)this.playUrlTryCount++,this.playUrlIndex=(this.playUrlIndex+1)%this.urls.length,this.reconnectCount=0;else if(this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_TRY_START_PLAYER+" index: "+this.playUrlIndex+", url: "+this.getCurrentPlayerUrl()),this.newPlayer())break;if(this.playUrlTryCount>=this.urls.length){this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_TRY_START_PLAYER+" stream: "+this.streamId),this.resetPlayer();var t="";0==this.playerType?t="PlayEnd":1==this.playerType&&(t="PublishEnd",this.reportQualityStatics()),this.dataReport.addEvent(this.playerSeq,t,{error:e,reason:"no url to retry"}),this.streamCenter.onPlayerStop(this.streamId,this.playerType,e)}},e.prototype.getPlayerUrl=function(){this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_GET_PLAY_URL+" call "+this.streamId);var e=this.urls[++this.retryIndex%this.urls.length],t=e;0!=this.params.length&&(t=e+"?"+this.params);var r=(new Date).getTime();return t=t.indexOf("?")>-1?t+"&zgseq="+r+"&zgdid="+this.room.sessionID:t+"?zgseq="+r+"&zgdid="+this.room.sessionID,this.tryUrls.push(t),this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_GET_PLAY_URL+" call streamId: "+this.streamId+" url: "+t),t},e.prototype.shouldRetryPlay=function(e){var t=e.detail.code;return 3001==t||3002==t||3003==t||3005==t},e.prototype.isPlayFailed=function(e){var t=e.detail.code;return-2301==t||2101==t||2102==t},e.prototype.shouldRetryPublish=function(e){var t=e.detail.code;return 3001==t||3002==t||3003==t||3004==t||3005==t},e.prototype.isPublishFailed=function(e){var t=e.detail.code;return-1301==t||-1302==t||-1303==t||-1304==t||-1305==t||-1306==t||-1307==t||-1308==t||-1309==t||-1310==t||-1311==t},e.prototype.updateEvent=function(e){if(this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_UPDATE_EVENT+" ".concat(this.streamId," state code: ").concat(JSON.stringify(e.detail.code))),0==this.playerType){if(this.playBegin||(this.playBegin=!0,o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)&&o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventStart,"play_begin")),2004==e.detail.code)this.everSuccess?this.dataReport.eventEnd(this.playerReportSeq,"PlayRetry"):(this.everSuccess=!0,this.dataReport.eventStart(this.playerReportSeq,"PlayStat"),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)&&(o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"play_begin","try_urls",this.tryUrls),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventEnd,"play_begin"),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventStart,"play_state"))),this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_UPDATE_EVENT+" play suc: "+this.streamId),this.state=s.ENUM_PLAYER_STATE.playing,this.streamCenter.onPlayerStart(this.streamId,this.playerType);else if(2009==e.detail.code);else if(this.shouldRetryPlay(e));else if(this.isPlayFailed(e)){this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_UPDATE_EVENT+" play error: "+this.streamId),this.resetPlayer();o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)&&(o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"play_begin","error_code",e.detail.code),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"play_begin","try_urls",this.tryUrls),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventEnd,"play_begin"),o.ClientUtil.actionSuccessCallback("kZegoTaskPlayStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addMsgInfo,void 0,{})),this.playBegin=!1,this.streamCenter.onPlayerStop(this.streamId,this.playerType,{code:e.detail.code,msg:"play fail"})}this.everSuccess||this.dataReport.eventEnd(this.playerReportSeq,"PlayBegin")}else 1==this.playerType&&(this.pushBegin||(this.pushBegin=!0,o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)&&o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventStart,"push_begin")),1002==e.detail.code?this.handlePublisherSuccess():this.shouldRetryPublish(e)||this.isPublishFailed(e)&&(this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_UPDATE_EVENT+" publish error: "+this.streamId),this.resetPlayer(),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)&&(o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"push_begin","error_code",e.detail.code),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"push_begin","try_urls",this.tryUrls),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventEnd,"push_begin"),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addMsgInfo,void 0,{})),this.pushBegin=!1,this.streamCenter.onPlayerStop(this.streamId,this.playerType,{code:e.detail.code,msg:"publish fail"})),this.everSuccess||this.dataReport.eventEnd(this.playerReportSeq,"PublishBegin"))},e.prototype.updatePlayerNetStatus=function(e){var t={videoBitrate:e.detail.info.videoBitrate,audioBitrate:e.detail.info.audioBitrate,videoFPS:e.detail.info.videoFPS,videoHeight:e.detail.info.videoHeight,videoWidth:e.detail.info.videoWidth,videoGOP:e.detail.info.videoGOP,netSpeed:e.detail.info.netSpeed,netJitter:e.detail.info.netJitter};if(this.playerInfo=t,1==this.playerType){if(!this.everSuccess)"8.0.16"==wx.getSystemInfoSync().version&&this.handlePublisherSuccess();var r={videoBitrate:e.detail.info.videoBitrate,audioBitrate:e.detail.info.audioBitrate,videoFPS:e.detail.info.videoFPS,videoGOP:e.detail.info.videoGOP,netSpeed:e.detail.info.netSpeed,netJitter:e.detail.info.netJitter,videoWidth:e.detail.info.videoWidth,videoHeight:e.detail.info.videoHeight};if(0==this.publishQualitySeq&&(this.publishQualitySeq=(0,s.getReportSeq)(),this.dataReport.newReport(this.publishQualitySeq),this.dataReport.addMsgInfo(this.publishQualitySeq,{stream_id:this.streamId})),this.dataReport.addEvent(this.publishQualitySeq,"PublishQuality",r),this.publishQualityCount+=1,this.publishQualityCount>=this.publishQulaityMaxCount)(new Date).getTime()-this.playerLogUploadTime>45e3&&(this.reportQualityStatics(),this.playerLogUploadTime=(new Date).getTime())}else if(0==this.playerType){r={videoBitrate:e.detail.info.videoBitrate,audioBitrate:e.detail.info.audioBitrate,videoFPS:e.detail.info.videoFPS,videoGOP:e.detail.info.videoGOP,netSpeed:e.detail.info.netSpeed,netJitter:e.detail.info.netJitter,videoWidth:e.detail.info.videoWidth,videoHeight:e.detail.info.videoHeight};if(0==this.playQualitySeq&&(this.playQualitySeq=(0,s.getReportSeq)(),this.dataReport.newReport(this.playQualitySeq),this.dataReport.addMsgInfo(this.playQualitySeq,{stream_id:this.streamId})),this.dataReport.addEvent(this.playQualitySeq,"PlayQuality",r),this.playQualityCount+=1,this.playQualityCount>=this.playQulaityMaxCount)(new Date).getTime()-this.playerLogUploadTime>45e3&&(this.reportPlayQualityStatics(),this.playerLogUploadTime=(new Date).getTime())}this.streamCenter.onPlayerQuality(this.streamId,t,this.playerType)},e.prototype.getCurrentPlayerUrl=function(){return this.urls[this.playUrlIndex%this.urls.length]},e.prototype.reportQualityStatics=function(){this.dataReport.addMsgInfo(this.publishQualitySeq,{itemtype:"WXPublishStateUpdate"}),this.dataReport.uploadReport(this.publishQualitySeq,i.ZegoWechatLogEvent.kZegoEventPublishStat),this.publishQualityCount=0,this.publishQualitySeq=0},e.prototype.reportPlayQualityStatics=function(){this.dataReport.addMsgInfo(this.playQualitySeq,{itemtype:"WXPlayStateUpdate"}),this.dataReport.uploadReport(this.playQualitySeq,i.ZegoWechatLogEvent.kZegoEventPlayStat),this.playQualityCount=0,this.playQualitySeq=0},e.prototype.handlePublisherSuccess=function(){this.everSuccess?this.dataReport.eventEnd(this.playerReportSeq,"PublishRetry"):(this.everSuccess=!0,this.dataReport.eventStart(this.playerReportSeq,"PublishStat"),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)&&(o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.addEventMsg,"push_begin","try_urls",this.tryUrls),o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventEnd,"push_begin"),this.stateCenter.publishStreamList[this.streamId]&&this.stateCenter.publishStreamList[this.streamId].state==s.ENUM_PUBLISH_STREAM_STATE.tryPublish&&o.ClientUtil.actionSuccessCallback("kZegoTaskPublishStart"+this.streamId,this.stateCenter.reportList)(s.REPORT_ACTION.eventStart,"publish_state"))),this.logger.info(n.ZEGO_WECHATMINI_ACTION.PLAYWECHAT_UPDATE_EVENT+" play suc: "+this.streamId),this.state=s.ENUM_PLAYER_STATE.playing,this.streamCenter.onPlayerStart(this.streamId,this.playerType)},e}();t.ZegoPlayWechat=a},788:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStreamCenterWechat=void 0;var s=r(824),i=r(390),a=r(887),c=r(335),l=r(67),u=r(151),h=0,p=1,_=2,d=0,f=1,g=function(e){function t(t,r,n){var o=e.call(this)||this;o.playerList={},o.publisherList={},o.playerCount=0,o.playingList=[],o.publishingList=[],o.eventSeq=0,o.streamEventMap={},o.streamReportMap={},o.livePlayerList=[],o.playerContextMap={},o.publishSuccessCallBackList={},o.publishErrorCallBackList={},o.playSuccessCallBackList={},o.playErrorCallBackList={},o.logger=t,o.dataReport=n,o.stateCenter=r;var s=wx.getSystemInfoSync();return o.systemInfo={brand:s.brand,model:s.model,system:s.system,platform:s.platform,version:s.version,SDKVersion:s.SDKVersion},o}return o(t,e),t.prototype.updatePlayingState=function(e,t,r){if(this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE+" "+e),null==e)return c.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayStreamIDNullError;if(r){var n=this.playerList[e],o=this.stateCenter.reportSeqList.startPlay[e];if(this.dataReport.eventStart(o,"updatePlayingState"),n)return this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE+" player already exist"),this.dataReport.eventEndWithMsgInfo(o,"updatePlayingState",{message:"player already exist"}),this.dataReport.uploadReport(o,void 0),delete this.stateCenter.reportSeqList.startPlay[e],c.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayRepeatedPullError;var i=this.stateCenter.getPlayRoom(e)||this.stateCenter.roomList[0];if(!i)return this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYING_STATE+" room no found"),c.ZegoWechatLogEvent.kZegoTaskPlayStart.error.kPlayNoLoginError;this.playerList[e]=new u.ZegoPlayWechat(this.logger,e,this,this.dataReport,this.stateCenter,i)}return this.updateStreamState(e,r,t,this.playingList),r?(this.streamEventMap[e]=this.stateCenter.reportSeqList.startPlay[e],this.eventSeq+=1,this.streamReportMap[e]=this.eventSeq,this.dataReport.newReport(this.eventSeq),this.dataReport.eventStart(this.eventSeq,"GotPlayInfo")):this.reportPlayEvent(e),!0},t.prototype.updatePublishingState=function(e,t,r,n){if(void 0===r&&(r=""),void 0===n&&(n=!1),this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PUBLISHING_STATE+" "+t),null==t)return c.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kPublishStreamIDNullError;if(n){var o=this.publisherList[t],i=this.stateCenter.reportSeqList.startPublish[t];if(this.dataReport.eventStart(i,"updatePublishingState"),o)return this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PUBLISHING_STATE+" player already exist"),this.dataReport.eventEndWithMsgInfo(i,"updatePublishingState",{message:"player already exist"}),this.dataReport.uploadReport(i,void 0),delete this.stateCenter.reportSeqList.startPublish[t],c.ZegoWechatLogEvent.kZegoTaskPublishStart.error.kIsPublishing;this.publisherList[t]=new u.ZegoPlayWechat(this.logger,t,this,this.dataReport,this.stateCenter,e)}return this.updateStreamState(t,n,r,this.publishingList),n?(this.streamEventMap[t]=this.stateCenter.reportSeqList.startPublish[t],this.eventSeq+=1,this.streamReportMap[t]=this.eventSeq,this.dataReport.newReport(this.eventSeq),this.dataReport.eventStart(this.eventSeq,"GotPublishInfo")):this.reportPublishEvent(t),!0},t.prototype.updateAudioVolumeNotify=function(e,t){var r,n;this.logger.info(s.ZEGO_WECHATMINI_ACTION.WECHATMINI_UPDATE_PLAYER_VOLUME_NOTIFY+" "+e),null!=e&&null!=(null===(r=null==t?void 0:t.detail)||void 0===r?void 0:r.volume)&&this.logger.info(s.ZEGO_WECHATMINI_ACTION.WECHATMINI_UPDATE_PLAYER_VOLUME_NOTIFY+" "+e+" volume: "+(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.volume))},t.prototype.updateStreamState=function(e,t,r,n){if(e)if(r&&"string"==typeof r||(r=""),1==t)n.push({streamID:e,params:r});else for(var o=0;o<n.length;o++)if(n[o].streamID==e){n.splice(o--,1);break}},t.prototype.isPlaying=function(){return 0!=this.playingList.length},t.prototype.isPublishing=function(){return 0!=this.publishingList.length},t.prototype.startPlayingStream=function(e,t,r){if(this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PLAYING_STREAM+" call "+e),this.streamEventMap[e]){var n="";0==r?n="cdn":1==r&&(n="ultra_src"),l.ClientUtil.actionLogReportCallback("kZegoTaskPlayStart"+e,this.stateCenter.reportList,a.REPORT_ACTION.addEventMsg,"get_play_url",["type",n]),l.ClientUtil.actionLogReportCallback("kZegoTaskPlayStart"+e,this.stateCenter.reportList,a.REPORT_ACTION.addEventMsg,"get_play_url",["urls",t])}var o=this.streamReportMap[e];return o&&this.dataReport.eventEndWithMsg(o,"GotPlayInfo",{type:0==r?"cdn":"ultra_src",urls:t}),this.startPlayer(e,t,r,d)},t.prototype.startPlayer=function(e,t,r,n){var o=this.playerList[e];if(n==f&&(o=this.publisherList[e]),!o)return this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PLAYER+" player don't exist"),!1;var i=[];n==d?i=this.playingList:n==f&&(i=this.publishingList);for(var a=!1,c="",l=0;l<i.length;l++)if(i[l].streamID==e){a=!0,c=i[l].params;break}if(!a)return this.logger.warn(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PLAYER+" should not start"),!1;if(o.urls=t,o.params=c,o.reconnectLimit=this.getReconnectLimit(r),o.dispatchType=r,o.playerType=n,o.playerSeq=this.streamEventMap[e],o.playerReportSeq=this.streamReportMap[e],!o)return this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PLAYER+" new player failed"),!1;++this.playerCount;var u=o.tryStartPlayer(0);return this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PLAYER+" call result: "+u),!0},t.prototype.getNextUrl=function(e){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_GET_NEXT_URL+" call "+e);var t,r=this.publisherList[e]||this.playerList[e];if(!r)return this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_GET_NEXT_URL+" player don't exist"),"";this.publishingList.find((function(t){return t.streamID===e}))?(t=!0,this.onPublishStateUpdate(a.ENUM_PUBLISH_STATE_UPDATE.retry,e,{code:0,message:""})):(t=!1,this.onPlayStateUpdate(_,e,{code:0,message:""}));var n=r.getPlayerUrl();if(t){if(!this.stateCenter.reportSeqList.startPublish[e]){var o=(0,a.getReportSeq)();this.stateCenter.reportSeqList.startPublish[e]=o,this.dataReport.newReport(o,c.ZegoWechatLogEvent.kZegoTaskRePublish),r.pushBegin=!1,l.ClientUtil.logReportCallback("kZegoTaskPublishStart"+e,this.dataReport,o,this.stateCenter.reportList)}}else if(!this.stateCenter.reportSeqList.startPlay[e]){o=(0,a.getReportSeq)();this.stateCenter.reportSeqList.startPlay[e]=o,this.dataReport.newReport(o,c.ZegoWechatLogEvent.kZegoTaskRePlay),r.playBegin=!1,l.ClientUtil.logReportCallback("kZegoTaskPlayStart"+e,this.dataReport,o,this.stateCenter.reportList)}return n},t.prototype.stopPlayingStream=function(e){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_STOP_PLAYING_STREAM+" call "+e),null!=e&&(this.stopPlayer(e),delete this.streamEventMap[e],delete this.streamReportMap[e],this.updatePlayingState(e),delete this.playSuccessCallBackList[e],delete this.playErrorCallBackList[e])},t.prototype.stopPlayer=function(e){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_STOP_PLAYER+" call "+e);var t=this.playerList[e],r=this.publisherList[e];t||r?(t&&(t.stopPlayer(),delete this.playerList[e]),r&&(r.stopPlayer(),delete this.publisherList[e]),--this.playerCount):this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_STOP_PLAYER+" play not exist "+e),this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_STOP_PLAYER+" call success")},t.prototype.startPublishingStream=function(e,t,r){if(this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_START_PUBLISHING_STREAM+" call "+e),this.streamEventMap[e]){var n="";0==r?n="cdn":1==r&&(n="ultra_src"),l.ClientUtil.actionLogReportCallback("kZegoTaskPublishStart"+e,this.stateCenter.reportList,a.REPORT_ACTION.addEventMsg,"type",n),l.ClientUtil.actionLogReportCallback("kZegoTaskPublishStart"+e,this.stateCenter.reportList,a.REPORT_ACTION.addEventMsg,"urls",t)}var o=this.streamReportMap[e];return o&&this.dataReport.eventEndWithMsg(o,"GotPublishInfo",{type:0==r?"cdn":"ultra_src",urls:t}),this.startPlayer(e,t,r,f)},t.prototype.stopPublishingStream=function(e){if(this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_STOP_PUBLISHING_STREAM+" call "+e),null!=e){var t=this.publisherList[e].room;this.stopPlayer(e),delete this.streamEventMap[e],delete this.streamReportMap[e],this.updatePublishingState(t,e,"",!1)}},t.prototype.updatePlayerState=function(e,t){var r=this.playerList[e],n=this.publisherList[e];r||n?(r&&r.updateEvent(t),n&&n.updateEvent(t)):this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYER_STATE+" no player "+e),this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYER_STATE+" updatePlayerEvent success")},t.prototype.updatePlayerNetStatus=function(e,t){var r=this.playerList[e],n=this.publisherList[e];r||n?(r&&r.updatePlayerNetStatus(t),n&&n.updatePlayerNetStatus(t)):this.logger.error(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYER_NET_STATUS+" no player "+e),this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_UPDATE_PLAYER_NET_STATUS+" updatePlayerNetStatus success")},t.prototype.reset=function(e,t){var r,n;for(var o in this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_RESET+" call"),this.publisherList)(this.publisherList[o].room.roomID==e||!e)&&this.stopPublishingStream(o),this.pusherInstance&&this.pusherInstance.stop();this.pusherInstance=void 0;var i=function(t){var o=a.playerList[t].room;if(o.roomID!=e||!o.streamList.find((function(e){return e.stream_id==t}))&&1!=a.stateCenter.roomList.length){if(o.roomID==e&&a.stateCenter.roomList.length>1){var s=a.stateCenter.roomList.find((function(t){return t.roomID!==e}));s?a.playerList[t].room=s:(null===(n=a.livePlayerList.find((function(e){return e.attributes.id==t})))||void 0===n||n.stop(),a.stopPlayingStream(t))}}else null===(r=a.livePlayerList.find((function(e){return e.attributes.id==t})))||void 0===r||r.stop(),a.stopPlayingStream(t)},a=this;for(var c in this.playerList)i(c);this.livePlayerList=[],this.playerContextMap={},this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_RESET+" call success")},t.prototype.reportPublishEvent=function(e,t){if(this.streamReportMap[e]){var r=this.streamReportMap[e];this.dataReport.addMsgExt(r,{stream:e,error:t}),this.dataReport.addMsgInfo(r,{itemtype:"WXPublishStream"}),this.dataReport.uploadReport(r,"WXPublishStream"),delete this.streamReportMap[e]}},t.prototype.reportPlayEvent=function(e,t){if(this.streamReportMap[e]){var r=this.streamReportMap[e];this.dataReport.addMsgExt(r,{stream:e,error:t}),this.dataReport.addMsgInfo(r,{itemtype:"WXPlayStream"}),this.dataReport.uploadReport(r,"WXPlayStream"),delete this.streamReportMap[e]}},t.prototype.onPlayStateUpdate=function(e,t,r){},t.prototype.onPlayQualityUpdate=function(e,t){},t.prototype.onPublishStateUpdate=function(e,t,r){},t.prototype.onPublishQualityUpdate=function(e,t){},t.prototype.onPublisherStreamUrlUpdate=function(e,t){},t.prototype.onPublisherStreamUrlFail=function(e,t){},t.prototype.onPlayerStreamUrlUpdate=function(e,t){},t.prototype.getReconnectLimit=function(e){return 1},t.prototype.onPlayerStart=function(e,t){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_PLAY_START+" call "+e),t==d?this.onPlayStateUpdate(h,e,{code:0,message:""}):t==f&&this.onPublishStateUpdate(h,e,{code:0,message:""})},t.prototype.onPlayerStop=function(e,t,r){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_PLAY_STOP+" call "+e),t==d?(this.reportPlayEvent(e,r),this.logger.warn(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_PLAY_STOP+" play error"),this.onPlayStateUpdate(p,e,r)):t==f&&(this.reportPublishEvent(e,r),this.logger.warn(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_PLAY_STOP+" publish error"),this.onPublishStateUpdate(p,e,r))},t.prototype.onPlayerRetry=function(e,t){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_PLAY_RETRY+" call "+e),t==d?this.onPlayStateUpdate(_,e,{code:0,message:""}):t==f&&this.onPublishStateUpdate(_,e,{code:0,message:""})},t.prototype.onPlayerQuality=function(e,t,r){var n={video:{videoBitrate:t.videoBitrate,videoFPS:t.videoFPS,videoWidth:t.videoWidth,videoHeight:t.videoHeight},audio:{audioBitrate:t.audioBitrate}};r==d?this.onPlayQualityUpdate(e,n):r==f&&this.onPublishQualityUpdate(e,n)},t.prototype.onStreamUrlUpdate=function(e,t,r){this.logger.info(s.ZEGO_WECHATMINI_ACTION.STREAMCENTERWECHAT_ON_STREAM_URL_UPDATE+" call "+e),0==r?this.playSuccessCallBackList[e](e,t):this.publishSuccessCallBackList[e](e,t)},t.prototype.getTotalStreamId=function(e){return e},t.prototype.getRealStreamId=function(e){return e},t.prototype.getRoomByStreamID=function(e){return this.publisherList[e]?this.publisherList[e].room:this.playerList[e]?this.playerList[e].room:void 0},t}(i.ZegoStreamCenter);t.ZegoStreamCenterWechat=g},545:function(e,t,r){"undefined"!=typeof self&&self,e.exports=function(e){return r=[function(e,t,r){"use strict";var n,o,s=(r=r(6)).Reader,i=r.Writer,a=r.util,c=r.roots.default||(r.roots.default={});function l(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(this.redirect_server=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function D(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function U(e){if(this.trans_seqs=[],this.user_trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function H(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function B(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function q(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function j(e){if(this.user_basic_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function x(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function G(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function V(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function W(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Z(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Y(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function F(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function K(e){if(this.stream_info=[],this.stream_mix_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Q(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function X(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function J(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ee(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function te(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function re(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ne(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function oe(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function se(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ie(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ae(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ce(e){if(this.dst_userlist=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function le(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function he(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function pe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function de(e){if(this.stream_info=[],this.stream_mix_info=[],this.trans_seqs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function fe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ge(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function me(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ye(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ee(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Te(e){if(this.room_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Se(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ve(e){if(this.stream_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function be(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Oe(e){if(this.trans_seq_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Re(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ce(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ie(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ne(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ke(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Le(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Pe(e){if(this.fetch_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ae(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Me(e){if(this.trans_fetch_results=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function we(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function De(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ue(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function He(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Be(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function qe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function je(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function xe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ge(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ve(e){if(this.user_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function We(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ze(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ye(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Fe(e){if(this.stream_id_list=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ke(e){if(this.stream_info=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Qe(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Xe(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Je(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $e(e){if(this.msg_data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function et(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function tt(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function rt(e){if(this.trans_array=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function nt(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}c.proto_switch=((r={}).CommonRsp=(l.prototype.rsp_head=null,l.create=function(e){return new l(e)},l.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},l.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.CommonRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},l),r.RspHead=(u.prototype.code=0,u.prototype.message="",u.create=function(e){return new u(e)},u.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},u.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.RspHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;default:e.skipType(7&o)}}return n},u),r.LoginRoomReq=(h.prototype.app_id=0,h.prototype.id_name=a.newBuffer([]),h.prototype.device_id="",h.prototype.term_type=0,h.prototype.net_type=0,h.prototype.sdk_ver=0,h.prototype.proto_ver=0,h.prototype.nick_name=a.newBuffer([]),h.prototype.client_stamp=a.newBuffer([]),h.prototype.crypt_version=0,h.prototype.k1_sign=a.newBuffer([]),h.prototype.login_token=a.newBuffer([]),h.prototype.relogin_token=a.newBuffer([]),h.prototype.role=0,h.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,h.prototype.room_id=a.newBuffer([]),h.prototype.room_name=a.newBuffer([]),h.prototype.biz_type=0,h.prototype.room_create_flag=0,h.prototype.user_state_flag=0,h.prototype.lv_key="",h.prototype.third_token=a.newBuffer([]),h.prototype.cluster_req=0,h.prototype.user_count_limit=0,h.prototype.relate_service="",h.prototype.biz_version="",h.prototype.login_logic=0,h.prototype.sdk_conn_type=0,h.create=function(e){return new h(e)},h.encode=function(e,t){return t=t||i.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(26).string(e.device_id),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(32).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).int32(e.net_type),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(48).uint32(e.sdk_ver),null!=e.proto_ver&&Object.hasOwnProperty.call(e,"proto_ver")&&t.uint32(56).int32(e.proto_ver),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(66).bytes(e.nick_name),null!=e.client_stamp&&Object.hasOwnProperty.call(e,"client_stamp")&&t.uint32(74).bytes(e.client_stamp),null!=e.crypt_version&&Object.hasOwnProperty.call(e,"crypt_version")&&t.uint32(80).uint32(e.crypt_version),null!=e.k1_sign&&Object.hasOwnProperty.call(e,"k1_sign")&&t.uint32(90).bytes(e.k1_sign),null!=e.login_token&&Object.hasOwnProperty.call(e,"login_token")&&t.uint32(98).bytes(e.login_token),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(106).bytes(e.relogin_token),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(112).uint32(e.role),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(120).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(130).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(138).bytes(e.room_name),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(144).uint32(e.biz_type),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(152).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(160).uint32(e.user_state_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(170).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(178).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(184).uint32(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(192).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(202).string(e.relate_service),null!=e.biz_version&&Object.hasOwnProperty.call(e,"biz_version")&&t.uint32(210).string(e.biz_version),null!=e.login_logic&&Object.hasOwnProperty.call(e,"login_logic")&&t.uint32(216).uint32(e.login_logic),null!=e.sdk_conn_type&&Object.hasOwnProperty.call(e,"sdk_conn_type")&&t.uint32(224).int32(e.sdk_conn_type),t},h.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.LoginRoomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.id_name=e.bytes();break;case 3:n.device_id=e.string();break;case 4:n.term_type=e.int32();break;case 5:n.net_type=e.int32();break;case 6:n.sdk_ver=e.uint32();break;case 7:n.proto_ver=e.int32();break;case 8:n.nick_name=e.bytes();break;case 9:n.client_stamp=e.bytes();break;case 10:n.crypt_version=e.uint32();break;case 11:n.k1_sign=e.bytes();break;case 12:n.login_token=e.bytes();break;case 13:n.relogin_token=e.bytes();break;case 14:n.role=e.uint32();break;case 15:n.liveroom_session_id=e.uint64();break;case 16:n.room_id=e.bytes();break;case 17:n.room_name=e.bytes();break;case 18:n.biz_type=e.uint32();break;case 19:n.room_create_flag=e.uint32();break;case 20:n.user_state_flag=e.uint32();break;case 21:n.lv_key=e.string();break;case 22:n.third_token=e.bytes();break;case 23:n.cluster_req=e.uint32();break;case 24:n.user_count_limit=e.uint32();break;case 25:n.relate_service=e.string();break;case 26:n.biz_version=e.string();break;case 27:n.login_logic=e.uint32();break;case 28:n.sdk_conn_type=e.int32();break;default:e.skipType(7&o)}}return n},h),r.LoginRoomRsp=(p.prototype.rsp_head=null,p.prototype.room_id=a.newBuffer([]),p.prototype.heartbeat_interval=0,p.prototype.heartbeat_timeout=0,p.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,p.prototype.crypt_option=0,p.prototype.k2_sign=a.newBuffer([]),p.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.liveroom_hb_interval=0,p.prototype.liveroom_hb_timeout=0,p.prototype.anchor_info=null,p.prototype.stream_seq=0,p.prototype.stream_info=a.emptyArray,p.prototype.stream_fetch_flag=0,p.prototype.lv_key="",p.prototype.zp_key="",p.prototype.online_count=0,p.prototype.bigim_time_window=0,p.prototype.dati_time_window=0,p.prototype.cluster_name="",p.prototype.relogin_token=a.newBuffer([]),p.prototype.stream_mix_info=a.emptyArray,p.prototype.userlist_merge_timeout=0,p.prototype.userlist_interval=0,p.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.trans_seqs=a.emptyArray,p.prototype.stream_list_push_merge_timeout=0,p.prototype.stream_list_hb_wait_merge_time=0,p.prototype.trans_list_seq=0,p.prototype.token_remain_time=0,p.create=function(e){return new p(e)},p.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(24).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(32).uint32(e.heartbeat_timeout),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(40).int64(e.ret_timestamp),null!=e.crypt_option&&Object.hasOwnProperty.call(e,"crypt_option")&&t.uint32(48).uint32(e.crypt_option),null!=e.k2_sign&&Object.hasOwnProperty.call(e,"k2_sign")&&t.uint32(58).bytes(e.k2_sign),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(64).uint64(e.liveroom_session_id),null!=e.liveroom_hb_interval&&Object.hasOwnProperty.call(e,"liveroom_hb_interval")&&t.uint32(72).uint32(e.liveroom_hb_interval),null!=e.liveroom_hb_timeout&&Object.hasOwnProperty.call(e,"liveroom_hb_timeout")&&t.uint32(80).uint32(e.liveroom_hb_timeout),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.proto_switch.StAnchorInfo.encode(e.anchor_info,t.uint32(90).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(96).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.proto_switch.StStreamInfo.encode(e.stream_info[r],t.uint32(106).fork()).ldelim();if(null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(112).uint32(e.stream_fetch_flag),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(122).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(130).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(136).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(144).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(152).uint32(e.dati_time_window),null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(162).string(e.cluster_name),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(170).bytes(e.relogin_token),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.proto_switch.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(178).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(184).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(192).uint32(e.userlist_interval),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(200).uint64(e.room_session_id),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)c.proto_switch.StTransInfo.encode(e.trans_seqs[r],t.uint32(210).fork()).ldelim();return null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(216).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(224).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(232).uint32(e.trans_list_seq),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(240).uint32(e.token_remain_time),t},p.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.LoginRoomRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.heartbeat_interval=e.uint32();break;case 4:n.heartbeat_timeout=e.uint32();break;case 5:n.ret_timestamp=e.int64();break;case 6:n.crypt_option=e.uint32();break;case 7:n.k2_sign=e.bytes();break;case 8:n.liveroom_session_id=e.uint64();break;case 9:n.liveroom_hb_interval=e.uint32();break;case 10:n.liveroom_hb_timeout=e.uint32();break;case 11:n.anchor_info=c.proto_switch.StAnchorInfo.decode(e,e.uint32());break;case 12:n.stream_seq=e.uint32();break;case 13:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 14:n.stream_fetch_flag=e.uint32();break;case 15:n.lv_key=e.string();break;case 16:n.zp_key=e.string();break;case 17:n.online_count=e.uint32();break;case 18:n.bigim_time_window=e.uint32();break;case 19:n.dati_time_window=e.uint32();break;case 20:n.cluster_name=e.string();break;case 21:n.relogin_token=e.bytes();break;case 22:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(c.proto_switch.StStreamInfo.decode(e,e.uint32()));break;case 23:n.userlist_merge_timeout=e.uint32();break;case 24:n.userlist_interval=e.uint32();break;case 25:n.room_session_id=e.uint64();break;case 26:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(c.proto_switch.StTransInfo.decode(e,e.uint32()));break;case 27:n.stream_list_push_merge_timeout=e.uint32();break;case 28:n.stream_list_hb_wait_merge_time=e.uint32();break;case 29:n.trans_list_seq=e.uint32();break;case 30:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},p),r.StAnchorInfo=(_.prototype.anchor_id_name=a.newBuffer([]),_.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,_.prototype.anchor_nick_name=a.newBuffer([]),_.create=function(e){return new _(e)},_.encode=function(e,t){return t=t||i.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},_.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.StAnchorInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.anchor_id_name=e.bytes();break;case 2:n.anchor_id=e.uint64();break;case 3:n.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return n},_),r.StStreamInfo=(d.prototype.stream_id=a.newBuffer([]),d.prototype.stream_sid="",d.prototype.id_name=a.newBuffer([]),d.prototype.nick_name=a.newBuffer([]),d.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,d.prototype.extra_info=a.newBuffer([]),d.prototype.title=a.newBuffer([]),d.prototype.stream_ver=0,d.prototype.stream_attr=a.newBuffer([]),d.prototype.stream_src=0,d.prototype.stream_state=0,d.prototype.stream_type=0,d.prototype.stream_nid=0,d.create=function(e){return new d(e)},d.encode=function(e,t){return t=t||i.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(41).fixed64(e.create_time),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(58).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(64).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(74).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(88).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},d.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.StStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_id=e.bytes();break;case 2:n.stream_sid=e.string();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.create_time=e.fixed64();break;case 6:n.extra_info=e.bytes();break;case 7:n.title=e.bytes();break;case 8:n.stream_ver=e.uint32();break;case 9:n.stream_attr=e.bytes();break;case 10:n.stream_src=e.uint32();break;case 11:n.stream_state=e.uint32();break;case 12:n.stream_type=e.uint32();break;case 13:n.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return n},d),r.StTransSeqInfo=(f.prototype.trans_type=a.newBuffer([]),f.prototype.trans_seq=0,f.create=function(e){return new f(e)},f.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},f.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.StTransSeqInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},f),r.StTransInfo=(g.prototype.trans_channel=a.newBuffer([]),g.prototype.trans_seq_array=a.emptyArray,g.create=function(e){return new g(e)},g.encode=function(e,t){if(t=t||i.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.proto_switch.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},g.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.StTransInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(c.proto_switch.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},g),r.LogoutRoomReq=(m.prototype.logout_code=0,m.prototype.logout_check=a.newBuffer([]),m.prototype.liveroom_session_id=a.Long?a.Long.fromBits(0,0,!0):0,m.prototype.room_id=a.newBuffer([]),m.prototype.role=0,m.prototype.nickname=a.newBuffer([]),m.prototype.logout_logic=0,m.create=function(e){return new m(e)},m.encode=function(e,t){return t=t||i.create(),null!=e.logout_code&&Object.hasOwnProperty.call(e,"logout_code")&&t.uint32(8).uint32(e.logout_code),null!=e.logout_check&&Object.hasOwnProperty.call(e,"logout_check")&&t.uint32(18).bytes(e.logout_check),null!=e.liveroom_session_id&&Object.hasOwnProperty.call(e,"liveroom_session_id")&&t.uint32(24).uint64(e.liveroom_session_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(34).bytes(e.room_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(50).bytes(e.nickname),null!=e.logout_logic&&Object.hasOwnProperty.call(e,"logout_logic")&&t.uint32(56).uint32(e.logout_logic),t},m.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.LogoutRoomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.logout_code=e.uint32();break;case 2:n.logout_check=e.bytes();break;case 3:n.liveroom_session_id=e.uint64();break;case 4:n.room_id=e.bytes();break;case 5:n.role=e.uint32();break;case 6:n.nickname=e.bytes();break;case 7:n.logout_logic=e.uint32();break;default:e.skipType(7&o)}}return n},m),r.LogoutRoomRsp=(y.prototype.rsp_head=null,y.create=function(e){return new y(e)},y.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},y.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.LogoutRoomRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},y),r.TcpHbReq=(E.prototype.id_name=a.newBuffer([]),E.create=function(e){return new E(e)},E.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),t},E.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.TcpHbReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.id_name=e.bytes():e.skipType(7&o)}return n},E),r.TcpHbRsp=(T.prototype.rsp_head=null,T.prototype.heartbeat_interval=0,T.prototype.heartbeat_timeout=0,T.prototype.server_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,T.create=function(e){return new T(e)},T.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.proto_switch.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.heartbeat_interval&&Object.hasOwnProperty.call(e,"heartbeat_interval")&&t.uint32(16).uint32(e.heartbeat_interval),null!=e.heartbeat_timeout&&Object.hasOwnProperty.call(e,"heartbeat_timeout")&&t.uint32(24).uint32(e.heartbeat_timeout),null!=e.server_timestamp&&Object.hasOwnProperty.call(e,"server_timestamp")&&t.uint32(32).int64(e.server_timestamp),t},T.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.TcpHbRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.proto_switch.RspHead.decode(e,e.uint32());break;case 2:n.heartbeat_interval=e.uint32();break;case 3:n.heartbeat_timeout=e.uint32();break;case 4:n.server_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},T),r.TermType=(o={},(n=Object.create(o))[o[0]="TT_NONE"]=0,n[o[1]="TT_PC"]=1,n[o[2]="TT_IOS"]=2,n[o[3]="TT_ANDROID"]=3,n[o[4]="TT_MAC"]=4,n[o[5]="TT_LINUX"]=5,n[o[6]="TT_WEB"]=6,n[o[7]="TT_MINIPROGRAM"]=7,n[o[32]="TT_UNKNOWN"]=32,n),r.NetType=(o={},(n=Object.create(o))[o[0]="NT_NONE"]=0,n[o[1]="NT_LINE"]=1,n[o[2]="NT_WIFI"]=2,n[o[3]="NT_2G"]=3,n[o[4]="NT_3G"]=4,n[o[5]="NT_4G"]=5,n[o[32]="NT_UNKNOWN"]=32,n),r.ProductType=(o={},(n=Object.create(o))[o[0]="PRODUCT_TYPE_NONE"]=0,n[o[1]="PRODUCT_TYPE_LIVEROOM"]=1,n[o[2]="PRODUCT_TYPE_IM"]=2,n),r.LiveroomProtoVersion=(o={},(n=Object.create(o))[o[0]="PROTO_VERSION_NONE"]=0,n[o[131072]="RPOTO_V020000"]=131072,n),r.SdkConnType=(o={},(n=Object.create(o))[o[0]="SdkConnType_None"]=0,n[o[1]="SdkConnType_Tcp"]=1,n[o[2]="SdkConnType_Websocket"]=2,n),r.Header=(S.prototype.cmd="",S.prototype.seq=0,S.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.app_id=0,S.prototype.user_id="",S.prototype.session_id=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.user_nid=a.Long?a.Long.fromBits(0,0,!1):0,S.prototype.controls=a.newBuffer([]),S.prototype.product=0,S.prototype.flags=a.newBuffer([]),S.create=function(e){return new S(e)},S.encode=function(e,t){return t=t||i.create(),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(10).string(e.cmd),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint32(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(32).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(48).int64(e.session_id),null!=e.user_nid&&Object.hasOwnProperty.call(e,"user_nid")&&t.uint32(56).int64(e.user_nid),null!=e.controls&&Object.hasOwnProperty.call(e,"controls")&&t.uint32(66).bytes(e.controls),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(72).int32(e.product),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(82).bytes(e.flags),t},S.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.Header;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.cmd=e.string();break;case 2:n.seq=e.uint32();break;case 3:n.timestamp=e.int64();break;case 4:n.app_id=e.uint32();break;case 5:n.user_id=e.string();break;case 6:n.session_id=e.int64();break;case 7:n.user_nid=e.int64();break;case 8:n.controls=e.bytes();break;case 9:n.product=e.int32();break;case 10:n.flags=e.bytes();break;default:e.skipType(7&o)}}return n},S),r.PushKickout=(v.prototype.reason=0,v.prototype.message="",v.prototype.need_relogin=0,v.create=function(e){return new v(e)},v.encode=function(e,t){return t=t||i.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).uint32(e.reason),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.need_relogin&&Object.hasOwnProperty.call(e,"need_relogin")&&t.uint32(24).uint32(e.need_relogin),t},v.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.PushKickout;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.reason=e.uint32();break;case 2:n.message=e.string();break;case 3:n.need_relogin=e.uint32();break;default:e.skipType(7&o)}}return n},v),r.PushRedirect2Sdk=(b.prototype.redirect_server=a.emptyArray,b.create=function(e){return new b(e)},b.encode=function(e,t){if(t=t||i.create(),null!=e.redirect_server&&e.redirect_server.length)for(var r=0;r<e.redirect_server.length;++r)t.uint32(10).string(e.redirect_server[r]);return t},b.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.PushRedirect2Sdk;e.pos<r;){var o=e.uint32();o>>>3==1?(n.redirect_server&&n.redirect_server.length||(n.redirect_server=[]),n.redirect_server.push(e.string())):e.skipType(7&o)}return n},b),r.PushReq=(O.prototype.head=null,O.prototype.msg_body=a.newBuffer([]),O.create=function(e){return new O(e)},O.encode=function(e,t){return t=t||i.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.PushReqHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(18).bytes(e.msg_body),t},O.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.PushReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.head=c.proto_switch.PushReqHead.decode(e,e.uint32());break;case 2:n.msg_body=e.bytes();break;default:e.skipType(7&o)}}return n},O),r.PushReqHead=(R.prototype.sub_cmd="",R.prototype.sender_user_id="",R.prototype.qos_flag=0,R.prototype.msg_id="",R.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,R.prototype.room_id=a.newBuffer([]),R.prototype.sender_user_nid=a.Long?a.Long.fromBits(0,0,!0):0,R.create=function(e){return new R(e)},R.encode=function(e,t){return t=t||i.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sender_user_id&&Object.hasOwnProperty.call(e,"sender_user_id")&&t.uint32(18).string(e.sender_user_id),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(24).uint32(e.qos_flag),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(40).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(50).bytes(e.room_id),null!=e.sender_user_nid&&Object.hasOwnProperty.call(e,"sender_user_nid")&&t.uint32(56).uint64(e.sender_user_nid),t},R.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.PushReqHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sender_user_id=e.string();break;case 3:n.qos_flag=e.uint32();break;case 4:n.msg_id=e.string();break;case 5:n.send_time=e.int64();break;case 6:n.room_id=e.bytes();break;case 7:n.sender_user_nid=e.uint64();break;default:e.skipType(7&o)}}return n},R),r.PushRsp=(C.prototype.code=0,C.prototype.message="",C.prototype.sub_cmd="",C.prototype.msg_id="",C.prototype.server_send_time=a.Long?a.Long.fromBits(0,0,!1):0,C.create=function(e){return new C(e)},C.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(26).string(e.sub_cmd),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(40).int64(e.server_send_time),t},C.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.PushRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;case 3:n.sub_cmd=e.string();break;case 4:n.msg_id=e.string();break;case 5:n.server_send_time=e.int64();break;default:e.skipType(7&o)}}return n},C),r.MergePushHead=(I.prototype.qos_flag=0,I.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,I.prototype.room_id=a.newBuffer([]),I.create=function(e){return new I(e)},I.encode=function(e,t){return t=t||i.create(),null!=e.qos_flag&&Object.hasOwnProperty.call(e,"qos_flag")&&t.uint32(8).uint32(e.qos_flag),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(16).int64(e.send_time),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(26).bytes(e.room_id),t},I.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.MergePushHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.qos_flag=e.uint32();break;case 2:n.send_time=e.int64();break;case 3:n.room_id=e.bytes();break;default:e.skipType(7&o)}}return n},I),r.MergePushInfo=(N.prototype.sub_cmd="",N.prototype.sub_seq=0,N.prototype.sender_nid=a.Long?a.Long.fromBits(0,0,!0):0,N.prototype.msg_id=a.newBuffer([]),N.prototype.msg_body=a.newBuffer([]),N.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,N.create=function(e){return new N(e)},N.encode=function(e,t){return t=t||i.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.sender_nid&&Object.hasOwnProperty.call(e,"sender_nid")&&t.uint32(24).uint64(e.sender_nid),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).bytes(e.msg_id),null!=e.msg_body&&Object.hasOwnProperty.call(e,"msg_body")&&t.uint32(42).bytes(e.msg_body),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(48).int64(e.msg_timestamp),t},N.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.MergePushInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sub_seq=e.uint32();break;case 3:n.sender_nid=e.uint64();break;case 4:n.msg_id=e.bytes();break;case 5:n.msg_body=e.bytes();break;case 6:n.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},N),r.CmdMergePushReq=(k.prototype.head=null,k.prototype.messages=a.emptyArray,k.create=function(e){return new k(e)},k.encode=function(e,t){if(t=t||i.create(),null!=e.head&&Object.hasOwnProperty.call(e,"head")&&c.proto_switch.MergePushHead.encode(e.head,t.uint32(10).fork()).ldelim(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)c.proto_switch.MergePushInfo.encode(e.messages[r],t.uint32(18).fork()).ldelim();return t},k.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.CmdMergePushReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.head=c.proto_switch.MergePushHead.decode(e,e.uint32());break;case 2:n.messages&&n.messages.length||(n.messages=[]),n.messages.push(c.proto_switch.MergePushInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},k),r.CmdMergePushRspInfo=(L.prototype.sub_cmd="",L.prototype.sub_seq=0,L.prototype.msg_id=a.newBuffer([]),L.create=function(e){return new L(e)},L.encode=function(e,t){return t=t||i.create(),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(10).string(e.sub_cmd),null!=e.sub_seq&&Object.hasOwnProperty.call(e,"sub_seq")&&t.uint32(16).uint32(e.sub_seq),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(26).bytes(e.msg_id),t},L.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.CmdMergePushRspInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.sub_cmd=e.string();break;case 2:n.sub_seq=e.uint32();break;case 3:n.msg_id=e.bytes();break;default:e.skipType(7&o)}}return n},L),r.CmdMergePushRsp=(P.prototype.messages=a.emptyArray,P.create=function(e){return new P(e)},P.encode=function(e,t){if(t=t||i.create(),null!=e.messages&&e.messages.length)for(var r=0;r<e.messages.length;++r)c.proto_switch.CmdMergePushRspInfo.encode(e.messages[r],t.uint32(10).fork()).ldelim();return t},P.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.proto_switch.CmdMergePushRsp;e.pos<r;){var o=e.uint32();o>>>3==1?(n.messages&&n.messages.length||(n.messages=[]),n.messages.push(c.proto_switch.CmdMergePushRspInfo.decode(e,e.uint32()))):e.skipType(7&o)}return n},P),r),c.liveroom_cs=((o={}).ReqHead=(A.prototype.room_id="",A.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,A.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,A.create=function(e){return new A(e)},A.encode=function(e,t){return t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(16).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(24).uint64(e.room_session_id),t},A.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.ReqHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.string();break;case 2:n.user_session_id=e.uint64();break;case 3:n.room_session_id=e.uint64();break;default:e.skipType(7&o)}}return n},A),o.RspHead=(M.prototype.code=0,M.prototype.message="",M.create=function(e){return new M(e)},M.encode=function(e,t){return t=t||i.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},M.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RspHead;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.code=e.uint32();break;case 2:n.message=e.string();break;default:e.skipType(7&o)}}return n},M),o.CommonRsp=(w.prototype.rsp_head=null,w.create=function(e){return new w(e)},w.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},w.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.CommonRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},w),o.HbReq=(D.prototype.req_head=null,D.prototype.role=0,D.prototype.lv_key="",D.create=function(e){return new D(e)},D.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).uint32(e.role),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(26).string(e.lv_key),t},D.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.HbReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.role=e.uint32();break;case 3:n.lv_key=e.string();break;default:e.skipType(7&o)}}return n},D),o.HbRsp=(U.prototype.rsp_head=null,U.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,U.prototype.hb_interval=0,U.prototype.hb_timeout=0,U.prototype.stream_seq=0,U.prototype.user_seq=a.Long?a.Long.fromBits(0,0,!1):0,U.prototype.online_count=0,U.prototype.bigim_time_window=0,U.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,U.prototype.trans_seqs=a.emptyArray,U.prototype.user_trans_seqs=a.emptyArray,U.prototype.StreamRefresh=0,U.prototype.trans_list_seq=0,U.create=function(e){return new U(e)},U.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(16).int64(e.ret_timestamp),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(24).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(32).uint32(e.hb_timeout),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(40).uint32(e.stream_seq),null!=e.user_seq&&Object.hasOwnProperty.call(e,"user_seq")&&t.uint32(48).int64(e.user_seq),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(56).uint32(e.online_count),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(64).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(72).int64(e.dati_time_window),null!=e.trans_seqs&&e.trans_seqs.length)for(var r=0;r<e.trans_seqs.length;++r)c.liveroom_cs.StTransChannelSeq.encode(e.trans_seqs[r],t.uint32(82).fork()).ldelim();if(null!=e.user_trans_seqs&&e.user_trans_seqs.length)for(r=0;r<e.user_trans_seqs.length;++r)c.liveroom_cs.StTransChannelSeq.encode(e.user_trans_seqs[r],t.uint32(90).fork()).ldelim();return null!=e.StreamRefresh&&Object.hasOwnProperty.call(e,"StreamRefresh")&&t.uint32(96).uint32(e.StreamRefresh),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(104).uint32(e.trans_list_seq),t},U.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.HbRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.ret_timestamp=e.int64();break;case 3:n.hb_interval=e.uint32();break;case 4:n.hb_timeout=e.uint32();break;case 5:n.stream_seq=e.uint32();break;case 6:n.user_seq=e.int64();break;case 7:n.online_count=e.uint32();break;case 8:n.bigim_time_window=e.uint32();break;case 9:n.dati_time_window=e.int64();break;case 10:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 11:n.user_trans_seqs&&n.user_trans_seqs.length||(n.user_trans_seqs=[]),n.user_trans_seqs.push(c.liveroom_cs.StTransChannelSeq.decode(e,e.uint32()));break;case 12:n.StreamRefresh=e.uint32();break;case 13:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},U),o.StTransSeq=(H.prototype.trans_type=a.newBuffer([]),H.prototype.trans_seq=0,H.create=function(e){return new H(e)},H.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},H.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransSeq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},H),o.StTransChannelSeq=(B.prototype.trans_channel=a.newBuffer([]),B.prototype.trans_seq_array=a.emptyArray,B.create=function(e){return new B(e)},B.encode=function(e,t){if(t=t||i.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.liveroom_cs.StTransSeq.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},B.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransChannelSeq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(c.liveroom_cs.StTransSeq.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},B),o.UserlistReq=(q.prototype.req_head=null,q.prototype.sort_type=0,q.prototype.user_index=0,q.create=function(e){return new q(e)},q.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(16).uint32(e.sort_type),null!=e.user_index&&Object.hasOwnProperty.call(e,"user_index")&&t.uint32(24).uint32(e.user_index),t},q.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.UserlistReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.sort_type=e.uint32();break;case 3:n.user_index=e.uint32();break;default:e.skipType(7&o)}}return n},q),o.UserlistRsp=(j.prototype.rsp_head=null,j.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!0):0,j.prototype.server_user_index=a.Long?a.Long.fromBits(0,0,!1):0,j.prototype.ret_user_index=a.Long?a.Long.fromBits(0,0,!1):0,j.prototype.user_basic_list=a.emptyArray,j.create=function(e){return new j(e)},j.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).uint64(e.server_user_seq),null!=e.server_user_index&&Object.hasOwnProperty.call(e,"server_user_index")&&t.uint32(24).int64(e.server_user_index),null!=e.ret_user_index&&Object.hasOwnProperty.call(e,"ret_user_index")&&t.uint32(32).int64(e.ret_user_index),null!=e.user_basic_list&&e.user_basic_list.length)for(var r=0;r<e.user_basic_list.length;++r)c.liveroom_cs.StUserBasicDef.encode(e.user_basic_list[r],t.uint32(42).fork()).ldelim();return t},j.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.UserlistRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.server_user_seq=e.uint64();break;case 3:n.server_user_index=e.int64();break;case 4:n.ret_user_index=e.int64();break;case 5:n.user_basic_list&&n.user_basic_list.length||(n.user_basic_list=[]),n.user_basic_list.push(c.liveroom_cs.StUserBasicDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},j),o.StUserBasicDef=(x.prototype.id_name=a.newBuffer([]),x.prototype.nick_name=a.newBuffer([]),x.prototype.role=0,x.create=function(e){return new x(e)},x.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),t},x.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StUserBasicDef;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;default:e.skipType(7&o)}}return n},x),o.StreamAddReq=(G.prototype.req_head=null,G.prototype.stream_id=a.newBuffer([]),G.prototype.title=a.newBuffer([]),G.prototype.stream_attr=a.newBuffer([]),G.prototype.extra_info=a.newBuffer([]),G.prototype.client_req_seq=0,G.prototype.nickname=a.newBuffer([]),G.prototype.login_mode=0,G.prototype.stream_type=0,G.prototype.third_token=a.newBuffer([]),G.create=function(e){return new G(e)},G.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(26).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(34).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(48).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(58).bytes(e.nickname),null!=e.login_mode&&Object.hasOwnProperty.call(e,"login_mode")&&t.uint32(64).uint32(e.login_mode),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(72).uint32(e.stream_type),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(82).bytes(e.third_token),t},G.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamAddReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_id=e.bytes();break;case 3:n.title=e.bytes();break;case 4:n.stream_attr=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.client_req_seq=e.uint32();break;case 7:n.nickname=e.bytes();break;case 8:n.login_mode=e.uint32();break;case 9:n.stream_type=e.uint32();break;case 10:n.third_token=e.bytes();break;default:e.skipType(7&o)}}return n},G),o.StreamAddRsp=(z.prototype.rsp_head=null,z.prototype.stream_seq=0,z.prototype.stream_sid="",z.prototype.stream_ver=0,z.prototype.stream_nid=0,z.prototype.token_remain_time=0,z.create=function(e){return new z(e)},z.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(26).string(e.stream_sid),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(32).uint32(e.stream_ver),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(40).uint32(e.stream_nid),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(48).uint32(e.token_remain_time),t},z.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamAddRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_sid=e.string();break;case 4:n.stream_ver=e.uint32();break;case 5:n.stream_nid=e.uint32();break;case 6:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},z),o.StreamDeleteReq=(V.prototype.req_head=null,V.prototype.stream_sid="",V.prototype.stream_id=a.newBuffer([]),V.prototype.client_req_seq=0,V.create=function(e){return new V(e)},V.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(32).uint32(e.client_req_seq),t},V.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamDeleteReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_sid=e.string();break;case 3:n.stream_id=e.bytes();break;case 4:n.client_req_seq=e.uint32();break;default:e.skipType(7&o)}}return n},V),o.StreamDeleteRsp=(W.prototype.rsp_head=null,W.prototype.stream_seq=0,W.prototype.stream_ver=0,W.create=function(e){return new W(e)},W.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},W.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamDeleteRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return n},W),o.StreamUpdateReq=(Z.prototype.req_head=null,Z.prototype.stream_sid="",Z.prototype.stream_id=a.newBuffer([]),Z.prototype.title=a.newBuffer([]),Z.prototype.stream_attr=a.newBuffer([]),Z.prototype.extra_info=a.newBuffer([]),Z.prototype.client_req_seq=0,Z.prototype.nickname=a.newBuffer([]),Z.create=function(e){return new Z(e)},Z.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(26).bytes(e.stream_id),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(34).bytes(e.title),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(42).bytes(e.stream_attr),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(50).bytes(e.extra_info),null!=e.client_req_seq&&Object.hasOwnProperty.call(e,"client_req_seq")&&t.uint32(56).uint32(e.client_req_seq),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(66).bytes(e.nickname),t},Z.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamUpdateReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.stream_sid=e.string();break;case 3:n.stream_id=e.bytes();break;case 4:n.title=e.bytes();break;case 5:n.stream_attr=e.bytes();break;case 6:n.extra_info=e.bytes();break;case 7:n.client_req_seq=e.uint32();break;case 8:n.nickname=e.bytes();break;default:e.skipType(7&o)}}return n},Z),o.StreamUpdateRsp=(Y.prototype.rsp_head=null,Y.prototype.stream_seq=0,Y.prototype.stream_ver=0,Y.create=function(e){return new Y(e)},Y.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(24).uint32(e.stream_ver),t},Y.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamUpdateRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_ver=e.uint32();break;default:e.skipType(7&o)}}return n},Y),o.StreamListReq=(F.prototype.req_head=null,F.create=function(e){return new F(e)},F.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},F.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamListReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return n},F),o.StreamListRsp=(K.prototype.rsp_head=null,K.prototype.stream_seq=0,K.prototype.stream_info=a.emptyArray,K.prototype.stream_refresh=0,K.prototype.stream_mix_info=a.emptyArray,K.create=function(e){return new K(e)},K.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();if(null!=e.stream_refresh&&Object.hasOwnProperty.call(e,"stream_refresh")&&t.uint32(32).uint32(e.stream_refresh),null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(42).fork()).ldelim();return t},K.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StreamListRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 4:n.stream_refresh=e.uint32();break;case 5:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},K),o.StStreamInfo=(Q.prototype.stream_sid="",Q.prototype.stream_id=a.newBuffer([]),Q.prototype.id_name=a.newBuffer([]),Q.prototype.nick_name=a.newBuffer([]),Q.prototype.extra_info=a.newBuffer([]),Q.prototype.title=a.newBuffer([]),Q.prototype.stream_ver=0,Q.prototype.stream_attr=a.newBuffer([]),Q.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,Q.prototype.stream_src=0,Q.prototype.state=0,Q.prototype.stream_type=0,Q.prototype.stream_nid=0,Q.create=function(e){return new Q(e)},Q.encode=function(e,t){return t=t||i.create(),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(10).string(e.stream_sid),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(18).bytes(e.stream_id),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(56).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(66).bytes(e.stream_attr),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(72).int64(e.create_time),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(80).uint32(e.stream_src),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(88).uint32(e.state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(96).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(104).uint32(e.stream_nid),t},Q.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_sid=e.string();break;case 2:n.stream_id=e.bytes();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.title=e.bytes();break;case 7:n.stream_ver=e.uint32();break;case 8:n.stream_attr=e.bytes();break;case 9:n.create_time=e.int64();break;case 10:n.stream_src=e.uint32();break;case 11:n.state=e.uint32();break;case 12:n.stream_type=e.uint32();break;case 13:n.stream_nid=e.uint32();break;default:e.skipType(7&o)}}return n},Q),o.StDstUser=(X.prototype.id_name=a.newBuffer([]),X.prototype.id=a.Long?a.Long.fromBits(0,0,!0):0,X.create=function(e){return new X(e)},X.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).uint64(e.id),t},X.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StDstUser;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.id=e.uint64();break;default:e.skipType(7&o)}}return n},X),o.SignalLiveReq=(J.prototype.req_head=null,J.prototype.push_message=a.newBuffer([]),J.prototype.dst_userlist=a.emptyArray,J.create=function(e){return new J(e)},J.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},J.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},J),o.SignalLiveRsp=($.prototype.rsp_head=null,$.create=function(e){return new $(e)},$.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},$.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},$),o.SignalLiveResultReq=(ee.prototype.req_head=null,ee.prototype.push_message=a.newBuffer([]),ee.prototype.dst_userlist=a.emptyArray,ee.create=function(e){return new ee(e)},ee.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},ee.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveResultReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ee),o.SignalLiveResulRsp=(te.prototype.rsp_head=null,te.create=function(e){return new te(e)},te.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},te.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveResulRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},te),o.SignalLiveInviteReq=(re.prototype.req_head=null,re.prototype.push_message=a.newBuffer([]),re.prototype.dst_userlist=a.emptyArray,re.create=function(e){return new re(e)},re.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},re.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveInviteReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},re),o.SignalLiveInviteRsp=(ne.prototype.rsp_head=null,ne.create=function(e){return new ne(e)},ne.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ne.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveInviteRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ne),o.SignalLiveStopReq=(oe.prototype.req_head=null,oe.prototype.push_message=a.newBuffer([]),oe.prototype.dst_userlist=a.emptyArray,oe.create=function(e){return new oe(e)},oe.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},oe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveStopReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},oe),o.SignalLiveStopRsp=(se.prototype.rsp_head=null,se.create=function(e){return new se(e)},se.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},se.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveStopRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},se),o.SignalLiveCustomReq=(ie.prototype.req_head=null,ie.prototype.push_message=a.newBuffer([]),ie.prototype.dst_userlist=a.emptyArray,ie.create=function(e){return new ie(e)},ie.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.push_message&&Object.hasOwnProperty.call(e,"push_message")&&t.uint32(18).bytes(e.push_message),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(26).fork()).ldelim();return t},ie.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveCustomReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.push_message=e.bytes();break;case 3:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ie),o.SignalLiveCustomRsp=(ae.prototype.rsp_head=null,ae.create=function(e){return new ae(e)},ae.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),t},ae.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.SignalLiveCustomRsp;e.pos<r;){var o=e.uint32();o>>>3==1?n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32()):e.skipType(7&o)}return n},ae),o.ImChatReq=(ce.prototype.req_head=null,ce.prototype.msg_category=0,ce.prototype.msg_type=0,ce.prototype.msg_priority=0,ce.prototype.msg_content=a.newBuffer([]),ce.prototype.dst_userlist=a.emptyArray,ce.create=function(e){return new ce(e)},ce.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(16).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(24).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(32).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(42).bytes(e.msg_content),null!=e.dst_userlist&&e.dst_userlist.length)for(var r=0;r<e.dst_userlist.length;++r)c.liveroom_cs.StDstUser.encode(e.dst_userlist[r],t.uint32(50).fork()).ldelim();return t},ce.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.ImChatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.msg_category=e.uint32();break;case 3:n.msg_type=e.uint32();break;case 4:n.msg_priority=e.uint32();break;case 5:n.msg_content=e.bytes();break;case 6:n.dst_userlist&&n.dst_userlist.length||(n.dst_userlist=[]),n.dst_userlist.push(c.liveroom_cs.StDstUser.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ce),o.ImChatRsp=(le.prototype.rsp_head=null,le.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,le.create=function(e){return new le(e)},le.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(16).uint64(e.msg_id),t},le.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.ImChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.msg_id=e.uint64();break;default:e.skipType(7&o)}}return n},le),o.ImGethatReq=(ue.prototype.req_head=null,ue.prototype.msg_priority=0,ue.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,ue.prototype.sort_type=0,ue.prototype.msg_count=0,ue.create=function(e){return new ue(e)},ue.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(16).uint32(e.msg_priority),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(24).uint64(e.msg_id),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(32).uint32(e.sort_type),null!=e.msg_count&&Object.hasOwnProperty.call(e,"msg_count")&&t.uint32(40).uint32(e.msg_count),t},ue.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.ImGethatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.msg_priority=e.uint32();break;case 3:n.msg_id=e.uint64();break;case 4:n.sort_type=e.uint32();break;case 5:n.msg_count=e.uint32();break;default:e.skipType(7&o)}}return n},ue),o.ImGetChatRsp=(he.prototype.rsp_head=null,he.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,he.prototype.msg_data=a.emptyArray,he.create=function(e){return new he(e)},he.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StMsgData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},he.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.ImGetChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.server_msg_id=e.uint64();break;case 3:n.ret_msg_id=e.uint64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(c.liveroom_cs.StMsgData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},he),o.StMsgData=(pe.prototype.id_name=a.newBuffer([]),pe.prototype.nick_name=a.newBuffer([]),pe.prototype.role=0,pe.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,pe.prototype.msg_category=0,pe.prototype.msg_type=0,pe.prototype.msg_priority=0,pe.prototype.msg_content=a.newBuffer([]),pe.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,pe.create=function(e){return new pe(e)},pe.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},pe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StMsgData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msg_id=e.uint64();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_priority=e.uint32();break;case 8:n.msg_content=e.bytes();break;case 9:n.send_time=e.int64();break;default:e.skipType(7&o)}}return n},pe),o.EnterReq=(_e.prototype.req_head=null,_e.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.nick_name=a.newBuffer([]),_e.prototype.role=0,_e.prototype.net_type=0,_e.prototype.config=null,_e.prototype.lv_key="",_e.prototype.third_token=a.newBuffer([]),_e.prototype.cluster_req=a.Long?a.Long.fromBits(0,0,!0):0,_e.prototype.user_count_limit=0,_e.prototype.relate_service="",_e.prototype.conn_type=0,_e.prototype.room_name=a.newBuffer([]),_e.create=function(e){return new _e(e)},_e.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(40).uint32(e.net_type),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&c.liveroom_cs.StConfigList.encode(e.config,t.uint32(50).fork()).ldelim(),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(58).string(e.lv_key),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(66).bytes(e.third_token),null!=e.cluster_req&&Object.hasOwnProperty.call(e,"cluster_req")&&t.uint32(72).uint64(e.cluster_req),null!=e.user_count_limit&&Object.hasOwnProperty.call(e,"user_count_limit")&&t.uint32(80).uint32(e.user_count_limit),null!=e.relate_service&&Object.hasOwnProperty.call(e,"relate_service")&&t.uint32(90).string(e.relate_service),null!=e.conn_type&&Object.hasOwnProperty.call(e,"conn_type")&&t.uint32(96).uint32(e.conn_type),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(106).bytes(e.room_name),t},_e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.EnterReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.switch_session_id=e.uint64();break;case 3:n.nick_name=e.bytes();break;case 4:n.role=e.uint32();break;case 5:n.net_type=e.uint32();break;case 6:n.config=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;case 7:n.lv_key=e.string();break;case 8:n.third_token=e.bytes();break;case 9:n.cluster_req=e.uint64();break;case 10:n.user_count_limit=e.uint32();break;case 11:n.relate_service=e.string();break;case 12:n.conn_type=e.uint32();break;case 13:n.room_name=e.bytes();break;default:e.skipType(7&o)}}return n},_e),o.EnterRsp=(de.prototype.rsp_head=null,de.prototype.room_id=a.newBuffer([]),de.prototype.user_session_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.room_session_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.user_id=a.Long?a.Long.fromBits(0,0,!0):0,de.prototype.ret_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,de.prototype.bigim_time_window=0,de.prototype.dati_time_window=a.Long?a.Long.fromBits(0,0,!1):0,de.prototype.room_id32=0,de.prototype.hb_interval=0,de.prototype.hb_timeout=0,de.prototype.lv_key="",de.prototype.zp_key="",de.prototype.online_count=0,de.prototype.anchor_info=null,de.prototype.stream_seq=0,de.prototype.stream_info=a.emptyArray,de.prototype.stream_mix_info=a.emptyArray,de.prototype.userlist_merge_timeout=0,de.prototype.userlist_interval=0,de.prototype.stream_list_push_merge_timeout=0,de.prototype.stream_list_hb_wait_merge_time=0,de.prototype.trans_list_seq=0,de.prototype.trans_seqs=a.emptyArray,de.prototype.cluster_name="",de.prototype.token_remain_time=0,de.prototype.stream_fetch_flag=0,de.create=function(e){return new de(e)},de.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.user_session_id&&Object.hasOwnProperty.call(e,"user_session_id")&&t.uint32(24).uint64(e.user_session_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(32).uint64(e.room_session_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(40).uint64(e.user_id),null!=e.ret_timestamp&&Object.hasOwnProperty.call(e,"ret_timestamp")&&t.uint32(49).fixed64(e.ret_timestamp),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(56).uint32(e.bigim_time_window),null!=e.dati_time_window&&Object.hasOwnProperty.call(e,"dati_time_window")&&t.uint32(64).int64(e.dati_time_window),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(72).uint32(e.room_id32),null!=e.hb_interval&&Object.hasOwnProperty.call(e,"hb_interval")&&t.uint32(80).uint32(e.hb_interval),null!=e.hb_timeout&&Object.hasOwnProperty.call(e,"hb_timeout")&&t.uint32(88).uint32(e.hb_timeout),null!=e.lv_key&&Object.hasOwnProperty.call(e,"lv_key")&&t.uint32(98).string(e.lv_key),null!=e.zp_key&&Object.hasOwnProperty.call(e,"zp_key")&&t.uint32(106).string(e.zp_key),null!=e.online_count&&Object.hasOwnProperty.call(e,"online_count")&&t.uint32(112).uint32(e.online_count),null!=e.anchor_info&&Object.hasOwnProperty.call(e,"anchor_info")&&c.liveroom_cs.StAnchorInfo.encode(e.anchor_info,t.uint32(122).fork()).ldelim(),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(128).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_info[r],t.uint32(138).fork()).ldelim();if(null!=e.stream_mix_info&&e.stream_mix_info.length)for(r=0;r<e.stream_mix_info.length;++r)c.liveroom_cs.StStreamInfo.encode(e.stream_mix_info[r],t.uint32(146).fork()).ldelim();if(null!=e.userlist_merge_timeout&&Object.hasOwnProperty.call(e,"userlist_merge_timeout")&&t.uint32(152).uint32(e.userlist_merge_timeout),null!=e.userlist_interval&&Object.hasOwnProperty.call(e,"userlist_interval")&&t.uint32(160).uint32(e.userlist_interval),null!=e.stream_list_push_merge_timeout&&Object.hasOwnProperty.call(e,"stream_list_push_merge_timeout")&&t.uint32(168).uint32(e.stream_list_push_merge_timeout),null!=e.stream_list_hb_wait_merge_time&&Object.hasOwnProperty.call(e,"stream_list_hb_wait_merge_time")&&t.uint32(176).uint32(e.stream_list_hb_wait_merge_time),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(184).uint32(e.trans_list_seq),null!=e.trans_seqs&&e.trans_seqs.length)for(r=0;r<e.trans_seqs.length;++r)c.liveroom_cs.StTransInfo.encode(e.trans_seqs[r],t.uint32(194).fork()).ldelim();return null!=e.cluster_name&&Object.hasOwnProperty.call(e,"cluster_name")&&t.uint32(202).string(e.cluster_name),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(208).uint32(e.token_remain_time),null!=e.stream_fetch_flag&&Object.hasOwnProperty.call(e,"stream_fetch_flag")&&t.uint32(216).uint32(e.stream_fetch_flag),t},de.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.EnterRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.user_session_id=e.uint64();break;case 4:n.room_session_id=e.uint64();break;case 5:n.user_id=e.uint64();break;case 6:n.ret_timestamp=e.fixed64();break;case 7:n.bigim_time_window=e.uint32();break;case 8:n.dati_time_window=e.int64();break;case 9:n.room_id32=e.uint32();break;case 10:n.hb_interval=e.uint32();break;case 11:n.hb_timeout=e.uint32();break;case 12:n.lv_key=e.string();break;case 13:n.zp_key=e.string();break;case 14:n.online_count=e.uint32();break;case 15:n.anchor_info=c.liveroom_cs.StAnchorInfo.decode(e,e.uint32());break;case 16:n.stream_seq=e.uint32();break;case 17:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 18:n.stream_mix_info&&n.stream_mix_info.length||(n.stream_mix_info=[]),n.stream_mix_info.push(c.liveroom_cs.StStreamInfo.decode(e,e.uint32()));break;case 19:n.userlist_merge_timeout=e.uint32();break;case 20:n.userlist_interval=e.uint32();break;case 21:n.stream_list_push_merge_timeout=e.uint32();break;case 22:n.stream_list_hb_wait_merge_time=e.uint32();break;case 23:n.trans_list_seq=e.uint32();break;case 24:n.trans_seqs&&n.trans_seqs.length||(n.trans_seqs=[]),n.trans_seqs.push(c.liveroom_cs.StTransInfo.decode(e,e.uint32()));break;case 25:n.cluster_name=e.string();break;case 26:n.token_remain_time=e.uint32();break;case 27:n.stream_fetch_flag=e.uint32();break;default:e.skipType(7&o)}}return n},de),o.StAnchorInfo=(fe.prototype.anchor_id_name=a.newBuffer([]),fe.prototype.anchor_id=a.Long?a.Long.fromBits(0,0,!0):0,fe.prototype.anchor_nick_name=a.newBuffer([]),fe.create=function(e){return new fe(e)},fe.encode=function(e,t){return t=t||i.create(),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(10).bytes(e.anchor_id_name),null!=e.anchor_id&&Object.hasOwnProperty.call(e,"anchor_id")&&t.uint32(16).uint64(e.anchor_id),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(26).bytes(e.anchor_nick_name),t},fe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StAnchorInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.anchor_id_name=e.bytes();break;case 2:n.anchor_id=e.uint64();break;case 3:n.anchor_nick_name=e.bytes();break;default:e.skipType(7&o)}}return n},fe),o.QuitReq=(ge.prototype.req_head=null,ge.prototype.switch_session_id=a.Long?a.Long.fromBits(0,0,!0):0,ge.prototype.room_id32=0,ge.prototype.nick_name=a.newBuffer([]),ge.prototype.role=0,ge.prototype.net_type=0,ge.prototype.config_list=null,ge.create=function(e){return new ge(e)},ge.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.switch_session_id&&Object.hasOwnProperty.call(e,"switch_session_id")&&t.uint32(16).uint64(e.switch_session_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(40).uint32(e.role),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(48).uint32(e.net_type),null!=e.config_list&&Object.hasOwnProperty.call(e,"config_list")&&c.liveroom_cs.StConfigList.encode(e.config_list,t.uint32(58).fork()).ldelim(),t},ge.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.QuitReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.switch_session_id=e.uint64();break;case 3:n.room_id32=e.uint32();break;case 4:n.nick_name=e.bytes();break;case 5:n.role=e.uint32();break;case 6:n.net_type=e.uint32();break;case 7:n.config_list=c.liveroom_cs.StConfigList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},ge),o.StConfigList=(me.prototype.room_create_flag=0,me.prototype.user_state_flag=0,me.create=function(e){return new me(e)},me.encode=function(e,t){return t=t||i.create(),null!=e.room_create_flag&&Object.hasOwnProperty.call(e,"room_create_flag")&&t.uint32(8).uint32(e.room_create_flag),null!=e.user_state_flag&&Object.hasOwnProperty.call(e,"user_state_flag")&&t.uint32(16).uint32(e.user_state_flag),t},me.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StConfigList;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_create_flag=e.uint32();break;case 2:n.user_state_flag=e.uint32();break;default:e.skipType(7&o)}}return n},me),o.QuitRsp=(ye.prototype.rsp_head=null,ye.prototype.room_id=a.newBuffer([]),ye.prototype.room_id32=0,ye.create=function(e){return new ye(e)},ye.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.room_id32&&Object.hasOwnProperty.call(e,"room_id32")&&t.uint32(24).uint32(e.room_id32),t},ye.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.QuitRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_id=e.bytes();break;case 3:n.room_id32=e.uint32();break;default:e.skipType(7&o)}}return n},ye),o.RoomListReq=(Ee.prototype.req_head=null,Ee.create=function(e){return new Ee(e)},Ee.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),t},Ee.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RoomListReq;e.pos<r;){var o=e.uint32();o>>>3==1?n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32()):e.skipType(7&o)}return n},Ee),o.RoomListRsp=(Te.prototype.rsp_head=null,Te.prototype.room_list=a.emptyArray,Te.create=function(e){return new Te(e)},Te.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.room_list&&e.room_list.length)for(var r=0;r<e.room_list.length;++r)c.liveroom_cs.StRoomListRoom.encode(e.room_list[r],t.uint32(18).fork()).ldelim();return t},Te.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RoomListRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.room_list&&n.room_list.length||(n.room_list=[]),n.room_list.push(c.liveroom_cs.StRoomListRoom.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Te),o.StRoomListStream=(Se.prototype.stream_id=a.newBuffer([]),Se.create=function(e){return new Se(e)},Se.encode=function(e,t){return t=t||i.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),t},Se.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StRoomListStream;e.pos<r;){var o=e.uint32();o>>>3==1?n.stream_id=e.bytes():e.skipType(7&o)}return n},Se),o.StRoomListRoom=(ve.prototype.room_id=a.newBuffer([]),ve.prototype.room_name=a.newBuffer([]),ve.prototype.anchor_id_name=a.newBuffer([]),ve.prototype.anchor_nick_name=a.newBuffer([]),ve.prototype.stream_list=a.emptyArray,ve.create=function(e){return new ve(e)},ve.encode=function(e,t){if(t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(18).bytes(e.room_name),null!=e.anchor_id_name&&Object.hasOwnProperty.call(e,"anchor_id_name")&&t.uint32(26).bytes(e.anchor_id_name),null!=e.anchor_nick_name&&Object.hasOwnProperty.call(e,"anchor_nick_name")&&t.uint32(34).bytes(e.anchor_nick_name),null!=e.stream_list&&e.stream_list.length)for(var r=0;r<e.stream_list.length;++r)c.liveroom_cs.StRoomListStream.encode(e.stream_list[r],t.uint32(42).fork()).ldelim();return t},ve.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StRoomListRoom;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.room_name=e.bytes();break;case 3:n.anchor_id_name=e.bytes();break;case 4:n.anchor_nick_name=e.bytes();break;case 5:n.stream_list&&n.stream_list.length||(n.stream_list=[]),n.stream_list.push(c.liveroom_cs.StRoomListStream.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},ve),o.StTransSeqInfo=(be.prototype.trans_type=a.newBuffer([]),be.prototype.trans_seq=0,be.create=function(e){return new be(e)},be.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(16).uint32(e.trans_seq),t},be.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransSeqInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},be),o.StTransInfo=(Oe.prototype.trans_channel=a.newBuffer([]),Oe.prototype.trans_seq_array=a.emptyArray,Oe.create=function(e){return new Oe(e)},Oe.encode=function(e,t){if(t=t||i.create(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(10).bytes(e.trans_channel),null!=e.trans_seq_array&&e.trans_seq_array.length)for(var r=0;r<e.trans_seq_array.length;++r)c.liveroom_cs.StTransSeqInfo.encode(e.trans_seq_array[r],t.uint32(18).fork()).ldelim();return t},Oe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_channel=e.bytes();break;case 2:n.trans_seq_array&&n.trans_seq_array.length||(n.trans_seq_array=[]),n.trans_seq_array.push(c.liveroom_cs.StTransSeqInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Oe),o.TransReq=(Re.prototype.req_head=null,Re.prototype.nick_name=a.newBuffer([]),Re.prototype.role=0,Re.prototype.trans_type=a.newBuffer([]),Re.prototype.trans_data=a.newBuffer([]),Re.prototype.trans_local_seq=0,Re.prototype.trans_channel=a.newBuffer([]),Re.create=function(e){return new Re(e)},Re.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(34).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(42).bytes(e.trans_data),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(48).uint32(e.trans_local_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(58).bytes(e.trans_channel),t},Re.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.TransReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.trans_type=e.bytes();break;case 5:n.trans_data=e.bytes();break;case 6:n.trans_local_seq=e.uint32();break;case 7:n.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return n},Re),o.TransRsp=(Ce.prototype.rsp_head=null,Ce.prototype.trans_type=a.newBuffer([]),Ce.prototype.trans_seq=0,Ce.prototype.trans_list_seq=0,Ce.prototype.trans_channel=a.newBuffer([]),Ce.create=function(e){return new Ce(e)},Ce.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(18).bytes(e.trans_type),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(42).bytes(e.trans_channel),t},Ce.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.TransRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_type=e.bytes();break;case 3:n.trans_seq=e.uint32();break;case 4:n.trans_list_seq=e.uint32();break;case 5:n.trans_channel=e.bytes();break;default:e.skipType(7&o)}}return n},Ce),o.TransFetchReq=(Ie.prototype.req_head=null,Ie.prototype.trans_channel=a.newBuffer([]),Ie.prototype.fetch_array=a.emptyArray,Ie.create=function(e){return new Ie(e)},Ie.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)c.liveroom_cs.StTransFetch.encode(e.fetch_array[r],t.uint32(26).fork()).ldelim();return t},Ie.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.TransFetchReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.fetch_array&&n.fetch_array.length||(n.fetch_array=[]),n.fetch_array.push(c.liveroom_cs.StTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ie),o.StTransFetch=(Ne.prototype.trans_type=a.newBuffer([]),Ne.prototype.trans_local_seq=0,Ne.create=function(e){return new Ne(e)},Ne.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Ne.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransFetch;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Ne),o.TransFetchRsp=(ke.prototype.rsp_head=null,ke.prototype.trans_channel=a.newBuffer([]),ke.prototype.trans_fetch_results=a.emptyArray,ke.prototype.trans_list_seq=0,ke.create=function(e){return new ke(e)},ke.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)c.liveroom_cs.TransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(32).uint32(e.trans_list_seq),t},ke.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.TransFetchRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.trans_fetch_results&&n.trans_fetch_results.length||(n.trans_fetch_results=[]),n.trans_fetch_results.push(c.liveroom_cs.TransFetchResult.decode(e,e.uint32()));break;case 4:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},ke),o.TransFetchResult=(Le.prototype.trans_type=a.newBuffer([]),Le.prototype.trans_data=a.newBuffer([]),Le.prototype.trans_idname=a.newBuffer([]),Le.prototype.trans_nickname=a.newBuffer([]),Le.prototype.trans_role=0,Le.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,Le.prototype.trans_seq=0,Le.prototype.err_code=0,Le.create=function(e){return new Le(e)},Le.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},Le.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.TransFetchResult;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_send_time=e.int64();break;case 7:n.trans_seq=e.uint32();break;case 8:n.err_code=e.int32();break;default:e.skipType(7&o)}}return n},Le),o.UserTransFetchReq=(Pe.prototype.req_head=null,Pe.prototype.nick_name=a.newBuffer([]),Pe.prototype.role=0,Pe.prototype.trans_channel=a.newBuffer([]),Pe.prototype.fetch_array=a.emptyArray,Pe.create=function(e){return new Pe(e)},Pe.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(34).bytes(e.trans_channel),null!=e.fetch_array&&e.fetch_array.length)for(var r=0;r<e.fetch_array.length;++r)c.liveroom_cs.StUserTransFetch.encode(e.fetch_array[r],t.uint32(42).fork()).ldelim();return t},Pe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.UserTransFetchReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.trans_channel=e.bytes();break;case 5:n.fetch_array&&n.fetch_array.length||(n.fetch_array=[]),n.fetch_array.push(c.liveroom_cs.StUserTransFetch.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Pe),o.StUserTransFetch=(Ae.prototype.trans_type=a.newBuffer([]),Ae.prototype.trans_local_seq=0,Ae.create=function(e){return new Ae(e)},Ae.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_local_seq&&Object.hasOwnProperty.call(e,"trans_local_seq")&&t.uint32(16).uint32(e.trans_local_seq),t},Ae.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StUserTransFetch;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_local_seq=e.uint32();break;default:e.skipType(7&o)}}return n},Ae),o.UserTransFetchRsp=(Me.prototype.rsp_head=null,Me.prototype.trans_channel=a.newBuffer([]),Me.prototype.trans_fetch_results=a.emptyArray,Me.create=function(e){return new Me(e)},Me.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(18).bytes(e.trans_channel),null!=e.trans_fetch_results&&e.trans_fetch_results.length)for(var r=0;r<e.trans_fetch_results.length;++r)c.liveroom_cs.StUserTransFetchResult.encode(e.trans_fetch_results[r],t.uint32(26).fork()).ldelim();return t},Me.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.UserTransFetchRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.trans_channel=e.bytes();break;case 3:n.trans_fetch_results&&n.trans_fetch_results.length||(n.trans_fetch_results=[]),n.trans_fetch_results.push(c.liveroom_cs.StUserTransFetchResult.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Me),o.StUserTransFetchResult=(we.prototype.trans_type=a.newBuffer([]),we.prototype.trans_data=a.newBuffer([]),we.prototype.trans_idname=a.newBuffer([]),we.prototype.trans_nickname=a.newBuffer([]),we.prototype.trans_role=0,we.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,we.prototype.trans_seq=0,we.prototype.err_code=0,we.create=function(e){return new we(e)},we.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(48).int64(e.trans_send_time),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(56).uint32(e.trans_seq),null!=e.err_code&&Object.hasOwnProperty.call(e,"err_code")&&t.uint32(64).int32(e.err_code),t},we.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StUserTransFetchResult;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_send_time=e.int64();break;case 7:n.trans_seq=e.uint32();break;case 8:n.err_code=e.int32();break;default:e.skipType(7&o)}}return n},we),o.BigimChatReq=(De.prototype.req_head=null,De.prototype.nick_name=a.newBuffer([]),De.prototype.role=0,De.prototype.msgs=a.emptyArray,De.create=function(e){return new De(e)},De.encode=function(e,t){if(t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)c.liveroom_cs.StBigimChatData.encode(e.msgs[r],t.uint32(34).fork()).ldelim();return t},De.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.BigimChatReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(c.liveroom_cs.StBigimChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},De),o.StBigimChatData=(Ue.prototype.msg_category=0,Ue.prototype.msg_type=0,Ue.prototype.msg_content=a.newBuffer([]),Ue.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,Ue.prototype.bigmsg_client_id=a.newBuffer([]),Ue.create=function(e){return new Ue(e)},Ue.encode=function(e,t){return t=t||i.create(),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(8).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(16).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(26).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(32).int64(e.msg_timestamp),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(42).bytes(e.bigmsg_client_id),t},Ue.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StBigimChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.msg_category=e.uint32();break;case 2:n.msg_type=e.uint32();break;case 3:n.msg_content=e.bytes();break;case 4:n.msg_timestamp=e.int64();break;case 5:n.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return n},Ue),o.BigimChatRsp=(He.prototype.rsp_head=null,He.prototype.bigim_time_window=0,He.prototype.msgs=a.emptyArray,He.create=function(e){return new He(e)},He.encode=function(e,t){if(t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.bigim_time_window&&Object.hasOwnProperty.call(e,"bigim_time_window")&&t.uint32(16).uint32(e.bigim_time_window),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)c.liveroom_cs.StBigimChatRspData.encode(e.msgs[r],t.uint32(26).fork()).ldelim();return t},He.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.BigimChatRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.bigim_time_window=e.uint32();break;case 3:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(c.liveroom_cs.StBigimChatRspData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},He),o.StBigimChatRspData=(Be.prototype.bigmsg_id=a.newBuffer([]),Be.prototype.bigmsg_client_id=a.newBuffer([]),Be.create=function(e){return new Be(e)},Be.encode=function(e,t){return t=t||i.create(),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(10).bytes(e.bigmsg_id),null!=e.bigmsg_client_id&&Object.hasOwnProperty.call(e,"bigmsg_client_id")&&t.uint32(18).bytes(e.bigmsg_client_id),t},Be.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StBigimChatRspData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.bigmsg_id=e.bytes();break;case 2:n.bigmsg_client_id=e.bytes();break;default:e.skipType(7&o)}}return n},Be),o.RelayReq=(qe.prototype.req_head=null,qe.prototype.nick_name=a.newBuffer([]),qe.prototype.role=0,qe.prototype.relay_type=a.newBuffer([]),qe.prototype.relay_data=a.newBuffer([]),qe.create=function(e){return new qe(e)},qe.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.relay_type&&Object.hasOwnProperty.call(e,"relay_type")&&t.uint32(34).bytes(e.relay_type),null!=e.relay_data&&Object.hasOwnProperty.call(e,"relay_data")&&t.uint32(42).bytes(e.relay_data),t},qe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RelayReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.relay_type=e.bytes();break;case 5:n.relay_data=e.bytes();break;default:e.skipType(7&o)}}return n},qe),o.RelayRsp=(je.prototype.rsp_head=null,je.prototype.reley_type=a.newBuffer([]),je.prototype.relay_result=a.newBuffer([]),je.create=function(e){return new je(e)},je.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.reley_type&&Object.hasOwnProperty.call(e,"reley_type")&&t.uint32(18).bytes(e.reley_type),null!=e.relay_result&&Object.hasOwnProperty.call(e,"relay_result")&&t.uint32(26).bytes(e.relay_result),t},je.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RelayRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.reley_type=e.bytes();break;case 3:n.relay_result=e.bytes();break;default:e.skipType(7&o)}}return n},je),o.RenewTokenReq=(xe.prototype.req_head=null,xe.prototype.token="",xe.create=function(e){return new xe(e)},xe.encode=function(e,t){return t=t||i.create(),null!=e.req_head&&Object.hasOwnProperty.call(e,"req_head")&&c.liveroom_cs.ReqHead.encode(e.req_head,t.uint32(10).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),t},xe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RenewTokenReq;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.req_head=c.liveroom_cs.ReqHead.decode(e,e.uint32());break;case 2:n.token=e.string();break;default:e.skipType(7&o)}}return n},xe),o.RenewTokenRsp=(Ge.prototype.rsp_head=null,Ge.prototype.token_remain_time=0,Ge.create=function(e){return new Ge(e)},Ge.encode=function(e,t){return t=t||i.create(),null!=e.rsp_head&&Object.hasOwnProperty.call(e,"rsp_head")&&c.liveroom_cs.RspHead.encode(e.rsp_head,t.uint32(10).fork()).ldelim(),null!=e.token_remain_time&&Object.hasOwnProperty.call(e,"token_remain_time")&&t.uint32(16).uint32(e.token_remain_time),t},Ge.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.RenewTokenRsp;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.rsp_head=c.liveroom_cs.RspHead.decode(e,e.uint32());break;case 2:n.token_remain_time=e.uint32();break;default:e.skipType(7&o)}}return n},Ge),o.UserAction=(ze.prototype.action=0,ze.prototype.id_name=a.newBuffer([]),ze.prototype.nick_name=a.newBuffer([]),ze.prototype.role=0,ze.prototype.login_time=a.Long?a.Long.fromBits(0,0,!1):0,ze.create=function(e){return new ze(e)},ze.encode=function(e,t){return t=t||i.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).uint32(e.action),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(18).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(26).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).uint32(e.role),null!=e.login_time&&Object.hasOwnProperty.call(e,"login_time")&&t.uint32(40).int64(e.login_time),t},ze.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.UserAction;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.action=e.uint32();break;case 2:n.id_name=e.bytes();break;case 3:n.nick_name=e.bytes();break;case 4:n.role=e.uint32();break;case 5:n.login_time=e.int64();break;default:e.skipType(7&o)}}return n},ze),o.PushUserInfoUpdated=(Ve.prototype.room_id=a.newBuffer([]),Ve.prototype.server_user_seq=a.Long?a.Long.fromBits(0,0,!1):0,Ve.prototype.user_list=a.emptyArray,Ve.create=function(e){return new Ve(e)},Ve.encode=function(e,t){if(t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_user_seq&&Object.hasOwnProperty.call(e,"server_user_seq")&&t.uint32(16).int64(e.server_user_seq),null!=e.user_list&&e.user_list.length)for(var r=0;r<e.user_list.length;++r)c.liveroom_cs.UserAction.encode(e.user_list[r],t.uint32(26).fork()).ldelim();return t},Ve.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushUserInfoUpdated;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.server_user_seq=e.int64();break;case 3:n.user_list&&n.user_list.length||(n.user_list=[]),n.user_list.push(c.liveroom_cs.UserAction.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ve),o.PushUserKickout=(We.prototype.id_name=a.newBuffer([]),We.prototype.room_id=a.newBuffer([]),We.prototype.session_id=a.Long?a.Long.fromBits(0,0,!0):0,We.prototype.kickout_reason=0,We.prototype.custom_reason=a.newBuffer([]),We.create=function(e){return new We(e)},We.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(24).uint64(e.session_id),null!=e.kickout_reason&&Object.hasOwnProperty.call(e,"kickout_reason")&&t.uint32(32).int32(e.kickout_reason),null!=e.custom_reason&&Object.hasOwnProperty.call(e,"custom_reason")&&t.uint32(42).bytes(e.custom_reason),t},We.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushUserKickout;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.room_id=e.bytes();break;case 3:n.session_id=e.uint64();break;case 4:n.kickout_reason=e.int32();break;case 5:n.custom_reason=e.bytes();break;default:e.skipType(7&o)}}return n},We),o.PushUserLogReport=(Ze.create=function(e){return new Ze(e)},Ze.encode=function(e,t){return t||i.create()},Ze.decode=function(e,t){e instanceof s||(e=s.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new c.liveroom_cs.PushUserLogReport;e.pos<r;){var n=e.uint32();e.skipType(7&n)}return t},Ze),o.PushUserTokenExpire=(Ye.prototype.room_id=a.newBuffer([]),Ye.prototype.token="",Ye.prototype.stop_stream=null,Ye.create=function(e){return new Ye(e)},Ye.encode=function(e,t){return t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),null!=e.stop_stream&&Object.hasOwnProperty.call(e,"stop_stream")&&c.liveroom_cs.StopStream.encode(e.stop_stream,t.uint32(26).fork()).ldelim(),t},Ye.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushUserTokenExpire;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.token=e.string();break;case 3:n.stop_stream=c.liveroom_cs.StopStream.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},Ye),o.StopStream=(Fe.prototype.stream_id_list=a.emptyArray,Fe.create=function(e){return new Fe(e)},Fe.encode=function(e,t){if(t=t||i.create(),null!=e.stream_id_list&&e.stream_id_list.length)for(var r=0;r<e.stream_id_list.length;++r)t.uint32(10).bytes(e.stream_id_list[r]);return t},Fe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StopStream;e.pos<r;){var o=e.uint32();o>>>3==1?(n.stream_id_list&&n.stream_id_list.length||(n.stream_id_list=[]),n.stream_id_list.push(e.bytes())):e.skipType(7&o)}return n},Fe),o.PushStream=(Ke.prototype.room_id=a.newBuffer([]),Ke.prototype.stream_seq=0,Ke.prototype.stream_info=a.emptyArray,Ke.create=function(e){return new Ke(e)},Ke.encode=function(e,t){if(t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.stream_seq&&Object.hasOwnProperty.call(e,"stream_seq")&&t.uint32(16).uint32(e.stream_seq),null!=e.stream_info&&e.stream_info.length)for(var r=0;r<e.stream_info.length;++r)c.liveroom_cs.StPushStreamInfo.encode(e.stream_info[r],t.uint32(26).fork()).ldelim();return t},Ke.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushStream;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.stream_seq=e.uint32();break;case 3:n.stream_info&&n.stream_info.length||(n.stream_info=[]),n.stream_info.push(c.liveroom_cs.StPushStreamInfo.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Ke),o.StPushStreamInfo=(Qe.prototype.stream_id=a.newBuffer([]),Qe.prototype.stream_sid="",Qe.prototype.id_name=a.newBuffer([]),Qe.prototype.nick_name=a.newBuffer([]),Qe.prototype.extra_info=a.newBuffer([]),Qe.prototype.title=a.newBuffer([]),Qe.prototype.third_define_data=a.newBuffer([]),Qe.prototype.create_time=a.Long?a.Long.fromBits(0,0,!1):0,Qe.prototype.req_seq=0,Qe.prototype.stream_ver=0,Qe.prototype.stream_attr=a.newBuffer([]),Qe.prototype.stream_src=0,Qe.prototype.stream_state=0,Qe.prototype.stream_type=0,Qe.prototype.stream_nid=0,Qe.prototype.close_type=0,Qe.create=function(e){return new Qe(e)},Qe.encode=function(e,t){return t=t||i.create(),null!=e.stream_id&&Object.hasOwnProperty.call(e,"stream_id")&&t.uint32(10).bytes(e.stream_id),null!=e.stream_sid&&Object.hasOwnProperty.call(e,"stream_sid")&&t.uint32(18).string(e.stream_sid),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(26).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(34).bytes(e.nick_name),null!=e.extra_info&&Object.hasOwnProperty.call(e,"extra_info")&&t.uint32(42).bytes(e.extra_info),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(50).bytes(e.title),null!=e.third_define_data&&Object.hasOwnProperty.call(e,"third_define_data")&&t.uint32(58).bytes(e.third_define_data),null!=e.create_time&&Object.hasOwnProperty.call(e,"create_time")&&t.uint32(64).int64(e.create_time),null!=e.req_seq&&Object.hasOwnProperty.call(e,"req_seq")&&t.uint32(72).uint32(e.req_seq),null!=e.stream_ver&&Object.hasOwnProperty.call(e,"stream_ver")&&t.uint32(80).uint32(e.stream_ver),null!=e.stream_attr&&Object.hasOwnProperty.call(e,"stream_attr")&&t.uint32(90).bytes(e.stream_attr),null!=e.stream_src&&Object.hasOwnProperty.call(e,"stream_src")&&t.uint32(96).uint32(e.stream_src),null!=e.stream_state&&Object.hasOwnProperty.call(e,"stream_state")&&t.uint32(104).uint32(e.stream_state),null!=e.stream_type&&Object.hasOwnProperty.call(e,"stream_type")&&t.uint32(112).uint32(e.stream_type),null!=e.stream_nid&&Object.hasOwnProperty.call(e,"stream_nid")&&t.uint32(120).uint32(e.stream_nid),null!=e.close_type&&Object.hasOwnProperty.call(e,"close_type")&&t.uint32(128).uint32(e.close_type),t},Qe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StPushStreamInfo;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.stream_id=e.bytes();break;case 2:n.stream_sid=e.string();break;case 3:n.id_name=e.bytes();break;case 4:n.nick_name=e.bytes();break;case 5:n.extra_info=e.bytes();break;case 6:n.title=e.bytes();break;case 7:n.third_define_data=e.bytes();break;case 8:n.create_time=e.int64();break;case 9:n.req_seq=e.uint32();break;case 10:n.stream_ver=e.uint32();break;case 11:n.stream_attr=e.bytes();break;case 12:n.stream_src=e.uint32();break;case 13:n.stream_state=e.uint32();break;case 14:n.stream_type=e.uint32();break;case 15:n.stream_nid=e.uint32();break;case 16:n.close_type=e.uint32();break;default:e.skipType(7&o)}}return n},Qe),o.PushImChat=(Xe.prototype.room_id=a.newBuffer([]),Xe.prototype.server_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Xe.prototype.ret_msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Xe.prototype.msg_data=a.emptyArray,Xe.create=function(e){return new Xe(e)},Xe.encode=function(e,t){if(t=t||i.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).bytes(e.room_id),null!=e.server_msg_id&&Object.hasOwnProperty.call(e,"server_msg_id")&&t.uint32(16).uint64(e.server_msg_id),null!=e.ret_msg_id&&Object.hasOwnProperty.call(e,"ret_msg_id")&&t.uint32(24).uint64(e.ret_msg_id),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},Xe.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushImChat;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.room_id=e.bytes();break;case 2:n.server_msg_id=e.uint64();break;case 3:n.ret_msg_id=e.uint64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(c.liveroom_cs.StImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},Xe),o.StImChatData=(Je.prototype.id_name=a.newBuffer([]),Je.prototype.nick_name=a.newBuffer([]),Je.prototype.role=0,Je.prototype.msg_id=a.Long?a.Long.fromBits(0,0,!0):0,Je.prototype.msg_category=0,Je.prototype.msg_type=0,Je.prototype.msg_priority=0,Je.prototype.msg_content=a.newBuffer([]),Je.prototype.send_time=a.Long?a.Long.fromBits(0,0,!1):0,Je.create=function(e){return new Je(e)},Je.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).uint64(e.msg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_priority&&Object.hasOwnProperty.call(e,"msg_priority")&&t.uint32(56).uint32(e.msg_priority),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(66).bytes(e.msg_content),null!=e.send_time&&Object.hasOwnProperty.call(e,"send_time")&&t.uint32(72).int64(e.send_time),t},Je.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StImChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.msg_id=e.uint64();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_priority=e.uint32();break;case 8:n.msg_content=e.bytes();break;case 9:n.send_time=e.int64();break;default:e.skipType(7&o)}}return n},Je),o.PushBigImChat=($e.prototype.app_id=0,$e.prototype.room_id=a.newBuffer([]),$e.prototype.timestamp=a.Long?a.Long.fromBits(0,0,!1):0,$e.prototype.msg_data=a.emptyArray,$e.create=function(e){return new $e(e)},$e.encode=function(e,t){if(t=t||i.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.msg_data&&e.msg_data.length)for(var r=0;r<e.msg_data.length;++r)c.liveroom_cs.StBigImChatData.encode(e.msg_data[r],t.uint32(34).fork()).ldelim();return t},$e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushBigImChat;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.timestamp=e.int64();break;case 4:n.msg_data&&n.msg_data.length||(n.msg_data=[]),n.msg_data.push(c.liveroom_cs.StBigImChatData.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},$e),o.StBigImChatData=(et.prototype.id_name=a.newBuffer([]),et.prototype.nick_name=a.newBuffer([]),et.prototype.role=0,et.prototype.bigmsg_id=a.newBuffer([]),et.prototype.msg_category=0,et.prototype.msg_type=0,et.prototype.msg_content=a.newBuffer([]),et.prototype.msg_timestamp=a.Long?a.Long.fromBits(0,0,!1):0,et.create=function(e){return new et(e)},et.encode=function(e,t){return t=t||i.create(),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(10).bytes(e.id_name),null!=e.nick_name&&Object.hasOwnProperty.call(e,"nick_name")&&t.uint32(18).bytes(e.nick_name),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).uint32(e.role),null!=e.bigmsg_id&&Object.hasOwnProperty.call(e,"bigmsg_id")&&t.uint32(34).bytes(e.bigmsg_id),null!=e.msg_category&&Object.hasOwnProperty.call(e,"msg_category")&&t.uint32(40).uint32(e.msg_category),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(48).uint32(e.msg_type),null!=e.msg_content&&Object.hasOwnProperty.call(e,"msg_content")&&t.uint32(58).bytes(e.msg_content),null!=e.msg_timestamp&&Object.hasOwnProperty.call(e,"msg_timestamp")&&t.uint32(64).int64(e.msg_timestamp),t},et.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StBigImChatData;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.id_name=e.bytes();break;case 2:n.nick_name=e.bytes();break;case 3:n.role=e.uint32();break;case 4:n.bigmsg_id=e.bytes();break;case 5:n.msg_category=e.uint32();break;case 6:n.msg_type=e.uint32();break;case 7:n.msg_content=e.bytes();break;case 8:n.msg_timestamp=e.int64();break;default:e.skipType(7&o)}}return n},et),o.PushTrans=(tt.prototype.app_id=0,tt.prototype.room_id=a.newBuffer([]),tt.prototype.trans_idname=a.newBuffer([]),tt.prototype.trans_nickname=a.newBuffer([]),tt.prototype.trans_role=0,tt.prototype.trans_type=a.newBuffer([]),tt.prototype.trans_data=a.newBuffer([]),tt.prototype.trans_seq=0,tt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,tt.prototype.trans_channel=a.newBuffer([]),tt.prototype.trans_list_seq=0,tt.create=function(e){return new tt(e)},tt.encode=function(e,t){return t=t||i.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(50).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(58).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(64).uint32(e.trans_seq),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_list_seq&&Object.hasOwnProperty.call(e,"trans_list_seq")&&t.uint32(88).uint32(e.trans_list_seq),t},tt.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushTrans;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 6:n.trans_type=e.bytes();break;case 7:n.trans_data=e.bytes();break;case 8:n.trans_seq=e.uint32();break;case 9:n.trans_send_time=e.int64();break;case 10:n.trans_channel=e.bytes();break;case 11:n.trans_list_seq=e.uint32();break;default:e.skipType(7&o)}}return n},tt),o.PushUserTrans=(rt.prototype.app_id=0,rt.prototype.room_id=a.newBuffer([]),rt.prototype.trans_idname=a.newBuffer([]),rt.prototype.trans_nickname=a.newBuffer([]),rt.prototype.trans_role=0,rt.prototype.trans_send_time=a.Long?a.Long.fromBits(0,0,!1):0,rt.prototype.trans_channel=a.newBuffer([]),rt.prototype.trans_array=a.emptyArray,rt.create=function(e){return new rt(e)},rt.encode=function(e,t){if(t=t||i.create(),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(8).uint32(e.app_id),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(18).bytes(e.room_id),null!=e.trans_idname&&Object.hasOwnProperty.call(e,"trans_idname")&&t.uint32(26).bytes(e.trans_idname),null!=e.trans_nickname&&Object.hasOwnProperty.call(e,"trans_nickname")&&t.uint32(34).bytes(e.trans_nickname),null!=e.trans_role&&Object.hasOwnProperty.call(e,"trans_role")&&t.uint32(40).uint32(e.trans_role),null!=e.trans_send_time&&Object.hasOwnProperty.call(e,"trans_send_time")&&t.uint32(72).int64(e.trans_send_time),null!=e.trans_channel&&Object.hasOwnProperty.call(e,"trans_channel")&&t.uint32(82).bytes(e.trans_channel),null!=e.trans_array&&e.trans_array.length)for(var r=0;r<e.trans_array.length;++r)c.liveroom_cs.StTransSimple.encode(e.trans_array[r],t.uint32(90).fork()).ldelim();return t},rt.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.PushUserTrans;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.app_id=e.uint32();break;case 2:n.room_id=e.bytes();break;case 3:n.trans_idname=e.bytes();break;case 4:n.trans_nickname=e.bytes();break;case 5:n.trans_role=e.uint32();break;case 9:n.trans_send_time=e.int64();break;case 10:n.trans_channel=e.bytes();break;case 11:n.trans_array&&n.trans_array.length||(n.trans_array=[]),n.trans_array.push(c.liveroom_cs.StTransSimple.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},rt),o.StTransSimple=(nt.prototype.trans_type=a.newBuffer([]),nt.prototype.trans_data=a.newBuffer([]),nt.prototype.trans_seq=0,nt.create=function(e){return new nt(e)},nt.encode=function(e,t){return t=t||i.create(),null!=e.trans_type&&Object.hasOwnProperty.call(e,"trans_type")&&t.uint32(10).bytes(e.trans_type),null!=e.trans_data&&Object.hasOwnProperty.call(e,"trans_data")&&t.uint32(18).bytes(e.trans_data),null!=e.trans_seq&&Object.hasOwnProperty.call(e,"trans_seq")&&t.uint32(24).uint32(e.trans_seq),t},nt.decode=function(e,t){e instanceof s||(e=s.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new c.liveroom_cs.StTransSimple;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.trans_type=e.bytes();break;case 2:n.trans_data=e.bytes();break;case 3:n.trans_seq=e.uint32();break;default:e.skipType(7&o)}}return n},nt),o),e.exports=c},function(e,t,r){var n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},i={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=i[e])?n:(r=l(e,0,!0),o&&(i[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=s[e])?n:(r=l(e,e<0?-1:0,!1),o&&(s[e]=r),r)}function c(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(d<=e)return b}else{if(e<=-f)return O;if(f<=e+1)return v}return e<0?c(-e,t).neg():l(e%_|0,e/_|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=l;var u=Math.pow;function h(e,t,r){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(r=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?y:m;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return h(e.substring(1),t,r).neg();for(var o=c(u(r,8)),s=m,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+a),r);s=a<8?(a=c(u(r,a)),s.mul(a).add(c(l))):(s=s.mul(o)).add(c(l))}return s.unsigned=t,s}function p(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?h(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=p;var _=4294967296,d=_*_,f=d/2,g=a(1<<24),m=a(0),y=(r.ZERO=m,a(0,!0)),E=(r.UZERO=y,a(1)),T=(r.ONE=E,a(1,!0)),S=(r.UONE=T,a(-1)),v=(r.NEG_ONE=S,l(-1,2147483647,!1)),b=(r.MAX_VALUE=v,l(-1,-1,!0)),O=(r.MAX_UNSIGNED_VALUE=b,l(0,-2147483648,!1)),R=(r.MIN_VALUE=O,r.prototype);return R.toInt=function(){return this.unsigned?this.low>>>0:this.low},R.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},R.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(O)?(r=c(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var n=c(u(e,6),this.unsigned),o=this,s="";;){var i=o.div(n),a=(o.sub(i.mul(n)).toInt()>>>0).toString(e);if((o=i).isZero())return a+s;for(;a.length<6;)a="0"+a;s=""+a+s}},R.getHighBits=function(){return this.high},R.getHighBitsUnsigned=function(){return this.high>>>0},R.getLowBits=function(){return this.low},R.getLowBitsUnsigned=function(){return this.low>>>0},R.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},R.isZero=function(){return 0===this.high&&0===this.low},R.eqz=R.isZero,R.isNegative=function(){return!this.unsigned&&this.high<0},R.isPositive=function(){return this.unsigned||0<=this.high},R.isOdd=function(){return 1==(1&this.low)},R.isEven=function(){return 0==(1&this.low)},R.equals=function(e){return n(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},R.eq=R.equals,R.notEquals=function(e){return!this.eq(e)},R.neq=R.notEquals,R.ne=R.notEquals,R.lessThan=function(e){return this.comp(e)<0},R.lt=R.lessThan,R.lessThanOrEqual=function(e){return this.comp(e)<=0},R.lte=R.lessThanOrEqual,R.le=R.lessThanOrEqual,R.greaterThan=function(e){return 0<this.comp(e)},R.gt=R.greaterThan,R.greaterThanOrEqual=function(e){return 0<=this.comp(e)},R.gte=R.greaterThanOrEqual,R.ge=R.greaterThanOrEqual,R.compare=function(e){if(n(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},R.comp=R.compare,R.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(E)},R.neg=R.negate,R.add=function(e){n(e)||(e=p(e));var t=0,r=0,o=0,s=0;return r+=(o=o+((s+=(65535&this.low)+(65535&e.low))>>>16)+((this.low>>>16)+(e.low>>>16)))>>>16,l((o&=65535)<<16|(s&=65535),((t+=(r+=(65535&this.high)+(65535&e.high))>>>16)+((this.high>>>16)+(e.high>>>16))&65535)<<16|(r&=65535),this.unsigned)},R.subtract=function(e){return n(e)||(e=p(e)),this.add(e.neg())},R.sub=R.subtract,R.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=p(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?y:m;if(this.eq(O))return e.isOdd()?O:m;if(e.eq(O))return this.isOdd()?O:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=65535&this.high,o=this.low>>>16,s=65535&this.low,i=e.high>>>16,a=65535&e.high,u=e.low>>>16,h=0,_=0,d=0,f=(f=0)+((_=_+((d+=s*(e=65535&e.low))>>>16)+o*e)>>>16)+((_=(65535&_)+s*u)>>>16);return l((_&=65535)<<16|(d&=65535),((h+=(f+=r*e)>>>16)+((f=(65535&f)+o*u)>>>16)+((f=(65535&f)+s*a)>>>16)+((this.high>>>16)*e+r*u+o*a+s*i)&65535)<<16|(f&=65535),this.unsigned)},R.mul=R.multiply,R.divide=function(e){if((e=n(e)?e:p(e)).isZero())throw Error("division by zero");var r,o,s;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return y;if(e.gt(this.shru(1)))return T;o=y}else{if(this.eq(O))return e.eq(E)||e.eq(S)?O:e.eq(O)?E:(s=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?E:S:(r=this.sub(e.mul(s)),s.add(r.div(e)));if(e.eq(O))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(r=this;r.gte(e);){s=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(s)/Math.LN2),a=i<=48?1:u(2,i-48),h=c(s),_=h.mul(e);_.isNegative()||_.gt(r);)_=(h=c(s-=a,this.unsigned)).mul(e);h.isZero()&&(h=E),o=o.add(h),r=r.sub(_)}return o},R.div=R.divide,R.modulo=function(e){return n(e)||(e=p(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},R.mod=R.modulo,R.rem=R.modulo,R.not=function(){return l(~this.low,~this.high,this.unsigned)},R.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},R.clz=R.countLeadingZeros,R.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},R.ctz=R.countTrailingZeros,R.and=function(e){return n(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},R.or=function(e){return n(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},R.xor=function(e){return n(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},R.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},R.shl=R.shiftLeft,R.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},R.shr=R.shiftRight,R.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):l(32===e?this.high:this.high>>>e-32,0,this.unsigned)},R.shru=R.shiftRightUnsigned,R.shr_u=R.shiftRightUnsigned,R.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?l(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):l(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},R.rotl=R.rotateLeft,R.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?l(this.high,this.low,this.unsigned):e<32?l(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):l(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},R.rotr=R.rotateRight,R.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},R.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},R.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},R.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},R.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=r,"default"in e?e.default:e}({});void 0!==(t=function(){return n}.apply(t,[]))&&(e.exports=t)},function(e,t,r){(function(t){var n;e.exports=(n=function(e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),!(n=!(n=!(n="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:n)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:n)&&void 0!==t&&t.crypto?t.crypto:n))try{n=r(16)}catch(i){}var o=Object.create||function(e){return s.prototype=e,e=new s,s.prototype=null,e};function s(){}var i={},a=i.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,o=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<o;s++)t[n+s>>>2]|=(r[s>>>2]>>>24-s%4*8&255)<<24-(n+s)%4*8;else for(var i=0;i<o;i+=4)t[n+i>>>2]=r[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new l.init(t,e)}}),u=i.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++){var s=t[o>>>2]>>>24-o%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],o=0;o<r;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},_=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=_.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,o=n.words,s=n.sigBytes,i=this.blockSize,a=s/(4*i),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*i;if(t=e.min(4*c,s),c){for(var u=0;u<c;u+=i)this._doProcessBlock(o,u);r=o.splice(0,c),n.sigBytes-=t}return new l.init(r,t)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(a.Hasher=d.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new f.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math),n)}).call(this,r(10))},function(e,t,r){e.exports=function(e){for(var t=e,r=t.lib.BlockCipher,n=t.algo,o=[],s=[],i=[],a=[],c=[],l=[],u=[],h=[],p=[],_=[],d=[],f=0;f<256;f++)d[f]=f<128?f<<1:f<<1^283;var g=0,m=0;for(f=0;f<256;f++){var y=m^m<<1^m<<2^m<<3^m<<4;o[g]=y=y>>>8^255&y^99,s[y]=g;var E=d[g],T=d[E],S=d[T],v=257*d[y]^16843008*y;i[g]=v<<24|v>>>8,a[g]=v<<16|v>>>16,c[g]=v<<8|v>>>24,l[g]=v,u[y]=(v=16843009*S^65537*T^257*E^16843008*g)<<24|v>>>8,h[y]=v<<16|v>>>16,p[y]=v<<8|v>>>24,_[y]=v,g?(g=E^d[d[d[S^E]]],m^=d[d[m]]):g=m=1}var b=[0,1,2,4,8,16,32,64,128,27,54],O=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],i=0;i<n;i++)i<r?s[i]=t[i]:(l=s[i-1],i%r?r>6&&i%r==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=o[(l=l<<8|l>>>24)>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=b[i/r|0]<<24),s[i]=s[i-r]^l);for(var a=this._invKeySchedule=[],c=0;c<n;c++){if(i=n-c,c%4)var l=s[i];else l=s[i-4];a[c]=c<4||i<=4?l:u[o[l>>>24]]^h[o[l>>>16&255]]^p[o[l>>>8&255]]^_[o[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,c,l,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,h,p,_,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,o,s,i,a){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],h=e[t+2]^r[2],p=e[t+3]^r[3],_=4,d=1;d<c;d++){var f=n[l>>>24]^o[u>>>16&255]^s[h>>>8&255]^i[255&p]^r[_++],g=n[u>>>24]^o[h>>>16&255]^s[p>>>8&255]^i[255&l]^r[_++],m=n[h>>>24]^o[p>>>16&255]^s[l>>>8&255]^i[255&u]^r[_++],y=n[p>>>24]^o[l>>>16&255]^s[u>>>8&255]^i[255&h]^r[_++];l=f,u=g,h=m,p=y}f=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[h>>>8&255]<<8|a[255&p])^r[_++],g=(a[u>>>24]<<24|a[h>>>16&255]<<16|a[p>>>8&255]<<8|a[255&l])^r[_++],m=(a[h>>>24]<<24|a[p>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^r[_++],y=(a[p>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&h])^r[_++],e[t]=f,e[t+1]=g,e[t+2]=m,e[t+3]=y},keySize:8});return t.AES=r._createHelper(O),e.AES}(r(2),(r(17),r(4),r(11),r(20)))},function(e,t,r){e.exports=function(e){for(var t=Math,r=e,n=r.lib,o=n.WordArray,s=n.Hasher,i=r.algo,a=[],c=0;c<64;c++)a[c]=4294967296*t.abs(t.sin(c+1))|0;var l=i.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,o=e[n];e[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var s=this._hash.words,i=e[t+0],c=e[t+1],l=e[t+2],d=e[t+3],f=e[t+4],g=e[t+5],m=e[t+6],y=e[t+7],E=e[t+8],T=e[t+9],S=e[t+10],v=e[t+11],b=e[t+12],O=e[t+13],R=e[t+14],C=e[t+15],I=s[0],N=s[1],k=s[2],L=s[3];I=u(I,N,k,L,i,7,a[0]),L=u(L,I,N,k,c,12,a[1]),k=u(k,L,I,N,l,17,a[2]),N=u(N,k,L,I,d,22,a[3]),I=u(I,N,k,L,f,7,a[4]),L=u(L,I,N,k,g,12,a[5]),k=u(k,L,I,N,m,17,a[6]),N=u(N,k,L,I,y,22,a[7]),I=u(I,N,k,L,E,7,a[8]),L=u(L,I,N,k,T,12,a[9]),k=u(k,L,I,N,S,17,a[10]),N=u(N,k,L,I,v,22,a[11]),I=u(I,N,k,L,b,7,a[12]),L=u(L,I,N,k,O,12,a[13]),k=u(k,L,I,N,R,17,a[14]),I=h(I,N=u(N,k,L,I,C,22,a[15]),k,L,c,5,a[16]),L=h(L,I,N,k,m,9,a[17]),k=h(k,L,I,N,v,14,a[18]),N=h(N,k,L,I,i,20,a[19]),I=h(I,N,k,L,g,5,a[20]),L=h(L,I,N,k,S,9,a[21]),k=h(k,L,I,N,C,14,a[22]),N=h(N,k,L,I,f,20,a[23]),I=h(I,N,k,L,T,5,a[24]),L=h(L,I,N,k,R,9,a[25]),k=h(k,L,I,N,d,14,a[26]),N=h(N,k,L,I,E,20,a[27]),I=h(I,N,k,L,O,5,a[28]),L=h(L,I,N,k,l,9,a[29]),k=h(k,L,I,N,y,14,a[30]),I=p(I,N=h(N,k,L,I,b,20,a[31]),k,L,g,4,a[32]),L=p(L,I,N,k,E,11,a[33]),k=p(k,L,I,N,v,16,a[34]),N=p(N,k,L,I,R,23,a[35]),I=p(I,N,k,L,c,4,a[36]),L=p(L,I,N,k,f,11,a[37]),k=p(k,L,I,N,y,16,a[38]),N=p(N,k,L,I,S,23,a[39]),I=p(I,N,k,L,O,4,a[40]),L=p(L,I,N,k,i,11,a[41]),k=p(k,L,I,N,d,16,a[42]),N=p(N,k,L,I,m,23,a[43]),I=p(I,N,k,L,T,4,a[44]),L=p(L,I,N,k,b,11,a[45]),k=p(k,L,I,N,C,16,a[46]),I=_(I,N=p(N,k,L,I,l,23,a[47]),k,L,i,6,a[48]),L=_(L,I,N,k,y,10,a[49]),k=_(k,L,I,N,R,15,a[50]),N=_(N,k,L,I,g,21,a[51]),I=_(I,N,k,L,b,6,a[52]),L=_(L,I,N,k,d,10,a[53]),k=_(k,L,I,N,S,15,a[54]),N=_(N,k,L,I,c,21,a[55]),I=_(I,N,k,L,E,6,a[56]),L=_(L,I,N,k,C,10,a[57]),k=_(k,L,I,N,m,15,a[58]),N=_(N,k,L,I,O,21,a[59]),I=_(I,N,k,L,f,6,a[60]),L=_(L,I,N,k,v,10,a[61]),k=_(k,L,I,N,l,15,a[62]),N=_(N,k,L,I,T,21,a[63]),s[0]=s[0]+I|0,s[1]=s[1]+N|0,s[2]=s[2]+k|0,s[3]=s[3]+L|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;r[o>>>5]|=128<<24-o%32;var s=t.floor(n/4294967296),i=n;r[15+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,n,o,s,i){var a=e+(t&r|~t&n)+o+i;return(a<<s|a>>>32-s)+t}function h(e,t,r,n,o,s,i){var a=e+(t&n|r&~n)+o+i;return(a<<s|a>>>32-s)+t}function p(e,t,r,n,o,s,i){var a=e+(t^r^n)+o+i;return(a<<s|a>>>32-s)+t}function _(e,t,r,n,o,s,i){var a=e+(r^(t|~n))+o+i;return(a<<s|a>>>32-s)+t}return r.MD5=s._createHelper(l),r.HmacMD5=s._createHmacHelper(l),e.MD5}(r(2))},function(e,t,r){function n(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,s;e.exports=(o=[function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_ENV=t.ZEGO_BROWSER_TYPE=void 0,(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(n=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[n.ClientType_None=0]="ClientType_None",n[n.ClientType_H5=1]="ClientType_H5",n[n.ClientType_SmallPragram=2]="ClientType_SmallPragram",n[n.ClientType_Webrtc=3]="ClientType_Webrtc"},function(e,t,r){"use strict";function n(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=void 0,n.getInstance=function(){return n.instance||(n.instance=new n).init(),n.instance},n.prototype.init=function(){},Object.defineProperty(n.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),n.instance=new n,t.LoggerStateCenter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var n=r(0),o=(s.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},s.prototype.onopen=function(e){},s.prototype.onerror=function(e){},s.prototype.onclose=function(e){},s.prototype.onmessage=function(e){},s.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},s.prototype.close=function(){this._websocket&&this._websocket.close()},s);function s(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=o,t.createZegoWebSocket=function(e,t){return new(t%2===n.ZEGO_ENV.BROWSER?WebSocket:o)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerStateCenter=t.createZegoWebSocket=t.ZegoDataReport=t.ZegoLogger=void 0;var n=r(1),o=(Object.defineProperty(t,"LoggerStateCenter",{enumerable:!0,get:function(){return n.LoggerStateCenter}}),r(2)),s=(Object.defineProperty(t,"createZegoWebSocket",{enumerable:!0,get:function(){return o.createZegoWebSocket}}),r(4)),i=(Object.defineProperty(t,"ZegoDataReport",{enumerable:!0,get:function(){return s.ZegoDataReport}}),r(5));Object.defineProperty(t,"ZegoLogger",{enumerable:!0,get:function(){return i.ZegoLogger}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,s.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},s.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn(e+" not exist")},s.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn(e+" not exist")},s.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},s.prototype.eventEnd=function(e,t,r){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n&&0!==n.length){for(var o=n.length-1;0<=o;o--)if(n[o].event==t&&0==n[o].time_consumed){n[o].time_consumed=Date.now()-n[o].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},s.prototype.eventEndWithMsg=function(e,t,r){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(o){for(var s=o.length-1;0<=s;s--)if(o[s].event==t&&0==o[s].time_consumed){o[s].time_consumed=Date.now()-o[s].event_time,null==o[s].msg_ext&&(o[s].msg_ext={}),o[s].msg_ext=n({},r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},s.prototype.eventEndWithMsgInfo=function(e,t,r){if(this.dataStatistics[e]){var n=this.dataStatistics[e].events;if(n){for(var o=n.length-1;0<=o;o--)if(n[o].event==t&&0==n[o].time_consumed){n[o].time_consumed=Date.now()-n[o].event_time,Object.assign(n[o],r);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},s.prototype.addEventInfo=function(e,t,r,n){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var s=o.length-1;0<=s;s--)if(o[s].event==t&&null!=o[s].time_consumed){null==o[s].msg_ext?o[s].msg_ext={}:o[s].msg_ext&&(o[s].msg_ext[r]=n);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},s.prototype.addEventMsg=function(e,t,r,n){if(this.dataStatistics[e]){var o=this.dataStatistics[e].events;if(null!=o){for(var s=o.length-1;0<=s;s--)if(o[s].event==t){o[s][r]=n;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},s.prototype.addEvent=function(e,t,r){this.dataStatistics[e]?this.dataStatistics[e].events&&this.dataStatistics[e].events.push(r?{event:t,event_time:Date.now(),msg_ext:r}:{event:t,event_time:Date.now()}):this.logger.warn("zd.ae.0 no seq match")},s.prototype.uploadReport=function(e,t,r,n){var o=this.dataStatistics[e];null!=o&&(t&&(o.event=t),o.time_consumed=Date.now()-o.event_time,r&&this.addMsgInfo(e,{error:r.code,message:r.message||r.msg+" "+(n||"")}),this.logger.report(o),delete this.dataStatistics[e])},s);function s(e){this.dataStatistics={},this.logger=e}t.ZegoDataReport=o},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,r(0)),s=r(2),i=r(1),a=r(6);function c(e){this.logLevel=o.ENUM_LOG_LEVEL.INFO,this.logRemoteLevel=0,this.websocket=null,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.stateCenter=i.LoggerStateCenter.getInstance(),this.env=e}c.prototype.setLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},c.prototype.setRemoteLogLevel=function(e){return void 0!==(e=o.ENUM_LOG_LEVEL[e])&&(this.logRemoteLevel=e,!0)},c.prototype.setSessionInfo=function(e,t,r,n,o,s){this.appid=e,this.roomid=t,this.sessionid=r,this.userid=n,this.userName=o,this.version=s},c.prototype.report=function(e){e=this.logReportParamList(o.ENUM_LOG_LEVEL.REPORT,e),this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.REPORT&&console.debug(e),this.RemoteLog(o.ENUM_LOG_LEVEL.REPORT,e,!0)},c.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.DEBUG,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.DEBUG&&console.debug(r),this.log(o.ENUM_LOG_LEVEL.DEBUG,r)},c.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.INFO,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.INFO&&console.info(r),this.log(o.ENUM_LOG_LEVEL.INFO,r)},c.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.WARN,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.WARN&&console.warn(r),this.log(o.ENUM_LOG_LEVEL.WARN,r)},c.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.logParamList(o.ENUM_LOG_LEVEL.ERROR,e.join(""));this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=o.ENUM_LOG_LEVEL.ERROR&&(console.error(r),window?this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500)):wx&&this.stateCenter.debug&&wx.showModal({title:"",content:e.join("").substr(e.join("").indexOf(" ")+1,4500)})),this.log(o.ENUM_LOG_LEVEL.ERROR,r)},c.prototype.log=function(e,t){this.logRemoteLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logRemoteLevel<=e&&this.RemoteLog(e,t)},c.prototype.setLogServer=function(e){try{return e.startsWith("wss:")?(this.logType=o.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=o.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=o.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},c.prototype.stopLogServer=function(){this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET?this.stopWebSocketServer():this.logType==o.ENUM_REMOTE_TYPE.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=o.ENUM_REMOTE_TYPE.DISABLE},c.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},c.prototype.openHttpsLogServer=function(e){var t=this;(this.url=e)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},c.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},c.prototype.RemoteLog=function(e,t,r){if(void 0===r&&(r=!1),""!=this.url)if(this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==o.ENUM_REMOTE_TYPE.HTTPS)this.RemoteHttpsLog(e,t,r);else if(this.logLevel!==o.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=e)for(this.logCacheSend.push(t);this.logCacheSend.length>this.logCacheMax;)this.logCacheSend.shift()},c.prototype.RemoteWebSocketLog=function(e,t){if("string"==typeof t&&4e3<t.length)console.info("log over maximum, ignore");else if(null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState){var r=this.url;this.url="",this.setLogServer(r),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)}else if(0==this.websocket.readyState)this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t);else if(1==this.websocket.readyState)if(0<this.logCacheSend.length){for(var o="",s=0;s<this.logCacheSend.length;s++){4e3<(o+this.logCacheSend[s]).length&&(this.websocket.send(o),o="");var i=JSON.parse(this.logCacheSend[s]);i=n(n({},i),{userid:i.userid||this.userid,roomid:i.roomid||this.roomid,userName:i.roomid||this.userName}),o=o+JSON.stringify(i)+"\n"}t=o+t,this.logCacheSend=[],this.websocket.send(t)}else this.websocket.send(t);else console.warn("wrong socket state:"+this.websocket.readyState),this.logCacheSend.length<this.logCacheMax&&this.logCacheSend.push(t)},c.prototype.RemoteHttpsLog=function(e,t,r){this.logCacheSend.push(t),(this.logCacheSend.length>=this.logCacheMax||!0===r)&&this.SendHttpsLog()},c.prototype.logParamList=function(e,t){var r={time:r=a.getCurrentTime(),level:e,action:(t=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t])[0],content:t[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(r)},c.prototype.logReportParamList=function(e,t){var r=a.getCurrentTime();return t=n(n({},t),{time:r,level:e,console:this.env%2===o.ZEGO_ENV.BROWSER?"rtc":"xcx",appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},c.prototype.openWebSocketLogServer=function(e){this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.websocket=s.createZegoWebSocket(e,this.env),this.websocket.onopen=function(){},this.websocket.onclose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("onclose   websocket error:",e)},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn("open log websocket error:",e)})},c.prototype.SendHttpsLog=function(){0!=this.logCacheSend.length&&(this.env%2===o.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},c.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCacheSend.join("\n"),r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){if(0!=r.responseText.length)try{var t=JSON.parse(r.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(t){console.log("send result failed "+t)}}else console.log("send failed "+r.status)},r.open("POST",this.url,!0),0==this.env?r.send(t):2==this.env&&(r.setRequestHeader("content-type","application/json"),r.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCacheSend=[]},c.prototype.SendHttpsLogWeChatMini=function(){var e=this,t=(!this.existUserID&&this.userid&&this.logCacheSend.forEach((function(t){Array.isArray(t)&&t.forEach((function(r,n){var o=JSON.parse(r);o&&""==JSON.parse(r).userid?(o.userid=e.userid,o.id_name=e.userid,t[n]=JSON.stringify(o)):e.existUserID=!0}))})),this.logCacheSend.join("\n"));t=1==this.env?t:JSON.stringify({user_id:this.userid,log:t}),wx.request({url:this.url,data:t,method:"POST",success:function(t){0!=t.data.length&&"number"==typeof(t=t&&t.data&&t.data.interval)&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))},fail:function(e){console.log("send failed "+e.statusCode)}}),this.logCacheSend=[]},t.ZegoLogger=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0;var n=r(0),o=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),o=null!=window.opr,s=e.indexOf("Chrome")&&window.chrome,i=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?n.ZEGO_BROWSER_TYPE.IE:r?n.ZEGO_BROWSER_TYPE.FIREFOX:o?n.ZEGO_BROWSER_TYPE.OPERA:s?n.ZEGO_BROWSER_TYPE.CHROME:i?n.ZEGO_BROWSER_TYPE.SAFARI:e?n.ZEGO_BROWSER_TYPE.WEIXIN:n.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(n.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(o[e.getMonth()+1]||e.getMonth()+1)+"/",(o[e.getDate()]||e.getDate())+" ",(o[e.getHours()]||e.getHours())+":",(o[e.getMinutes()]||e.getMinutes())+":",o[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}}],s={},n.m=o,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3))},function(t,r){t.exports=e},function(e,t,r){e.exports=r(2).enc.Utf8},function(e,t,r){"use strict";t.byteLength=function(e){return 3*((e=l(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,r,n=(i=l(e))[0],i=i[1],a=new s(function(e,t){return 3*(e+t)/4-t}(n,i)),c=0,u=0<i?n-4:n;for(r=0;r<u;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;return 2===i&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,a[c++]=255&t),1===i&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t),a},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,s=[],i=0,a=r-o;i<a;i+=16383)s.push(function(e,t,r){for(var o=[],s=t;s<r;s+=3)o.push(function(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}((e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2])));return o.join("")}(e,i,a<i+16383?a:i+16383));return 1==o?s.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2==o&&s.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),s.join("")};for(var n=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=i.length;a<c;++a)n[a]=i[a],o[i.charCodeAt(a)]=a;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,r){e.exports=r(2).enc.Hex},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n,o,s,i,a;e.exports=(e=r(2),r(18),r(19),n=(s=(r=e).lib).Base,o=s.WordArray,i=(s=r.algo).MD5,a=s.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,n=this.cfg,s=n.hasher.create(),i=o.create(),a=i.words,c=n.keySize,l=n.iterations;a.length<c;){r&&s.update(r),r=s.update(e).finalize(t),s.reset();for(var u=1;u<l;u++)r=s.finalize(r),s.reset();i.concat(r)}return i.sigBytes=4*c,i}}),r.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF)},function(e,t,r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return s[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,s,i;e.exports=(o=r(15),i={},n.m=s=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":r?"FIREFOX":n?"OPERA":o?"CHROME":s?"SAFARI":e?"WEIXIN":"UNKOWN"};var n=["00","01","02","03","04","05","06","07","08","09"];t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(n[e.getMonth()+1]||e.getMonth()+1)+"/",(n[e.getDate()]||e.getDate())+" ",(n[e.getHours()]||e.getHours())+":",(n[e.getMinutes()]||e.getMinutes())+":",n[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},t.generateUUID=function(e){if(0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r)return r;var t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)}));return 0===e?localStorage.setItem("z_deviceID",r):wx.setStorageSync("z_deviceID",r),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var n=r(4);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return n.ZegoSetting}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){var c=[i,a];if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(a){c=[6,a],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0,r(5)),a=r(6),c=r(10),l=r(0),u=r(12),h=r(1),p=r(2);function _(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.log=new i.ZegoLog}Object.defineProperty(_.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),_.prototype.init=function(e){var t=this;return e.pollingFreq&&!p.checkValidNumber(e.pollingFreq)?(this.log.error(l.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},u.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout((function(){t.pollingSetting(1e3*t.pollingInterval)}),1e3*e),this.settingCacheHandler=new a.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+this.options.product+"_"+this.options.appID,this.log,this.options.env),this.inited=!0)},_.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},_.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},_.prototype.getEnvVariable=function(e){return this.envVariable[e]},_.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(r){"string"!=typeof e[r]&&"number"!=typeof e[r]&&t.log.error("zs.sev env "+r+" type error"),t.proEnvVariable[r]=String(e[r])}))},_.prototype.getEnvVariables=function(){return this.envVariable},_.prototype.enablePolling=function(e,t){var r=this;t?t.forEach((function(t){var n=r.fileList.find((function(e){return e.fileName===t}));n&&(n.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},_.prototype.setToken=function(e){this.token=e},_.prototype.setUserID=function(e){this.userID=e},_.prototype.getSettingCache=function(e){return o(this,void 0,void 0,(function(){var t,r,n;return s(this,(function(o){switch(o.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(h.errorList.NOT_INIT)];case 1:return r=this._getFileName(e),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return(r=o.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:r.setting,versions:r.versions}),n={setting:r.setting,versions:r.versions}),[2,Promise.resolve(n)]}}))}))},_.prototype.fetchSetting=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=r,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,r)):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,r))):Promise.reject(h.errorList.NOT_INIT)},_.prototype.fetchMultiSetting=function(e,t,r){var i=this;return void 0===t&&(t={}),void 0===r&&(r=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call"),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,n(n({},this.envVariable),t))):new Promise((function(t,n){var a={},c=[];if(e.forEach((function(e){return o(i,void 0,void 0,(function(){var t;return s(this,(function(r){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):c.push(e),[2]}))}))})),!(0<c.length))return t(a);i._getCloudSetting(c,i.envVariable).then((function(e){return i.handleFetchFiles(e,r),Object.assign(a,e),t(a)})).catch((function(e){c.forEach((function(e){return o(i,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=n.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):n(e)}))}))):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(h.errorList.NOT_INIT))},_.prototype.setOptions=function(e){e&&"boolean"==typeof e.unify&&(this.options.unify=e.unify,this.settingFetchHandler.setOptions(this.options))},_.prototype.setLog=function(e){this.log=e},_.prototype._getCloudSetting=function(e,t){var r=this;return new Promise((function(n,i){return o(r,void 0,void 0,(function(){var r,o,a,c,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.settingFetchHandler.fetchSetting((a=e instanceof Array)?e:[e],t,this.token,this.userID)];case 1:return c=s.sent(),r=c.data,"number"==typeof(c=c.polling_interval)&&5<=c&&this.pollingInterval!==60*c&&(this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*c,this.uninit(),this.activePolling()),a?(o={},e.forEach((function(e){var t;0==(null==(t=r[e])?void 0:t.code)&&void 0!==(null==(t=r[e])?void 0:t.data)&&(o[e]={setting:null==(t=r[e])?void 0:t.data,versions:null==(e=r[e])?void 0:e.versions})})),0<Object.keys(o).length?n(o):i(h.errorList.MULTI_FILE_NOT_EXIST)):0===(null==(a=r[e])?void 0:a.code)&&null!=(c=r[e])&&c.data?n({setting:null==(c=r[e])?void 0:c.data,versions:null==(c=r[e])?void 0:c.versions}):i({code:null==(u=r[e])?void 0:u.code,msg:null==(u=r[e])?void 0:u.message}),[3,3];case 2:return u=s.sent(),i(u),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail"),[3,3];case 3:return[2]}}))}))}))},_.prototype.handleFetchFiles=function(e,t){var r=this;Object.keys(e).forEach((function(n){var o=r.fileList.find((function(e){return e.fileName==n}));o?(o.fetchedTime=(new Date).getTime(),o.setting=e[n].setting,o.versions=e[n].versions,o.needPolling=t):r.fileList.find((function(e){return e.fileName===n}))||r.fileList.push({fileName:n,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[n].setting,versions:e[n].versions}),o=r._getFileName(n),r.settingCacheHandler.storeSetting(o,e[n])}))},_.prototype._fetchSetting=function(e,t,r){var n=this;return new Promise((function(i,a){n.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),n._getCloudSetting(e,n.envVariable).then((function(o){t?(t.fetchedTime=(new Date).getTime(),t.setting=o.setting,t.versions=o.versions,t.needPolling=r):n.fileList.find((function(t){return t.fileName===e}))||n.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:o.setting,versions:o.versions});var s=n._getFileName(e);n.settingCacheHandler.storeSetting(s,o),i(o),n.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(c){return o(n,void 0,void 0,(function(){var n;return s(this,(function(o){switch(o.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:r,setting:{},versions:{}}),n=this._getFileName(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(n)];case 2:return n=o.sent(),i(n),[3,4];case 3:return o.sent(),a(c),[3,4];case 4:return this.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},_.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=p.getBrowser(),this.publicEnvVariable.deviceid=p.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=p.generateUUID(this.options.env))},_.prototype.pollingSetting=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,a=this;return s(this,(function(c){switch(c.label){case 0:if(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e),t=[],this.fileList.forEach((function(e){e.needPolling&&t.push(e.fileName)})),r=e,!(0<t.length))return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.settingFetchHandler.fetchSetting(t,this.envVariable,this.token,this.userID)];case 2:return i=c.sent(),n=i.data,"number"==typeof(i=i.polling_interval)&&5<=i&&this.pollingInterval!==60*i&&(this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*i,r=1e3*this.pollingInterval),this.fileList.forEach((function(e){return o(a,void 0,void 0,(function(){var t,r,o,i;return s(this,(function(s){switch(s.label){case 0:return e.fetchedTime=(new Date).getTime(),t=this._getFileName(e.fileName),n[e.fileName]&&0===n[e.fileName].code&&n[e.fileName].data?(r=JSON.stringify(n[e.fileName].data),o=JSON.stringify(e.setting),i={setting:n[e.fileName].data,versions:null==(i=n[e.fileName])?void 0:i.versions},o!==r&&(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=i.setting,e.versions=i.versions,this.options.pollingNotify(e.fileName,i)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:o=s.sent(),r=JSON.stringify(o),o=JSON.stringify(i),r!==o&&this.settingCacheHandler.storeSetting(t,i),s.label=2;case 2:return[2]}}))}))})),[3,4];case 3:return i=c.sent(),this.log.error(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(i)),[3,4];case 4:return[3,6];case 5:this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),c.label=6;case 6:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){a.pollingSetting(r)}),r),[2]}}))}))},_.prototype._getFileName=function(e){return e},_.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},t.ZegoSetting=r=_},function(e,t,r){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0,n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.join(" ")},t.ZegoLog=n},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r=r||Promise)((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){var c=[i,a];if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(a){c=[6,a],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0,r(0)),i=r(7);function a(e,t,r){void 0===r&&(r=0),this.storeName=e,this.log=t,this.store=i.createZegoStore(e,r)}a.prototype.getCacheSetting=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.log.info(s.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},a.prototype.storeSetting=function(e,t){return n(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return this.log.info(s.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return r.sent(),[2]}}))}))},t.SettingCacheHandler=r=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var n=r(8),o=r(9),s=(i.prototype.getItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},i.prototype.setItem=function(e,t){var r=this;return new Promise((function(n,o){try{wx.setStorageSync(r.keyPrefix+e,t),n()}catch(n){o(n)}}))},i.prototype.removeItem=function(e){var t=this;return new Promise((function(r,n){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){n(r)}}))},i.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},i.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var n=wx.getStorageInfoSync().keys,o=[];n.forEach((function(t){0==t.indexOf(e.keyPrefix)&&o.push(t.replace(e.keyPrefix,""))})),o.sort(),t(o)}catch(t){r(t)}}))},i);function i(e){this.storeName=e,this.keyPrefix=e+"/"}t.ZegoWechatMiniStore=s,t.createZegoStore=function(e,t){return t===o.ZEGO_ENV.BROWSER?n.createInstance({name:e}):new s(e)}},function(e,t){e.exports=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.4",(n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",(n=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[n.IE=0]="IE",n[n.FIREFOX=1]="FIREFOX",n[n.CHROME=2]="CHROME",n[n.SAFARI=3]="SAFARI",n[n.OPERA=4]="OPERA",n[n.WEIXIN=5]="WEIXIN",n[n.WEIXINMINI=6]="WEIXINMINI",n[n.UNKOWN=7]="UNKOWN",(n=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[n.DISABLE=0]="DISABLE",n[n.WEBSOCKET=1]="WEBSOCKET",n[n.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var o,s,i=r(0),a=r(1),c=r(11),l=r(2);function u(e,t){this.options=e,this.log=t,this.seq=0,this.userID=""}r=o={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},r=s={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},u.prototype.setOptions=function(e){this.options=e},u.prototype.setDataReport=function(e){this.reportFunc=e},u.prototype.setUserID=function(e){this.userID=e},u.prototype.fetchSetting=function(e,t,r,o){var s=this;return new Promise((function(a,u){var h,p={product:s.options.product,files:e,param:n(n({},t),{deviceid:void 0}),appid:s.options.appID,token:r,id_name:o,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||l.generateUUID(s.options.env),compress:!1,mode:s.options.online?"online":"test"},_=s.seq++;s.reportFunc&&s.reportFunc(_,"request_start"),null!=(h=s.options)&&h.unify&&s.options.connection?s.sendCloudRequest(o,p,"/cloud-setting/get",(function(e){var t,r=e.code,n=e.data,o=e.polling_interval;e=e.reportData,s.log.info(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+r),n&&(t=[],Object.keys(n).forEach((function(e){t.push({name:e,error:n[e].code})}))),s.reportFunc&&s.reportFunc(_,"request_end",{code:r,reportData:e,params:p,files:t}),a({data:n,polling_interval:o})}),(function(e){var t=e.code,r=e.msg;e=e.reportData,s.log.warn(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+t),s.reportFunc&&s.reportFunc(_,"request_end",{code:t,params:p,reportData:e}),u({code:t,msg:r})})):c.fetch(s.options.urls,p,s.options.env||0).then((function(e){var t,r=e.code,n=e.data,o=e.polling_interval;e=e.reportData,s.log.info(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+r),n&&(t=[],Object.keys(n).forEach((function(e){t.push({name:e,error:n[e].code})}))),s.reportFunc&&s.reportFunc(_,"request_end",{code:r,reportData:e,params:p,files:t}),a({data:n,polling_interval:o})})).catch((function(e){var t=e.code,r=e.msg;e=e.reportData,s.log.warn(i.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),s.reportFunc&&s.reportFunc(_,"request_end",{code:t,params:p,reportData:e}),u({code:t,msg:r})}))}))},u.prototype.sendCloudRequest=function(e,t,r,i,c,l,u){var h,p=this,_=(void 0===l&&(l=3),void 0===u&&(u=[]),(new Date).getTime());null!=(h=this.options.connection)&&h.startHttpRequest({service:o.SERVICE_ClOUD_SETTING,body:t,ack:!1,idName:e,method_no:s.METHOD_POST,location:r},(function(o){var s,h,d,f,g;200===(null==o?void 0:o.status_code)?(s=(f=JSON.parse(o.body)).code,g=f.message,h=f.data,d=f.polling_interval,f=(new Date).getTime()-_,u.push({timestamp:_,url:r,error:s,duration:f}),0===s?i({code:s,msg:g,data:h,polling_interval:d,reportData:u}):c({code:s,msg:g,reportData:u})):(g=(new Date).getTime()-_,u.push({timestamp:_,url:r,error:null==o?void 0:o.status_code,duration:g}),0<l?(l--,p.sendCloudRequest(e,t,r,i,c,l,u)):c(n(n({},a.errorList.FILE_REQUEST_FAIL),{reportData:u})))}),(function(o){var s=(new Date).getTime()-_;u.push({timestamp:_,url:r,error:o.code,duration:s}),0<l?(l--,p.sendCloudRequest(e,t,r,i,c,l,u)):c(n(n({},a.errorList.FILE_REQUEST_FAIL),{reportData:u}))}),null,{timeout:4e3})},t.SettingFetchHandler=r=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0,r(1));t.fetch=function e(t,r,s,i,a,c){return void 0===i&&(i=5),void 0===a&&(a=0),void 0===c&&(c=[]),new Promise((function(l,u){a=a||(new Date).getTime();var h,p,_,d=(new Date).getTime();0===s?((h=new XMLHttpRequest).open("post",p=t[(i+1)%2]||t[0]),1==r.compress&&(h.responseType="arraybuffer"),h.ontimeout=function(){},h.onreadystatechange=function(){var _,f,g,m,y;4==h.readyState&&(200<=h.status&&h.status<300||304==h.status?(f=void 0,1!=r.compress&&(f=h.responseText),y=(new Date).getTime()-d,_=(g=JSON.parse(f)).code,m=g.message,f=g.data,g=g.polling_interval,c.push({timestamp:d,url:p,error:_,duration:y}),0===_?l({code:_,msg:m,data:f,polling_interval:g,reportData:c}):u({code:_,msg:m,reportData:c})):(m=(new Date).getTime()-d,c.push({timestamp:d,url:p,error:h.status,duration:m}),y=(new Date).getTime()-a,0<i&&y<8e3?e(t,r,s,--i,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:c}))))},h.timeout=8e3,h.send(JSON.stringify(r))):(_=t[(i+1)%2]||t[0],wx.request({url:_,data:r,method:"POST",success:function(h){var p=(m=h.data).code,f=m.message,g=m.data,m=m.polling_interval;void 0!==p?0===p?l({code:p,msg:f,data:g,polling_interval:m,reportData:c}):u({code:p,msg:f,reportData:c}):(f=(new Date).getTime()-d,c.push({timestamp:d,url:_,error:o.errorList.FILE_REQUEST_FAIL.code,msg:h.data,duration:f}),0<i?e(t,r,s,--i,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:c})))},fail:function(h){var p=(new Date).getTime()-d;c.push({timestamp:d,url:_,error:o.errorList.FILE_REQUEST_FAIL.code,msg:h.errMsg,duration:p}),0<i?e(t,r,s,--i,a,c).then((function(e){l(e)})).catch((function(e){u(e)})):u(n(n({},o.errorList.FILE_REQUEST_FAIL),{reportData:c}))}}))}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0}}],n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3))},function(e,t,r){function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,s,i,a;e.exports=(o=r(6),s=r(1),i=[function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.typeMap=t.BrokenType=t.ConnectedType=t.DisconnectedType=t.Method=t.ConnectionClosedAction=t.NetWorkState=t.externalErrorList=t.Stick=t.PcConnectState=t.ENUM_CONNECT_STATE=t.StreamType=t.Mode=t.ZegoconnRunEnv=t.BusinessService=t.AccessHub_Error_Code=t.AccessHubMessageType=t.ENUM_NETWORK_STATE=void 0,(o=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[o.offline=0]="offline",o[o.online=1]="online",(o=t.AccessHubMessageType||(t.AccessHubMessageType={}))[o.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",o[o.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",o[o.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",o[o.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",o[o.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",o[o.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",o[o.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",o[o.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",o[o.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",o[o.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",o[o.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",o[o.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",o[o.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",o[o.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",o[o.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",o[o.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",o[o.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",o[o.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",o[o.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",o[o.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",(n=o=t.AccessHub_Error_Code||(t.AccessHub_Error_Code={}))[n.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",n[n.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",n[n.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",n[n.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",n[n.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",n[n.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",n[n.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",n[n.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",n[n.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",n[n.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",n[n.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",n[n.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",n[n.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",n[n.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",n[n.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(n=t.BusinessService||(t.BusinessService={}))[n.SERVICE_UNSET=0]="SERVICE_UNSET",n[n.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",n[n.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",n[n.SERVICE_MIX=3]="SERVICE_MIX",n[n.SERVICE_ZEUS=4]="SERVICE_ZEUS",n[n.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",n[n.SERVICE_L3=6]="SERVICE_L3",n[n.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",n[n.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",n[n.SERVICE_ZIM=9]="SERVICE_ZIM",n[n.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",n[n.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",n[n.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",n[n.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",n[n.SERVICE_QUALITY=14]="SERVICE_QUALITY",n[n.SERVICE_SECURITY=15]="SERVICE_SECURITY",n[n.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",n[n.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",n[n.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",n[n.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",n[n.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",n[n.SERVICE_CDN=21]="SERVICE_CDN",n[n.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",n[n.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",n[n.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",n[n.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",n[n.SERVICE_ECHO=26]="SERVICE_ECHO",n[n.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",n[n.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(n=t.ZegoconnRunEnv||(t.ZegoconnRunEnv={}))[n.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",n[n.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",n[n.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(n=t.Mode||(t.Mode={}))[n.Mode_UNSET=0]="Mode_UNSET",n[n.MODE_ONLINE=1]="MODE_ONLINE",n[n.MODE_TEST=2]="MODE_TEST",n[n.MODE_ALPHA=3]="MODE_ALPHA",(n=t.StreamType||(t.StreamType={}))[n.HTTP=0]="HTTP",n[n.PC=1]="PC",n[n.OTHER=2]="OTHER",t.ENUM_CONNECT_STATE={disconnect:0,connecting:1,connected:2},(n=t.PcConnectState||(t.PcConnectState={}))[n.CONNECTED=0]="CONNECTED",n[n.DISCONNECT=1]="DISCONNECT",n[n.BROKEN=2]="BROKEN",t.Stick={DISPATCH:"zego-action-dispatch",RETRY:"zego-action-retry",ABORT:"zego-action-abort",NEXT_GROUP:"zego-action-next-group",PUSH_APP_CONFIG:"push-app-config:"},t.externalErrorList=[o.ACCESSHUB_INVALID_APPID,o.ACCESSHUB_INVALID_SIGNATURE],(n=t.NetWorkState||(t.NetWorkState={}))[n.offline=0]="offline",n[n.online=1]="online",(o=t.ConnectionClosedAction||(t.ConnectionClosedAction={}))[o.ACTION_RESERVED=0]="ACTION_RESERVED",o[o.ACTION_DISPATCH=1]="ACTION_DISPATCH",o[o.ACTION_RETRY=2]="ACTION_RETRY",o[o.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",o[o.ACTION_ABORT=4]="ACTION_ABORT",o[o.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(n=t.Method||(t.Method={}))[n.METHOD_UNSET=0]="METHOD_UNSET",n[n.METHOD_GET=1]="METHOD_GET",n[n.METHOD_POST=2]="METHOD_POST",(o=t.DisconnectedType||(t.DisconnectedType={}))[o.CLOSE=0]="CLOSE",o[o.TEMP=1]="TEMP",o[o.TIMEOUT=2]="TIMEOUT",(n=t.ConnectedType||(t.ConnectedType={}))[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",(o=t.BrokenType||(t.BrokenType={}))[o.EMPTY=0]="EMPTY",o[o.CLOSE=1]="CLOSE",t.typeMap={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CONFIG_KEY=t.NET_ACCESS_SERVERS=t.NET_ACCESS_CONFIG=void 0,r=r(0),t.NET_ACCESS_CONFIG={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:r.Mode.MODE_ONLINE,sdkType:3,connectVer:2,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},t.NET_ACCESS_SERVERS="z_net_access_servers",t.APP_CONFIG_KEY="z_appconfig"},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorCodeList=void 0,t.errorCodeList={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidNum=t.decodeString=t.encodeString=void 0,t.encodeString=function(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))},t.decodeString=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))},t.uuidNum=function(e,t){var r,n,o="0123456789".split(""),s=[];if(t=o.length,e)for(r=0;r<e;r++)s[r]=o[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",r=0;r<36;r++)s[r]||(n=0|16*Math.random(),s[r]=o[19==r?3&n|8:n]);return s.join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequest=void 0;var n=r(0),o=r(1),s=r(6),i=r(4),a=[n.BusinessService.SERVICE_WEBRTC_SIGNAL,n.BusinessService.SERVICE_L3_WEBRTC_SIGNAL];function c(e,t,r,o,i){this.logger=e,this.service=t,this.streamManager=r,this.pcEstablishTimeout=o,this.option=i,this.connectState=n.PcConnectState.DISCONNECT,this.lastConnectState=n.PcConnectState.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(n.StreamType.PC),this.eventManager=new s.EventManager,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}c.prototype.sendRequest=function(e,t,r){var s=this,c=e.payload,l=((a.includes(this.service)||null!=(l=this.option)&&l.encode)&&(c=(0,i.encodeString)(e.payload)),{service_no:this.service,ack:e.ack,payload:c,wss_message_type:o.NET_ACCESS_CONFIG.wssMessageType,wss_path:null==(l=this.option)?void 0:l.path,wss_raw_query:null==(c=this.option)?void 0:c.query,zegoconn_version:o.NET_ACCESS_CONFIG.connectVer});this.netPcStream.isConnect()||this.eventManager.emit("connectStart"),this.netPcStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE,l,(function(){s.logger.info("zn.napr.sr suc"),r&&r()}),(function(e){s.logger.error("zn.napr.sr fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap}),this.netPcStream.isFirst=!1},c.prototype.onPushEvent=function(e,t){var r;switch(this.logger.info("zn.napr.ope"+" msgType: ".concat(e)),e){case n.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:this.pcEstablished(t);break;case n.AccessHubMessageType.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case n.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:var o=t.payload;(a.includes(this.service)||null!=(r=this.option)&&r.encode)&&(o=(0,i.decodeString)(t.payload)),this.eventManager.emit("downLoadMessage",o)}},c.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},c.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},c.prototype.pcEstablished=function(e){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(n.PcConnectState.CONNECTED);var t=n.ConnectedType.MANUAL;this.lastConnectState===n.PcConnectState.BROKEN&&this.connectState===n.PcConnectState.CONNECTED&&(t=n.ConnectedType.AUTO),this.eventManager.emit("connected",t),this.eventManager.emit("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from}),this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(n.PcConnectState.BROKEN),this.eventManager.emit("broken"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",n.DisconnectedType.TEMP)}),1e3*this.pcEstablishTimeout)},c.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},c.prototype._close=function(e,t){var r;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==n.PcConnectState.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),r=this.streamManager.getStreamID(),this.netPcStream.refresh(r),this.eventManager.emit(e,t)),this.setConnectState(n.PcConnectState.DISCONNECT)},c.prototype.closePc=function(){this._close("broken")},c.prototype.closeRequest=function(){this._close("disconnected",n.DisconnectedType.CLOSE)},c.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},t.NetAgentPCRequest=c},function(e,t,r){"use strict";function n(){this.handlerListMap={}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventManager=void 0,n.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},n.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},n.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(r){try{setTimeout((function(){r.apply(void 0,t)}),0)}catch(r){console.error("dispatch "+e+" "+r)}}))},t.EventManager=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentHttpRequest=void 0;var n=r(0),o=r(4),s=r(1);function i(e,t,r){this.logger=e,this.service=t,this.streamManager=r,this.netHttpStream=this.streamManager.createStream(n.StreamType.HTTP)}i.prototype.sendRequest=function(e,t,r,i,a){var c=this;e={service_no:this.service,ack:e.ack,headers:e.headers,body:(0,o.encodeString)(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,zegoconn_version:s.NET_ACCESS_CONFIG.connectVer},this.netHttpStream.sendMessage(n.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST,e,(function(e){var r;e.body&&(r=(0,o.decodeString)(e.body),e.body=r),c.logger.info("zn.nahr.sr suc "+JSON.stringify(e)),t&&t(e)}),(function(e,t,n){c.logger.error("zn.nahr.sr fail"),r&&r(n||e)}),(function(e){c.logger.error("zn.nahr.sr ack"),i&&i(e)}),a),this.netHttpStream.isFirst=!1},t.NetAgentHttpRequest=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Method=t.Mode=t.DisconnectedType=t.ConnectedType=t.NET_ACCESS_CONFIG=t.BrokenType=t.BusinessService=t.NetAgentHttpRequest=t.NetAgentPCRequest=t.ZegoConnectionAgent=void 0;var n=r(0),o=(Object.defineProperty(t,"BrokenType",{enumerable:!0,get:function(){return n.BrokenType}}),Object.defineProperty(t,"BusinessService",{enumerable:!0,get:function(){return n.BusinessService}}),Object.defineProperty(t,"ConnectedType",{enumerable:!0,get:function(){return n.ConnectedType}}),Object.defineProperty(t,"DisconnectedType",{enumerable:!0,get:function(){return n.DisconnectedType}}),Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return n.Mode}}),Object.defineProperty(t,"Method",{enumerable:!0,get:function(){return n.Method}}),r(9)),s=(Object.defineProperty(t,"ZegoConnectionAgent",{enumerable:!0,get:function(){return o.ZegoConnectionAgent}}),r(7)),i=(Object.defineProperty(t,"NetAgentHttpRequest",{enumerable:!0,get:function(){return s.NetAgentHttpRequest}}),r(1)),a=(Object.defineProperty(t,"NET_ACCESS_CONFIG",{enumerable:!0,get:function(){return i.NET_ACCESS_CONFIG}}),r(5));Object.defineProperty(t,"NetAgentPCRequest",{enumerable:!0,get:function(){return a.NetAgentPCRequest}})},function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoConnectionAgent=void 0,r(0)),s=r(10),i=r(13),a=r(18),c=r(19),l=r(20),u=r(1),h=r(6),p=r(21),_=r(3),d=r(22),f=r(4),g=r(23),m=r(7),y=r(24);function E(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.onConnectedEvent=function(t){e.getConfig();var r=e.reportSeq++;e.eventManager.emit("dispatchEvent",r,"start"),e.dispatch().then((function(t){var n=t.servers;e.eventManager.emit("dispatchEvent",r,"end",{domains:t=t.domains}),0<n.length&&e.eventManager.emit("dispatchResultUpdate",{servers:n})})).catch((function(e){})),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=(0,f.uuidNum)(16),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call")},this.onDisConnectedEvent=function(t){e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.BROKEN)},this.onPushEvent=function(t,r,n){switch(r){case o.AccessHubMessageType.MSG_TYPE_REDIRECT:e.redirect(n);break;case o.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(n);break;case o.AccessHubMessageType.MSG_TYPE_PC_BROKEN:case o.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED:case o.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE:e.streamManager.onPushEvent(t,r,n);break;case o.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(n.data)}}}E.prototype.init=function(){this.logger=new g.ZegoLogger,this.protobuf=new s.AccessHubProtoBuf,this.stateCenter=new d.StateCenter,this.eventManager=new h.EventManager,this.checkLinkMsg(),this.inited=!0},E.prototype.unInit=function(){this.inited=!1},E.prototype.setAppInfo=function(e){this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?o.ENUM_NETWORK_STATE.online:o.ENUM_NETWORK_STATE.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new i.ZegoWssLink(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new y.StreamManager(this.zegoLink),this.businessRequestMgr=new a.NetAgentBusinessRequestMgr(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new c.NetHeartBeatHandler(this.streamManager,this.logger),this.netAgentPCRequestMgr=new l.NetAgentPCRequestMgr(this.streamManager,this.logger),this.heartBeatHandler()},E.prototype.setUserInfo=function(e){this.stateCenter.userId=e},E.prototype.setNetAgentDefaultServers=function(e){this.connectServers=n([],e,!0)},E.prototype.setDispatchConnectServers=function(e){this.connect(e)},E.prototype.startHttpRequest=function(e,t,r,n,o){var s=this,i=this.reportSeq++;this.eventManager.emit("requestEvent",i,"start"),this.isConnect()||this.connectUa(),new m.NetAgentHttpRequest(this.logger,e.service,this.streamManager).sendRequest(e,(function(e){s.eventManager.emit("requestEvent",i,"end",{na_req_location:location,status_code:e.status_code}),t&&t(e)}),(function(e){s.eventManager.emit("requestEvent",i,"end",{na_req_location:location}),r&&r(e)}),n,o)},E.prototype.getAppConfigByAgent=function(e,t,r){return this.isConnect()||this.connectUa(),this.getAppConfig(e,this.stateCenter.userId,t,r)},E.prototype.getPCRequest=function(e,t){var r=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){r.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===o.DisconnectedType.TEMP&&(r.disConnect(),r.connectStart())})),t.on("connectStart",(function(){r.connectUa()})),t},E.prototype.connectUa=function(){this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0))},E.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},E.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},E.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},E.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},E.prototype.setLogger=function(e){this.logger=e},E.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},E.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([_.errorCodeList.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},E.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},E.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},E.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=o.ENUM_NETWORK_STATE.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},E.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=o.ENUM_NETWORK_STATE.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},E.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},E.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=n([],e,!0)),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new p.NetRetryLinkHandler(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,r){r===_.errorCodeList.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",r),t.netAgentPCRequestMgr.updateConnectState(o.PcConnectState.DISCONNECT,o.DisconnectedType.TIMEOUT,r))},this.connectStart(!1,!0)},E.prototype.resetNetAgent=function(){this.netHeartBeatHandler.reset(),this.zegoLink.destroySocket()},E.prototype.getConfig=function(){function e(e,r,n){n?t.logger.info("zn.zca.gc fail "+JSON.stringify(n)):0===e.code?(t.logger.info("zn.zca.gc suc "+JSON.stringify(e)),t.getConfigSuccess(e)):t.logger.info("zn.zca.gc fail")}var t=this;this.businessRequestMgr.getConfig(e,e)},E.prototype.getConfigSuccess=function(e){this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout)},E.prototype.dispatch=function(){var e=this;return new Promise((function(t,r){e.businessRequestMgr.dispatchURL((function(r){r=r.data.wss_groups;var n=(e.logger.info("zn.nab.du wss_groups: "+JSON.stringify(r)),e.handleWssGroups(r));t({servers:n,domains:r})}),(function(e){r(e)}))}))},E.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return u.NET_ACCESS_CONFIG.scheme+"://"+e.host+"/"+u.NET_ACCESS_CONFIG.location})):[]},E.prototype.getAppConfig=function(e,t,r,n){var s=this;return new Promise((function(i,a){"string"==typeof t&&"string"==typeof r?s.businessRequestMgr.getAppConfig(e,t,r,n).then((function(e){i(e)})).catch((function(n){if(s.logger.error("zn.zca.gac "+JSON.stringify(n)),-1<o.externalErrorList.indexOf(n.code))return s.getAppConfigFailCount=0,void a(n);s.getAppConfigFailCount++,20008===n.code&&s.getAppConfigFailCount<3?s.getAppConfig(e,t,r).then((function(e){return i(e)})).catch((function(e){return a(e)})):(s.getAppConfigFailCount=0,a(n))})):s.logger.error("zn.zca.gac userID or token must be string")}))},E.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer})},E.prototype.redirect=function(e){this.logger.info("zn.zca.rd"+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn("zn.zca.rd wss_groups null")},E.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case o.ConnectionClosedAction.ACTION_DISPATCH:var r=this.reportSeq++;this.eventManager.emit("dispatchEvent",r,"start"),this.dispatch().then((function(e){var n=e.servers;t.eventManager.emit("dispatchEvent",r,"end",{domains:e=e.domains,reason:"ConnectClosed"}),Array.isArray(n)&&0<n.length&&(t.disConnect(),t.zegoLink.createSocket(n),t.eventManager.emit("dispatchResultUpdate",{servers:n}),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case o.ConnectionClosedAction.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case o.ConnectionClosedAction.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",o.BrokenType.CLOSE),this.connectStart()}},E.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},E.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(o.ENUM_CONNECT_STATE.disconnect))},E.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},E.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},E.prototype.disConnect=function(){this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),this.reportDisConnectEvent()},E.prototype.testConnect=function(){this.startHttpRequest({service:o.BusinessService.SERVICE_ClOUD_SETTING,headers:[],body:{appid:3349318446,biztype:0,deviceid:"27a315ae-ff78-4ded-8581-8b7b7afe6f2e",files:["init","room"],id_name:"sample1647345322471",mode:"online",param:{},product:"Web_SDK",timestamp:1647345362932,token:"eyJ2ZXIiOjEsImhhc2giOiIwOGQxMDYzMzQ0M2EzNjk1ZmE4YTg2ZDNmZGRlNGNiNyIsIm5vbmNlIjoiYWEyZDFmMDJmOGRiYjBlM2Q1YjY5NzA3NzMzOGYyODIiLCJleHBpcmVkIjoxNjQ5OTM3MzI2fQ=="},idName:"sample1647345322471",ack:!0,method_no:o.Method.METHOD_POST,location:"/cloud-setting/get"},(function(e){console.warn("suc",e)}),(function(e){console.warn("err",e)}),(function(e){console.warn("suc",e)}))},t.ZegoConnectionAgent=E},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.AccessHubProtoBuf=void 0,a(r(11))),l=(i=i(r(2)),r(0)),u=a(r(12));function h(){var e;this.protoInstance=u.default,this.protoMap=((e={})[l.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[l.AccessHubMessageType.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[l.AccessHubMessageType.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[l.AccessHubMessageType.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[l.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HBResponse"],e[l.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[l.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[l.AccessHubMessageType.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[l.AccessHubMessageType.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[l.AccessHubMessageType.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[l.AccessHubMessageType.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[l.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[l.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[l.AccessHubMessageType.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[l.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[l.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[l.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}i.util.Long=c.default,i.configure(),h.prototype.encodeRequest=function(e,t,r){var n=(o=this.protoMap[e])[0],o=o[1];return o=(n=this.encode(this.protoInstance[n][o],t)).length,(t=new Uint8Array(13+o))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([o]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([r]).buffer).reverse(),8),t[12]=0,t.set(n,13),t},h.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],r=new DataView(e.buffer).getUint32(8),n=e.slice(13);try{var o=this.protoMap[t];return[r,t,this.decode(this.protoInstance[o[0]][o[1]],n)]}catch(e){return[r,t,{code:1}]}},h.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},h.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},h.prototype.decode=function(e,t){return n({},e.decode(t))},t.AccessHubProtoBuf=h},function(e,t){e.exports=s},function(e,t,r){"use strict";r.r(t),r.d(t,"proto_accesshub",(function(){return a})),r.d(t,"proto_initconfig",(function(){return c})),r.d(t,"default",(function(){return i}));const n=(t=r(2)).Reader,o=t.Writer,s=t.util,i=t.roots.default||(t.roots.default={}),a=i.proto_accesshub=(()=>{const e={};return e.MessageType=function(){const e={},t=Object.create(e);return t[e[0]="MSG_TYPE_EMPTY"]=0,t[e[1]="MSG_TYPE_CONNECTION_CLOSED"]=1,t[e[2]="MSG_TYPE_STREAM_CLOSED"]=2,t[e[3]="MSG_TYPE_CLOSE_CONNECTION"]=3,t[e[4]="MSG_TYPE_HTTP_REQUEST"]=4,t[e[5]="MSG_TYPE_HTTP_RESPONSE"]=5,t[e[6]="MSG_TYPE_HTTP_REQUEST_DROPED"]=6,t[e[7]="MSG_TYPE_PROXY_CONNECT"]=7,t[e[8]="MSG_TYPE_PROXY_CONNECTED"]=8,t[e[9]="MSG_TYPE_PROXY_CONNECTION_CLOSED"]=9,t[e[10]="MSG_TYPE_PROXY_SEND_DATA"]=10,t[e[11]="MSG_TYPE_PROXY_RECV_DATA"]=11,t[e[12]="MSG_TYPE_HB_REQUEST"]=12,t[e[13]="MSG_TYPE_HB_RESPONSE"]=13,t[e[14]="MSG_TYPE_GET_CONFIG_REQUEST"]=14,t[e[15]="MSG_TYPE_GET_CONFIG_RESPONSE"]=15,t[e[16]="MSG_TYPE_HTTP_REQUEST_ACK"]=16,t[e[17]="MSG_TYPE_PC_UPWARD_MESSAGE"]=17,t[e[18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK"]=18,t[e[19]="MSG_TYPE_PC_ESTABLISHED"]=19,t[e[20]="MSG_TYPE_PC_BROKEN"]=20,t[e[21]="MSG_TYPE_PC_DOWNWARD_MESSAGE"]=21,t[e[22]="MSG_TYPE_REDIRECT"]=22,t[e[23]="MSG_TYPE_GET_APPCONFIG_REQUEST"]=23,t[e[24]="MSG_TYPE_GET_APPCONFIG_RESPONSE"]=24,t[e[25]="MSG_TYPE_PUSH_APPCONFIG"]=25,t[e[26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST"]=26,t[e[27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE"]=27,t[e[28]="MSG_TYPE_GET_IM_CONFIG_REQUEST"]=28,t[e[29]="MSG_TYPE_GET_IM_CONFIG_RESPONSE"]=29,t[e[30]="MSG_TYPE_PUSH_EXCEPTION"]=30,t[e[50]="MSG_TYPE_UA_DISPATCH_REQUEST"]=50,t[e[51]="MSG_TYPE_UA_DISPATCH_RESPONSE"]=51,t[e[52]="MSG_TYPE_UA_ECHO_REQUEST"]=52,t[e[53]="MSG_TYPE_UA_ECHO_RESPONSE"]=53,t[e[100]="MSG_TYPE_NODE_REGISTER_REQUEST"]=100,t[e[101]="MSG_TYPE_NODE_REGISTER_RESPONSE"]=101,t[e[102]="MSG_TYPE_NODE_HB_REQUEST"]=102,t[e[103]="MSG_TYPE_NODE_HB_RESPONSE"]=103,t}(),e.ErrorCode=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1e4]="DISPATCH_NO_AVAILABLE_NODE"]=1e4,t[e[10001]="DISPATCH_INTERNAL_ERROR"]=10001,t[e[10002]="DISPATCH_INVALID_FRAME"]=10002,t[e[10003]="DISPATCH_UNMARSHAL"]=10003,t[e[10004]="DISPATCH_MSGTYPE"]=10004,t[e[10005]="DISPATCH_MARSHAL"]=10005,t[e[10006]="DISPATCH_TOO_FREQUENTLY"]=10006,t[e[2e4]="ACCESSHUB_INVALID_FRAME"]=2e4,t[e[20001]="ACCESSHUB_NEED_ENCRYPT"]=20001,t[e[20002]="ACCESSHUB_DECRYPT"]=20002,t[e[20003]="ACCESSHUB_MSGTYPE"]=20003,t[e[20004]="ACCESSHUB_UNMARSHAL"]=20004,t[e[20005]="ACCESSHUB_TIMEOUT"]=20005,t[e[20006]="ACCESSHUB_CONNECT"]=20006,t[e[20007]="ACCESSHUB_BROKEN"]=20007,t[e[20008]="ACCESSHUB_INTERNAL_ERROR"]=20008,t[e[20009]="ACCESSHUB_MARSHAL"]=20009,t[e[20010]="ACCESSHUB_UNSUPPORTED_SERVICE"]=20010,t[e[20011]="ACCESSHUB_TOO_FREQUENTLY"]=20011,t[e[20012]="ACCESSHUB_INVALID_APPID"]=20012,t[e[20013]="ACCESSHUB_HB_TIMEOUT"]=20013,t[e[20014]="ACCESSHUB_INVALID_SIGNATURE"]=20014,t[e[20015]="ACCESSHUB_AUTH_FAILED"]=20015,t[e[3e4]="ACCESSHUB_GET_STREAM_FAILED"]=3e4,t[e[30001]="ACCESSHUB_GET_CONN_FAILED"]=30001,t[e[30002]="ACCESSHUB_DO_HTTP_REQUEST_FAILED"]=30002,t[e[30003]="ACCESSHUB_UNMARSHAL_HB_FAILED"]=30003,t[e[30004]="ACCESSHUB_DO_BACKEND_DISPATCH_FAILED"]=30004,t}(),e.Mode=function(){const e={},t=Object.create(e);return t[e[0]="Mode_UNSET"]=0,t[e[1]="MODE_ONLINE"]=1,t[e[2]="MODE_TEST"]=2,t[e[3]="MODE_ALPHA"]=3,t}(),e.Service=function(){const e={},t=Object.create(e);return t[e[0]="SERVICE_UNSET"]=0,t[e[1]="SERVICE_MEDIAGW"]=1,t[e[2]="SERVICE_LIVEROOM"]=2,t[e[3]="SERVICE_MIX"]=3,t[e[4]="SERVICE_ZEUS"]=4,t[e[5]="SERVICE_ZPUSH"]=5,t[e[6]="SERVICE_L3"]=6,t[e[7]="SERVICE_TALKLINE"]=7,t[e[8]="SERVICE_EDUSUITE"]=8,t[e[9]="SERVICE_ZIM"]=9,t[e[10]="SERVICE_ClOUD_SETTING"]=10,t[e[11]="SERVICE_ZEUSHB"]=11,t[e[12]="SERVICE_USER_LOGIC"]=12,t[e[13]="SERVICE_UNIFYDISPATCH"]=13,t[e[14]="SERVICE_QUALITY"]=14,t[e[15]="SERVICE_SECURITY"]=15,t[e[16]="SERVICE_KTVCPR"]=16,t[e[17]="SERVICE_SWITCH4LIVEROOM"]=17,t[e[18]="SERVICE_WEBRTC_SIGNAL"]=18,t[e[19]="SERVICE_L3_WEBRTC_SIGNAL"]=19,t[e[20]="SERVICE_VIDEOCPR"]=20,t[e[21]="SERVICE_CDN"]=21,t[e[22]="SERVICE_CLOUDRECORD"]=22,t[e[23]="SERVICE_INNER_ECHO"]=23,t[e[24]="SERVICE_OUTER_ECHO"]=24,t[e[25]="SERVICE_LOCALHOST_ECHO"]=25,t[e[26]="SERVICE_ECHO"]=26,t[e[27]="SERVICE_DOCSERVICE"]=27,t[e[28]="SERVICE_AUTHSVR"]=28,t[e[29]="SERVICE_WEBLIVEROOM"]=29,t[e[30]="SERVICE_WHITEBOARD"]=30,t[e[31]="SERVICE_METAWORLD"]=31,t}(),e.Method=function(){const e={},t=Object.create(e);return t[e[0]="METHOD_UNSET"]=0,t[e[1]="METHOD_GET"]=1,t[e[2]="METHOD_POST"]=2,t}(),e.SdkType=function(){const e={},t=Object.create(e);return t[e[0]="SDK_TYPE_UNSET"]=0,t[e[1]="SDK_TYPE_QUIC_MTCP_NATIVE"]=1,t[e[2]="SDK_TYPE_WSS_NATIVE"]=2,t[e[3]="SDK_TYPE_WSS_WEB"]=3,t}(),e.ZegoconnRunEnv=function(){const e={},t=Object.create(e);return t[e[0]="ZEGOCONN_RUN_ENV_UNSET"]=0,t[e[1]="ZEGOCONN_RUN_ENV_BROWSER"]=1,t[e[2]="ZEGOCONN_RUN_ENV_APPLET"]=2,t}(),e.BackendConnType=function(){const e={},t=Object.create(e);return t[e[0]="BACKEND_CONN_TYPE_UNSET"]=0,t[e[1]="BACKEND_CONN_TYPE_TCP"]=1,t[e[2]="BACKEND_CONN_TYPE_WSS"]=2,t}(),e.ConnectionClosed=(w.prototype.code=0,w.prototype.msg="",w.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},w.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.ConnectionClosed;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&s)}}return o},w),e.StreamClosed=(M.prototype.code=0,M.prototype.msg="",M.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),t},M.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.StreamClosed;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;default:e.skipType(7&s)}}return o},M),e.CloseConnection=(A.prototype.reason=0,A.prototype.msg="",A.prototype.action=0,A.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(24).int32(e.action),t},A.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.CloseConnection;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.action=e.int32();break;default:e.skipType(7&s)}}return o},A.Action=function(){const e={},t=Object.create(e);return t[e[0]="ACTION_RESERVED"]=0,t[e[1]="ACTION_DISPATCH"]=1,t[e[2]="ACTION_RETRY"]=2,t[e[3]="ACTION_NEXT_NODE"]=3,t[e[4]="ACTION_ABORT"]=4,t[e[5]="ACTION_NEXT_GROUP"]=5,t}(),A),e.HTTPRequest=(L.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,L.prototype.appid=0,L.prototype.biz_type=0,L.prototype.mode="",L.prototype.id_name="",L.prototype.reqid="",L.prototype.stick="",L.prototype.service="",L.prototype.location="",L.prototype.method="",L.prototype.headers=s.emptyArray,L.prototype.body=s.newBuffer([]),L.prototype.ack=!1,L.prototype.mode_no=0,L.prototype.service_no=0,L.prototype.method_no=0,L.prototype.sdk_type=0,L.prototype.zegoconn_run_env=0,L.prototype.zegoconn_version=0,L.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(let r=0;r<e.headers.length;++r)i.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},L.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HTTPRequest;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.stick=e.string();break;case 8:o.service=e.string();break;case 9:o.location=e.string();break;case 10:o.method=e.string();break;case 11:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(i.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 12:o.body=e.bytes();break;case 13:o.ack=e.bool();break;case 14:o.mode_no=e.int32();break;case 15:o.service_no=e.int32();break;case 16:o.method_no=e.int32();break;case 17:o.sdk_type=e.int32();break;case 18:o.zegoconn_run_env=e.int32();break;case 19:o.zegoconn_version=e.uint32();break;default:e.skipType(7&s)}}return o},L.HTTPHeader=(P.prototype.name="",P.prototype.val="",P.encode=function(e,t){return t=t||o.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},P.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HTTPRequest.HTTPHeader;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.name=e.string();break;case 2:o.val=e.string();break;default:e.skipType(7&s)}}return o},P),L),e.HTTPResponse=(k.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,k.prototype.headers=s.emptyArray,k.prototype.status_code=0,k.prototype.body=s.newBuffer([]),k.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.headers&&e.headers.length)for(let r=0;r<e.headers.length;++r)i.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(18).fork()).ldelim();return null!=e.status_code&&Object.hasOwnProperty.call(e,"status_code")&&t.uint32(24).int32(e.status_code),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(34).bytes(e.body),t},k.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HTTPResponse;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(i.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:o.status_code=e.int32();break;case 4:o.body=e.bytes();break;default:e.skipType(7&s)}}return o},k),e.HTTPRequestAck=(N.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,N.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},N.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HTTPRequestAck;for(;e.pos<r;){var s=e.uint32();s>>>3==1?o.txid=e.uint64():e.skipType(7&s)}return o},N),e.HTTPRequestDroped=(I.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,I.prototype.reason=0,I.prototype.msg="",I.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(16).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(26).string(e.msg),t},I.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HTTPRequestDroped;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.reason=e.int32();break;case 3:o.msg=e.string();break;default:e.skipType(7&s)}}return o},I),e.ProxyConnectionClosed=(C.prototype.code=0,C.prototype.msg="",C.prototype.connected=0,C.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.connected&&Object.hasOwnProperty.call(e,"connected")&&t.uint32(24).int32(e.connected),t},C.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.ProxyConnectionClosed;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.msg=e.string();break;case 3:o.connected=e.int32();break;default:e.skipType(7&s)}}return o},C),e.HBRequest=(R.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,R.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,R.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},R.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HBRequest;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&s)}}return o},R),e.HBResponse=(O.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,O.prototype.ts=s.Long?s.Long.fromBits(0,0,!1):0,O.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).int64(e.ts),t},O.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.HBResponse;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.ts=e.int64();break;default:e.skipType(7&s)}}return o},O),e.GetConfigRequest=(b.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,b.prototype.appid=0,b.prototype.biz_type=0,b.prototype.mode="",b.prototype.id_name="",b.prototype.reqid="",b.prototype.zegoconn_version=0,b.prototype.sdk_type=0,b.prototype.zegoconn_run_env=0,b.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(64).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(72).int32(e.zegoconn_run_env),t},b.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetConfigRequest;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode=e.string();break;case 5:o.id_name=e.string();break;case 6:o.reqid=e.string();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.sdk_type=e.int32();break;case 9:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&s)}}return o},b),e.GetConfigResponseData=(v.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,v.prototype.quic_hb_interval=0,v.prototype.quic_hb_timeout=0,v.prototype.logic_hb_interval=0,v.prototype.logic_hb_timeout=0,v.prototype.pc_establish_timeout=0,v.prototype.sdk_link_detect_interval=0,v.prototype.sdk_link_detect_duration=0,v.prototype.client_outer_ip="",v.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.quic_hb_interval&&Object.hasOwnProperty.call(e,"quic_hb_interval")&&t.uint32(16).uint32(e.quic_hb_interval),null!=e.quic_hb_timeout&&Object.hasOwnProperty.call(e,"quic_hb_timeout")&&t.uint32(24).uint32(e.quic_hb_timeout),null!=e.logic_hb_interval&&Object.hasOwnProperty.call(e,"logic_hb_interval")&&t.uint32(32).uint32(e.logic_hb_interval),null!=e.logic_hb_timeout&&Object.hasOwnProperty.call(e,"logic_hb_timeout")&&t.uint32(40).uint32(e.logic_hb_timeout),null!=e.pc_establish_timeout&&Object.hasOwnProperty.call(e,"pc_establish_timeout")&&t.uint32(48).uint32(e.pc_establish_timeout),null!=e.sdk_link_detect_interval&&Object.hasOwnProperty.call(e,"sdk_link_detect_interval")&&t.uint32(56).uint32(e.sdk_link_detect_interval),null!=e.sdk_link_detect_duration&&Object.hasOwnProperty.call(e,"sdk_link_detect_duration")&&t.uint32(64).uint32(e.sdk_link_detect_duration),null!=e.client_outer_ip&&Object.hasOwnProperty.call(e,"client_outer_ip")&&t.uint32(74).string(e.client_outer_ip),t},v.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetConfigResponseData;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.quic_hb_interval=e.uint32();break;case 3:o.quic_hb_timeout=e.uint32();break;case 4:o.logic_hb_interval=e.uint32();break;case 5:o.logic_hb_timeout=e.uint32();break;case 6:o.pc_establish_timeout=e.uint32();break;case 7:o.sdk_link_detect_interval=e.uint32();break;case 8:o.sdk_link_detect_duration=e.uint32();break;case 9:o.client_outer_ip=e.string();break;default:e.skipType(7&s)}}return o},v),e.GetConfigResponse=(S.prototype.code=0,S.prototype.message="",S.prototype.data=null,S.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&i.proto_accesshub.GetConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},S.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetConfigResponse;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=i.proto_accesshub.GetConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},S),e.PCUpwardMessage=(T.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,T.prototype.appid=0,T.prototype.biz_type=0,T.prototype.mode_no=0,T.prototype.id_name="",T.prototype.service_no=0,T.prototype.ack=!1,T.prototype.payload=s.newBuffer([]),T.prototype.sdk_type=0,T.prototype.wss_message_type=0,T.prototype.wss_path="",T.prototype.wss_raw_query="",T.prototype.zegoconn_version=0,T.prototype.zegoconn_run_env=0,T.prototype.backend_conn_type=0,T.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),null!=e.backend_conn_type&&Object.hasOwnProperty.call(e,"backend_conn_type")&&t.uint32(120).int32(e.backend_conn_type),t},T.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PCUpwardMessage;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.service_no=e.int32();break;case 7:o.ack=e.bool();break;case 8:o.payload=e.bytes();break;case 9:o.sdk_type=e.int32();break;case 10:o.wss_message_type=e.uint32();break;case 11:o.wss_path=e.string();break;case 12:o.wss_raw_query=e.string();break;case 13:o.zegoconn_version=e.uint32();break;case 14:o.zegoconn_run_env=e.int32();break;case 15:o.backend_conn_type=e.int32();break;default:e.skipType(7&s)}}return o},T),e.PCUpwardMessageAck=(E.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,E.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),t},E.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PCUpwardMessageAck;for(;e.pos<r;){var s=e.uint32();s>>>3==1?o.txid=e.uint64():e.skipType(7&s)}return o},E),e.PCEstablished=(y.prototype.elapse=0,y.prototype.from=0,y.encode=function(e,t){return t=t||o.create(),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(8).uint32(e.elapse),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(16).uint32(e.from),t},y.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PCEstablished;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.elapse=e.uint32();break;case 2:o.from=e.uint32();break;default:e.skipType(7&s)}}return o},y),e.PCBroken=(m.encode=function(e,t){return t||o.create()},m.decode=function(e,t){e instanceof n||(e=n.create(e));var r=void 0===t?e.len:e.pos+t;for(t=new i.proto_accesshub.PCBroken;e.pos<r;){var o=e.uint32();e.skipType(7&o)}return t},m),e.PCDownwardMessage=(g.prototype.payload=s.newBuffer([]),g.prototype.wss_message_type=0,g.encode=function(e,t){return t=t||o.create(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(10).bytes(e.payload),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(16).uint32(e.wss_message_type),t},g.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PCDownwardMessage;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.payload=e.bytes();break;case 2:o.wss_message_type=e.uint32();break;default:e.skipType(7&s)}}return o},g),e.Redirect=(f.prototype.rand="",f.prototype.secret="",f.prototype.groups=s.emptyArray,f.prototype.opt_ports=s.emptyArray,f.prototype.wss_groups=s.emptyArray,f.encode=function(e,t){if(t=t||o.create(),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(10).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(18).string(e.secret),null!=e.groups&&e.groups.length)for(let r=0;r<e.groups.length;++r)i.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(26).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let r=0;r<e.opt_ports.length;++r)t.uint32(32).uint32(e.opt_ports[r]);if(null!=e.wss_groups&&e.wss_groups.length)for(let r=0;r<e.wss_groups.length;++r)i.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[r],t.uint32(42).fork()).ldelim();return t},f.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.Redirect;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.rand=e.string();break;case 2:o.secret=e.string();break;case 3:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(i.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 5:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(i.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},f),e.GetAppConfigRequest=(d.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,d.prototype.appid=0,d.prototype.biz_type=0,d.prototype.mode_no=0,d.prototype.id_name="",d.prototype.config_key="",d.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,d.prototype.signature=s.newBuffer([]),d.prototype.lite_sign="",d.prototype.token="",d.prototype.sdk_type=0,d.prototype.zegoconn_version=0,d.prototype.zegoconn_run_env=0,d.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(50).string(e.config_key),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(56).uint64(e.ts),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(66).bytes(e.signature),null!=e.lite_sign&&Object.hasOwnProperty.call(e,"lite_sign")&&t.uint32(74).string(e.lite_sign),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(82).string(e.token),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(88).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(96).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(104).int32(e.zegoconn_run_env),t},d.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetAppConfigRequest;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.config_key=e.string();break;case 7:o.ts=e.uint64();break;case 8:o.signature=e.bytes();break;case 9:o.lite_sign=e.string();break;case 10:o.token=e.string();break;case 11:o.sdk_type=e.int32();break;case 12:o.zegoconn_version=e.uint32();break;case 13:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&s)}}return o},d),e.GetAppConfigResponseData=(_.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,_.prototype.data=s.newBuffer([]),_.prototype.ts=s.Long?s.Long.fromBits(0,0,!0):0,_.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(24).uint64(e.ts),t},_.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetAppConfigResponseData;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.data=e.bytes();break;case 3:o.ts=e.uint64();break;default:e.skipType(7&s)}}return o},_),e.GetAppConfigResponse=(p.prototype.code=0,p.prototype.message="",p.prototype.data=null,p.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&i.proto_accesshub.GetAppConfigResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},p.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.GetAppConfigResponse;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=i.proto_accesshub.GetAppConfigResponseData.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},p),e.PushAppConfig=(h.prototype.config_key="",h.prototype.data=s.newBuffer([]),h.encode=function(e,t){return t=t||o.create(),null!=e.config_key&&Object.hasOwnProperty.call(e,"config_key")&&t.uint32(10).string(e.config_key),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},h.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PushAppConfig;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.config_key=e.string();break;case 2:o.data=e.bytes();break;default:e.skipType(7&s)}}return o},h),e.AccesshubDispatchRequest=(u.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,u.prototype.appid=0,u.prototype.biz_type=0,u.prototype.mode_no=0,u.prototype.id_name="",u.prototype.sdk_type=0,u.prototype.zegoconn_version=0,u.prototype.zegoconn_run_env=0,u.encode=function(e,t){return t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},u.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.AccesshubDispatchRequest;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.appid=e.uint32();break;case 3:o.biz_type=e.uint32();break;case 4:o.mode_no=e.int32();break;case 5:o.id_name=e.string();break;case 6:o.sdk_type=e.int32();break;case 7:o.zegoconn_version=e.uint32();break;case 8:o.zegoconn_run_env=e.int32();break;default:e.skipType(7&s)}}return o},u),e.AccesshubDispatchGroup=(l.prototype.group="",l.prototype.quic_nodes=s.emptyArray,l.prototype.mtcp_nodes=s.emptyArray,l.prototype.wss_nodes=s.emptyArray,l.encode=function(e,t){if(t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.quic_nodes&&e.quic_nodes.length)for(let r=0;r<e.quic_nodes.length;++r)t.uint32(18).string(e.quic_nodes[r]);if(null!=e.mtcp_nodes&&e.mtcp_nodes.length)for(let r=0;r<e.mtcp_nodes.length;++r)t.uint32(26).string(e.mtcp_nodes[r]);if(null!=e.wss_nodes&&e.wss_nodes.length)for(let r=0;r<e.wss_nodes.length;++r)t.uint32(34).string(e.wss_nodes[r]);return t},l.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.AccesshubDispatchGroup;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.group=e.string();break;case 2:o.quic_nodes&&o.quic_nodes.length||(o.quic_nodes=[]),o.quic_nodes.push(e.string());break;case 3:o.mtcp_nodes&&o.mtcp_nodes.length||(o.mtcp_nodes=[]),o.mtcp_nodes.push(e.string());break;case 4:o.wss_nodes&&o.wss_nodes.length||(o.wss_nodes=[]),o.wss_nodes.push(e.string());break;default:e.skipType(7&s)}}return o},l),e.WssAccesshubDispatchGroup=(c.prototype.group="",c.prototype.host="",c.encode=function(e,t){return t=t||o.create(),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.host&&Object.hasOwnProperty.call(e,"host")&&t.uint32(18).string(e.host),t},c.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.WssAccesshubDispatchGroup;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.group=e.string();break;case 2:o.host=e.string();break;default:e.skipType(7&s)}}return o},c),e.AccesshubDispatchResponseData=(a.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,a.prototype.rand="",a.prototype.secret="",a.prototype.groups=s.emptyArray,a.prototype.opt_ports=s.emptyArray,a.prototype.wss_groups=s.emptyArray,a.encode=function(e,t){if(t=t||o.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.rand&&Object.hasOwnProperty.call(e,"rand")&&t.uint32(18).string(e.rand),null!=e.secret&&Object.hasOwnProperty.call(e,"secret")&&t.uint32(26).string(e.secret),null!=e.groups&&e.groups.length)for(let r=0;r<e.groups.length;++r)i.proto_accesshub.AccesshubDispatchGroup.encode(e.groups[r],t.uint32(34).fork()).ldelim();if(null!=e.opt_ports&&e.opt_ports.length)for(let r=0;r<e.opt_ports.length;++r)t.uint32(40).uint32(e.opt_ports[r]);if(null!=e.wss_groups&&e.wss_groups.length)for(let r=0;r<e.wss_groups.length;++r)i.proto_accesshub.WssAccesshubDispatchGroup.encode(e.wss_groups[r],t.uint32(50).fork()).ldelim();return t},a.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.AccesshubDispatchResponseData;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.txid=e.uint64();break;case 2:o.rand=e.string();break;case 3:o.secret=e.string();break;case 4:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(i.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 6:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(i.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},a),e.AccesshubDispatchResponse=(r.prototype.code=0,r.prototype.message="",r.prototype.data=null,r.encode=function(e,t){return t=t||o.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&i.proto_accesshub.AccesshubDispatchResponseData.encode(e.data,t.uint32(26).fork()).ldelim(),t},r.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.AccesshubDispatchResponse;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=i.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},r),e.PushException=(t.prototype.reason=0,t.prototype.msg="",t.prototype.txid=s.Long?s.Long.fromBits(0,0,!0):0,t.encode=function(e,t){return t=t||o.create(),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(8).int32(e.reason),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).string(e.msg),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(24).uint64(e.txid),t},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_accesshub.PushException;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.txid=e.uint64();break;default:e.skipType(7&s)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function g(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function m(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function y(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}})(),c=i.proto_initconfig=(()=>{const e={};return e.ResourceType=function(){const e={},t=Object.create(e);return t[e[0]="CDN"]=0,t[e[1]="RTC"]=1,t[e[2]="L3"]=2,t}(),e.ProtocolType=function(){const e={},t=Object.create(e);return t[e[0]="UDP"]=0,t[e[1]="RTMP"]=1,t[e[2]="FLV"]=2,t[e[3]="HLS"]=3,t[e[4]="WEBRTC"]=4,t}(),e.ResolveType=function(){const e={},t=Object.create(e);return t[e[0]="LOCAL_DNS"]=0,t[e[1]="DISPATCH"]=1,t}(),e.AppConfig=(p.prototype.test_id=null,p.prototype.domain=null,p.prototype.flexible_domain=null,p.prototype.replace_flexible_domain=null,Object.defineProperty(p.prototype,"_test_id",{get:s.oneOfGetter(r=["test_id"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_domain",{get:s.oneOfGetter(r=["domain"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_flexible_domain",{get:s.oneOfGetter(r=["flexible_domain"]),set:s.oneOfSetter(r)}),Object.defineProperty(p.prototype,"_replace_flexible_domain",{get:s.oneOfGetter(r=["replace_flexible_domain"]),set:s.oneOfSetter(r)}),p.encode=function(e,t){return t=t||o.create(),null!=e.test_id&&Object.hasOwnProperty.call(e,"test_id")&&t.uint32(8).int32(e.test_id),null!=e.domain&&Object.hasOwnProperty.call(e,"domain")&&t.uint32(18).string(e.domain),null!=e.flexible_domain&&Object.hasOwnProperty.call(e,"flexible_domain")&&t.uint32(26).string(e.flexible_domain),null!=e.replace_flexible_domain&&Object.hasOwnProperty.call(e,"replace_flexible_domain")&&t.uint32(34).string(e.replace_flexible_domain),t},p.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.AppConfig;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.test_id=e.int32();break;case 2:o.domain=e.string();break;case 3:o.flexible_domain=e.string();break;case 4:o.replace_flexible_domain=e.string();break;default:e.skipType(7&s)}}return o},p),e.MediaServiceProtocolInfo=(h.prototype.config_id=null,h.prototype.protocol=null,h.prototype.url_template=null,h.prototype.resolve_type=null,h.prototype.push_cdn_authentication=null,h.prototype.cdn_quic_version=s.emptyArray,Object.defineProperty(h.prototype,"_config_id",{get:s.oneOfGetter(r=["config_id"]),set:s.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_protocol",{get:s.oneOfGetter(r=["protocol"]),set:s.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_url_template",{get:s.oneOfGetter(r=["url_template"]),set:s.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_resolve_type",{get:s.oneOfGetter(r=["resolve_type"]),set:s.oneOfSetter(r)}),Object.defineProperty(h.prototype,"_push_cdn_authentication",{get:s.oneOfGetter(r=["push_cdn_authentication"]),set:s.oneOfSetter(r)}),h.encode=function(e,t){if(t=t||o.create(),null!=e.config_id&&Object.hasOwnProperty.call(e,"config_id")&&t.uint32(10).string(e.config_id),null!=e.protocol&&Object.hasOwnProperty.call(e,"protocol")&&t.uint32(16).int32(e.protocol),null!=e.url_template&&Object.hasOwnProperty.call(e,"url_template")&&t.uint32(26).string(e.url_template),null!=e.resolve_type&&Object.hasOwnProperty.call(e,"resolve_type")&&t.uint32(32).int32(e.resolve_type),null!=e.push_cdn_authentication&&Object.hasOwnProperty.call(e,"push_cdn_authentication")&&t.uint32(40).int32(e.push_cdn_authentication),null!=e.cdn_quic_version&&e.cdn_quic_version.length){t.uint32(50).fork();for(let r=0;r<e.cdn_quic_version.length;++r)t.int32(e.cdn_quic_version[r]);t.ldelim()}return t},h.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.MediaServiceProtocolInfo;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.config_id=e.string();break;case 2:o.protocol=e.int32();break;case 3:o.url_template=e.string();break;case 4:o.resolve_type=e.int32();break;case 5:o.push_cdn_authentication=e.int32();break;case 6:if(o.cdn_quic_version&&o.cdn_quic_version.length||(o.cdn_quic_version=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.cdn_quic_version.push(e.int32());else o.cdn_quic_version.push(e.int32());break;default:e.skipType(7&s)}}return o},h),e.MediaResourceInfo=(u.prototype.resource_type=null,u.prototype.service_info=s.emptyArray,Object.defineProperty(u.prototype,"_resource_type",{get:s.oneOfGetter(r=["resource_type"]),set:s.oneOfSetter(r)}),u.encode=function(e,t){if(t=t||o.create(),null!=e.resource_type&&Object.hasOwnProperty.call(e,"resource_type")&&t.uint32(8).int32(e.resource_type),null!=e.service_info&&e.service_info.length)for(let r=0;r<e.service_info.length;++r)i.proto_initconfig.MediaServiceProtocolInfo.encode(e.service_info[r],t.uint32(18).fork()).ldelim();return t},u.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.MediaResourceInfo;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.resource_type=e.int32();break;case 2:o.service_info&&o.service_info.length||(o.service_info=[]),o.service_info.push(i.proto_initconfig.MediaServiceProtocolInfo.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},u),e.MediaPublishConfig=(l.prototype.resource_info=s.emptyArray,l.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let r=0;r<e.resource_info.length;++r)i.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(18).fork()).ldelim();return t},l.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.MediaPublishConfig;for(;e.pos<r;){var s=e.uint32();s>>>3==2?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(i.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&s)}return o},l),e.MediaPlayConfig=(c.prototype.resource_info=s.emptyArray,c.encode=function(e,t){if(t=t||o.create(),null!=e.resource_info&&e.resource_info.length)for(let r=0;r<e.resource_info.length;++r)i.proto_initconfig.MediaResourceInfo.encode(e.resource_info[r],t.uint32(42).fork()).ldelim();return t},c.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.MediaPlayConfig;for(;e.pos<r;){var s=e.uint32();s>>>3==5?(o.resource_info&&o.resource_info.length||(o.resource_info=[]),o.resource_info.push(i.proto_initconfig.MediaResourceInfo.decode(e,e.uint32()))):e.skipType(7&s)}return o},c),e.MediaConfig=(a.prototype.play_config=null,a.prototype.publish_config=null,Object.defineProperty(a.prototype,"_play_config",{get:s.oneOfGetter(r=["play_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(a.prototype,"_publish_config",{get:s.oneOfGetter(r=["publish_config"]),set:s.oneOfSetter(r)}),a.encode=function(e,t){return t=t||o.create(),null!=e.play_config&&Object.hasOwnProperty.call(e,"play_config")&&i.proto_initconfig.MediaPlayConfig.encode(e.play_config,t.uint32(10).fork()).ldelim(),null!=e.publish_config&&Object.hasOwnProperty.call(e,"publish_config")&&i.proto_initconfig.MediaPublishConfig.encode(e.publish_config,t.uint32(18).fork()).ldelim(),t},a.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.MediaConfig;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.play_config=i.proto_initconfig.MediaPlayConfig.decode(e,e.uint32());break;case 2:o.publish_config=i.proto_initconfig.MediaPublishConfig.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},a),e.InitConfig=(t.prototype.app_config=null,t.prototype.media_config=null,Object.defineProperty(t.prototype,"_app_config",{get:s.oneOfGetter(r=["app_config"]),set:s.oneOfSetter(r)}),Object.defineProperty(t.prototype,"_media_config",{get:s.oneOfGetter(r=["media_config"]),set:s.oneOfSetter(r)}),t.encode=function(e,t){return t=t||o.create(),null!=e.app_config&&Object.hasOwnProperty.call(e,"app_config")&&i.proto_initconfig.AppConfig.encode(e.app_config,t.uint32(10).fork()).ldelim(),null!=e.media_config&&Object.hasOwnProperty.call(e,"media_config")&&i.proto_initconfig.MediaConfig.encode(e.media_config,t.uint32(42).fork()).ldelim(),t},t.decode=function(e,t){e instanceof n||(e=n.create(e));let r=void 0===t?e.len:e.pos+t,o=new i.proto_initconfig.InitConfig;for(;e.pos<r;){var s=e.uint32();switch(s>>>3){case 1:o.app_config=i.proto_initconfig.AppConfig.decode(e,e.uint32());break;case 5:o.media_config=i.proto_initconfig.MediaConfig.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},t),e;function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;function a(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(this.resource_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(this.resource_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(this.service_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.cdn_quic_version=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}})()},function(e,t,r){"use strict";var n,o,s=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,s=t.length;o<s;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoWssLink=void 0,r(14)),l=r(0),u=r(15),h=r(16),p=r(3),_=r(1);function d(e,t,r,n,s){var i=o.call(this)||this;return i.appID=e,i.env=t,i.protobuf=r,i.logger=n,i.stateCenter=s,i.socketService=new h.NetSocketService(i.env),i.urlIndex=0,i.updatedMsgTime=0,i.unUpdateMsgTimeTypes=[l.AccessHubMessageType.MSG_TYPE_HB_REQUEST,l.AccessHubMessageType.MSG_TYPE_HB_RESPONSE,l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,l.AccessHubMessageType.MSG_TYPE_GET_CONFIG_RESPONSE],i.netLinkState=l.ENUM_CONNECT_STATE.disconnect,i.sendCommandList=new c.LinkedList,i.unSendCommandList=new c.LinkedList,i.sendCommandMap={},i.unSendCommandMap={},i.sendDataCheckOnceCount=100,i.sendDataDropTimeout=1e4,i.sendDataCheckInterval=2e3,i.timeout=5e3,i.connectInterval=1e4,i.connectTimer=null,i.connectRsp={},i.unlogTypes=[12,13],i.tryServers=[],i.updatedMsgTime=Date.now(),i}s(d,o=u.ZegoLink),d.prototype.initEvent=function(e,t,r,n){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=r,this.onPushEvent=n},d.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},d.prototype.destroySocket=function(){this.logger.info("zn.wl.ds.0 call"),this.socketService.closeSocket(),this.netLinkState=l.ENUM_CONNECT_STATE.disconnect,this.resetConnect()},d.prototype.refreshServers=function(e){this.servers=a(a([],e,!0),this.servers,!0)},d.prototype.connectSocket=function(e,t,r){var n=this;return void 0===e&&(e=!0),this.logger.info("zn.wl.cs.0 call"),this.connectRsp.suc=t,this.connectRsp.fail=r,this.stateCenter.networkState===l.ENUM_NETWORK_STATE.online&&(e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.connectServer=t=this.servers[this.urlIndex],this.logger.info("zn.wl.cs.0 server "+t),this.tryServers.push(t),this.closeSocket(),this.netLinkState=l.ENUM_CONNECT_STATE.connecting,this.socketService.createSocket(t),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){n.logger.info("zn.wl.cs.0 timeout"),n.connectRsp.fail&&n.connectRsp.fail()}),this.connectInterval),!0)},d.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info("zn.wl.bse open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=l.ENUM_CONNECT_STATE.connected,e.onConnectedEvent&&e.onConnectedEvent(e.tryServers),e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn("zn.wl.bse close "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=l.ENUM_CONNECT_STATE.disconnect})),this.errorHandler((function(t){e.logger.warn("zn.wl.bse error "+JSON.stringify(t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=l.ENUM_CONNECT_STATE.disconnect})),this.onMessage()},d.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=l.ENUM_CONNECT_STATE.disconnect},d.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},d.prototype.isConnect=function(){return this.netLinkState===l.ENUM_CONNECT_STATE.connected},d.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},d.prototype.isConnecting=function(){return this.netLinkState===l.ENUM_CONNECT_STATE.connecting},d.prototype.setState=function(e){this.netLinkState=e},d.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},d.prototype.openHandler=function(e){this.socketService.openHandler(e)},d.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},d.prototype.updateMsgTime=function(){this.updatedMsgTime=Date.now()},d.prototype.sendMessage=function(e,t,r,n,o,s,a,c){void 0===n&&(n=!0),void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=null),void 0===(c=void 0===c?{}:c).timeout&&(c.timeout=5e3),void 0===c.isInSendMap&&(c.isInSendMap=!0),this.txid++,n={appid:this.appID,biz_type:0,mode_no:(null==(n=this.stateCenter.appInfo)?void 0:n.mode)||_.NET_ACCESS_CONFIG.modeNo,id_name:this.stateCenter.userId,sdk_type:_.NET_ACCESS_CONFIG.sdkType,zegoconn_run_env:0===this.env?l.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_BROWSER:l.ZegoconnRunEnv.ZEGOCONN_RUN_ENV_APPLET},r={data:n=i(i({txid:this.txid},n),r),txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:c.timeout||this.timeout,ack:r.ack,success:o,error:s,ackFunc:a,isSend:!0,isCheck:e!==l.AccessHubMessageType.MSG_TYPE_PC_UPWARD_MESSAGE},c.isInSendMap&&(o=this.sendCommandList.push(r),this.sendCommandMap[this.txid]=o),this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+l.typeMap[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,n,t):(r.isSend=!1,s=this.unSendCommandList.push(r),this.unSendCommandMap[this.txid]=s)},d.prototype.checkUnSendMsgs=function(e){for(var t,r=e.getFirst();null!=r;)e.remove(r),r._data&&!1===(null==(t=r._data)?void 0:t.isSend)&&r._data.type&&r._data.streamID&&r._data.data&&(this.sendUint8Data(r._data.type,r._data.data,r._data.streamID),r._data.isSend=!0),r=e.getFirst()},d.prototype.sendUint8Data=function(e,t,r){e=this.protobuf.encodeRequest(e,t,r),this.socketService.sendMessage(e)},d.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var r,n=(t=e.protobuf.decodeResponse(t))[0],o=t[1];t=t[2],e.unUpdateMsgTimeTypes.includes(o)||(e.updatedMsgTime=Date.now()),-1===e.unlogTypes.indexOf(o)&&e.logger.info("zn.wl.om"+" streamID: ".concat(n,", msgType: ").concat(o,"-").concat(l.typeMap[o])),(null!=t&&t.txid||null!=(r=null==t?void 0:t.data)&&r.txid)&&e.isRspMsg((null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid))?e.handleSendCommandMsgRsp(n,o,(null==t?void 0:t.txid)||(null==(r=null==t?void 0:t.data)?void 0:r.txid),t):e.onPushEvent(n,o,t)}},d.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},d.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},d.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},d.prototype.checkMessageListTimeout=function(e,t){for(var r,n=e.getFirst(),o=Date.now(),s=0,i=this;null!=n&&"break"!==function(){return n._data&&n._data.sendTime+n._data.timeOut>o?"break":(n._data&&delete t[n._data.data.txid],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+i.sendDataDropTimeout<o||(a=n&&n._data&&n._data.error,c=n&&n._data&&n._data.txid,l=n&&n._data&&(null==(r=n._data)?void 0:r.isCheck),setTimeout((function(){l&&a&&a({},c,p.errorCodeList.TIMEOUT)}),0)),++s>=i.sendDataCheckOnceCount?"break":void(n=e.getFirst()));var a,c,l}(););},d.prototype.checkSendMessageList=function(e){for(var t,r=e.getFirst();null!=r&&r._data;)!function(){var n,o,s;e.remove(r),r._data.isSend&&r._data.error&&(n=r&&r._data&&r._data.error,o=r&&r._data&&r._data.txid,s=r&&r._data&&(null==(t=r._data)?void 0:t.isCheck),setTimeout((function(){s&&n&&n({},o,p.errorCodeList.TIMEOUT)}),0)),r=e.getFirst()}()},d.prototype.handleSendCommandMsgRsp=function(e,t,r,n){var o,s=this.sendCommandMap[r];null!=s&&(null!=(o=s._data)&&o.ack||(delete this.sendCommandMap[r],this.sendCommandList.remove(s)),n.code&&0!==n.code?o&&null!=o.error&&o.error(n,r):t===l.AccessHubMessageType.MSG_TYPE_PUSH_EXCEPTION?(n.code=n.reason,n.message=n.msg,o&&null!=o.error&&o.error(n,r)):t===l.AccessHubMessageType.MSG_TYPE_HTTP_REQUEST_ACK?o&&null!=o.ackFunc&&o.ackFunc(n,r):o&&null!=o.success&&o.success(n,r))},t.ZegoWssLink=r=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(o.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),o.prototype.hasNext=function(){return this.next&&this.next.id},o.prototype.hasPrev=function(){return this.prev&&this.prev.id};var n=o;function o(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function s(){this.start=new n,this.end=new n,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=n,s.prototype.insertBefore=function(e,t){return(t=new n(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},s.prototype.addLast=function(e){return this.insertBefore(this.end,e)},s.prototype.add=function(e){return this.addLast(e)},s.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},s.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},s.prototype.size=function(){return this._numNodes},s.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},s.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},s.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},s.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},s.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},s.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},s.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},s.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},s.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},s.prototype.push=function(e){return this.addLast(e)},s.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},s.prototype.pop=function(){return this.removeLast()},s.prototype.shift=function(){return this.removeFirst()},t.LinkedList=s},function(e,t,r){"use strict";function n(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLink=void 0,n.prototype.createSocket=function(e){},n.prototype.setState=function(e){},n.prototype.initEvent=function(e,t,r,n){},n.prototype.sendMessage=function(e,t,r,n,o,s,i,a){void 0===n&&(n=!0),void 0===o&&(o=null),void 0===s&&(s=null),void 0===i&&(i=null)},t.ZegoLink=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetSocketService=void 0;var n=r(17);function o(e){this.socket=null,this.ENV=e}o.prototype.createSocket=function(e){this.socket=(0,n.createZegoWebSocket)(e,this.ENV%2)},o.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},o.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},o.prototype.onMessage=function(e){},o.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},o.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},o.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},o.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},o.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.ENV%2!=1&&this.socket.send(e)},t.NetSocketService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=t.ZEGO_ENV=void 0,(o=n=t.ZEGO_ENV||(t.ZEGO_ENV={}))[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",i.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},i.prototype.onopen=function(e){},i.prototype.onerror=function(e){},i.prototype.onclose=function(e){},i.prototype.onmessage=function(e){},i.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},i.prototype.close=function(){this._websocket&&this._websocket.close()};var n,o,s=i;function i(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=s,t.createZegoWebSocket=function(e,t){return new(t%2===n.BROWSER?WebSocket:s)(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentBusinessRequestMgr=void 0;var n=r(0),o=r(1);function s(e,t,r,n){this.streamManager=e,this.protobuf=t,this.logger=r,this.stateCenter=n}s.prototype.getConfig=function(e,t){this.logger.info("zn.nab.gc call"),this.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_GET_CONFIG_REQUEST,{zegoconn_version:o.NET_ACCESS_CONFIG.connectVer},e,t)},s.prototype.dispatchURL=function(e,t){var r=this;this.logger.info("zn.nab.du call"),this.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST,{},(function(t){r.logger.info("zn.nab.du suc "),e&&e(t)}),(function(e,n,o){r.logger.info("zn.nab.du fail"),t&&t(o||e)}))},s.prototype.getAppConfig=function(e,t,r,s){var i=this;return new Promise((function(a,c){function l(e,t,r){if(r)return i.logger.error("zn.nab.gac fail "+JSON.stringify(r)),void c(r);0===e.code?(i.logger.info("zn.nab.gac suc"),r=i.decodeConfigMessage(e.data.data),a({code:0,data:r})):(i.logger.error("zn.nab.gac fail "+e.code),c({code:e.code}))}i.logger.info("zn.nab.gac call");var u={id_name:t,config_key:e,token:r,mode_no:(null==(u=i.stateCenter.appInfo)?void 0:u.mode)||o.NET_ACCESS_CONFIG.modeNo};i.streamManager.createStream(n.StreamType.OTHER).sendMessage(n.AccessHubMessageType.MSG_TYPE_GET_APPCONFIG_REQUEST,u,l,l,null,{timeout:s})}))},s.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},t.NetAgentBusinessRequestMgr=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetHeartBeatHandler=void 0;var n=r(3),o=r(0);function s(e,t){this.streamManager=e,this.logger=t,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}s.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(o.StreamType.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},s.prototype.start=function(){var e=this;if(this.logger.debug("zn.nhb.s call "),this.tryHbCount++>this.hbTimeoutMaxCount)return this.logger.error("zn.nhb.s come to try limit"),this.reset(),void this.netHbLogout(n.errorCodeList.NET_HB_TIMEOUT);function t(t,n,o){e.logger.debug("zn.nhb.s hb callback "+((new Date).getTime()-r)),o&&0!==(null==o?void 0:o.code)?e.logger.info("zn.nhb.s fail "+JSON.stringify(o)):e.tryHbCount=0}var r=(new Date).getTime(),s={ts:Date.now()};this.hbStream.sendMessage(o.AccessHubMessageType.MSG_TYPE_HB_REQUEST,s,t,t,null),this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){e.start()}),1e3*this.hbInterval)},s.prototype.netHbLogout=function(e){},s.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},t.NetHeartBeatHandler=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetAgentPCRequestMgr=void 0;var n=r(0),o=r(1),s=r(5);function i(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=o.NET_ACCESS_CONFIG.pcEstablishTimeout}i.prototype.getRequest=function(e,t){return e=new s.NetAgentPCRequest(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},i.prototype.updateConnectState=function(e,t,r){this.pcStreamRequests.forEach((function(o){e===n.PcConnectState.BROKEN?o.eventManager.emit("broken"):e===n.PcConnectState.DISCONNECT&&o.eventManager.emit("disconnected",t,r)}))},i.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},i.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},t.NetAgentPCRequestMgr=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetRetryLinkHandler=void 0;var n=r(3),o=r(0);function s(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1,this.RETRY_MAX_TIME=90}s.prototype.initLink=function(e){this.link=e},s.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.warn("zn.rlh.sm"+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(),e.stopMaxTime(),e.invalid(),e.onactive(!1,n.errorCodeList.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},s.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},s.prototype.active=function(e,t){var r,n=this;return this.logger.info("zn.rlh.at call "+e+" "+t),this.stateCenter.networkState==o.ENUM_NETWORK_STATE.offline?(this.logger.info("zn.rlh.at network is broken, stop retry"),!1):this.retryTimer?(this.logger.info("zn.rlh.at has actived, ignore"),!1):this.isOverTime?(this.logger.info("zn.rlh.at retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(r=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=r>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:r),this.logger.info("zn.rlh.at interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){n.link.destroySocket(),n.link.connectSocket(e,(function(){n.logger.info("zn.rlh.at suc"),n.stopMaxTime(),n.invalid(),n.onactive(!0)}),(function(){n.logger.info("zn.rlh.at fail"),n.maxTimer||n.startMaxTime(),n.active(!0)})),n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=null,n.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},s.prototype.onactive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},s.prototype.init=function(e,t,r,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},s.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t.NetRetryLinkHandler=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0;var n=r(0);t.StateCenter=function(){this.networkState=n.ENUM_NETWORK_STATE.offline,this.useNetAgent=!0}},function(e,t,r){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLogger=void 0,n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.log(r)},n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.debug(r)},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.info(r)},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.warn(r)},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.join(" ");console.error(r)},t.ZegoLogger=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamManager=void 0;var n=r(0),o=r(25);function s(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}s.prototype.createStream=function(e){return e!==n.StreamType.HTTP&&e===n.StreamType.PC?(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.pcStreams.push(t),t):this.getStream(e,this.httpStreams);var t},s.prototype.getStream=function(e,t){return t=t.find((function(e){return!0===e.isFree})),t?(t.isFree=!1,t.isFirst=!1,t):(t=new o.ZegoLinkStream(e,this.streamID++,this.zegoLink),this.httpStreams.push(t),t)},s.prototype.onPushEvent=function(e,t,r){var n=this.pcStreams.find((function(t){return t.StreamID===e}));n&&n.onPushEvent(t,r)},s.prototype.getStreamID=function(){return this.streamID++},t.StreamManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLinkStream=void 0;var n=r(0);function o(e,t,r){this.type=e,this.streamID=t,this.zegoLink=r,this.isFree=!1,this.isFirst=!0}Object.defineProperty(o.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),o.prototype.refresh=function(e){this.streamID=e},o.prototype.sendMessage=function(e,t,r,o,s,i){var a=this;void 0===r&&(r=null),void 0===o&&(o=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e){a.type!==n.StreamType.PC&&(a.isFree=!0),r&&r(e)}),(function(e,t,r){a.type!==n.StreamType.PC&&(a.isFree=!0),o&&o(e,t,r)}),s=void 0===s?null:s,i=void 0===i?{timeout:5e3,isInSendMap:!0}:i)},o.prototype.onPushEvent=function(e,t){},o.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(n.AccessHubMessageType.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},o.prototype.isConnect=function(){return this.zegoLink.isConnect()},t.ZegoLinkStream=o}],a={},n.m=i,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8))},function(e,t,r){var n;e.exports=(n=r(2),function(){var e,t;"function"==typeof ArrayBuffer&&(t=(e=n.lib.WordArray).init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var r=e.byteLength,n=[],o=0;o<r;o++)n[o>>>2]|=e[o]<<24-o%4*8;t.call(this,n,r)}else t.apply(this,arguments)}).prototype=e)}(),n.lib.WordArray)},function(e,t,r){(function(t){e.exports=function e(t,r,n){function o(i,a){if(!r[i]){if(!t[i]){if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}c=r[i]={exports:{}},t[i][0].call(c.exports,(function(e){return o(t[i][1][e]||e)}),c,c.exports,e,t,r,n)}return r[i].exports}for(var s=!1,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,r,n){(function(e){"use strict";var t,n,o,s,i=e.MutationObserver||e.WebKitMutationObserver,a=i?(t=0,i=new i(l),n=e.document.createTextNode(""),i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)}:((o=new e.MessageChannel).port1.onmessage=l,function(){o.port2.postMessage(0)}),c=[];function l(){s=!0;for(var e,t,r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}s=!1}r.exports=function(e){1!==c.push(e)||s||a()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var n=e(1);function o(){}var s={},i=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&_(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return s.reject(e,n)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function _(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function o(t){r||(r=!0,s.resolve(e,t))}var i=d((function(){t(o,n)}));"error"===i.status&&n(i.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=l).prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var r=new this.constructor(o);return this.state!==c?h(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=d(p,t);if("error"===r.status)return s.reject(e,r.value);if(r=r.value)_(e,r);else{e.state=a,e.outcome=t;for(var n=-1,o=e.queue.length;++n<o;)e.queue[n].callFulfilled(t)}return e},s.reject=function(e,t){e.state=i,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(o),e)},l.reject=function(e){var t=new this(o);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),a=0,c=-1,l=new this(o);++c<r;)!function(e,o){t.resolve(e).then((function(e){i[o]=e,++a!==r||n||(n=!0,s.resolve(l,i))}),(function(e){n||(n=!0,s.reject(l,e))}))}(e[c],c);return l},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var i=-1,a=new this(o);++i<r;)!function(e){t.resolve(e).then((function(e){n||(n=!0,s.resolve(a,e))}),(function(e){n||(n=!0,s.reject(a,e))}))}(e[i]);return a}},{1:1}],3:[function(e,r,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var i=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",p=void 0,_={},d=Object.prototype.toString,f="readonly",g="readwrite";function m(e){return"boolean"==typeof p?i.resolve(p):(t=e,new i((function(e){var r=t.transaction(h,g),n=s([""]);r.objectStore(h).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||43<=parseInt(t[1],10))}})).catch((function(){return!1})).then((function(e){return p=e})));var t}function y(e){e=_[e.name];var t={};t.promise=new i((function(e,r){t.resolve=e,t.reject=r})),e.deferredOperations.push(t),e.dbReady=e.dbReady?e.dbReady.then((function(){return t.promise})):t.promise}function E(e){(e=_[e.name].deferredOperations.pop())&&e.resolve()}function T(e,t){if(e=_[e.name].deferredOperations.pop())return e.reject(t),e.promise}function S(e,t){return new i((function(r,n){if(_[e.name]=_[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);y(e),e.db.close()}var s=[e.name],i=(t&&s.push(e.version),o.open.apply(o,s));t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(h)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){r(i.result),E(e)}}))}function v(e){return S(e,!1)}function b(e){return S(e,!0)}function O(e,t){if(!e.db)return 1;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;return n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(o||r)&&(r&&(n=e.db.version+1)>e.version&&(e.version=n),1)}function R(e){return s([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function I(e){var t=this,r=t._initReady().then((function(){var e=_[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function N(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(o){if(0<n&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return i.resolve().then((function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),b(e)})).then((function(){return function(e){y(e);for(var t=_[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,v(e).then((function(t){return e.db=t,O(e)?b(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw T(e,t),t}))}(e).then((function(){N(e,t,r,n-1)}))})).catch(r);r(o)}}e={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=_[r.name],s=(o||(_[r.name]=o={forages:[],db:null,dbReady:null,deferredOperations:[]}),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=I),[]);function a(){return i.resolve()}for(var c=0;c<o.forages.length;c++){var l=o.forages[c];l!==t&&s.push(l._initReady().catch(a))}var u=o.forages.slice(0);return i.all(s).then((function(){return r.db=o.db,v(r)})).then((function(e){return r.db=e,O(r,t._defaultConfig.version)?b(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<u.length;n++){var s=u[n];s!==t&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}}))},_support:function(){try{if(!o||!o.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=new i((function(t,n){r.ready().then((function(){N(r._dbInfo,f,(function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).openCursor(),a=1;i.onsuccess=function(){var r,n=i.result;n?(C(r=n.value)&&(r=R(r)),void 0!==(r=e(r,n.key,a++))?t(r):n.continue()):t()},i.onerror=function(){n(i.error)}}catch(o){n(o)}}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=l(e),new i((function(t,n){r.ready().then((function(){N(r._dbInfo,f,(function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).get(e);i.onsuccess=function(){var e=i.result;C(e=void 0===e?null:e)&&(e=R(e)),t(e)},i.onerror=function(){n(i.error)}}catch(o){n(o)}}))})).catch(n)})));return a(n,t),n},setItem:function(e,t,r){var n=this,o=(e=l(e),new i((function(r,o){var s;n.ready().then((function(){return s=n._dbInfo,"[object Blob]"===d.call(t)?m(s.db).then((function(e){return e?t:(r=t,new i((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){t=btoa(t.target.result||""),e({__local_forage_encoded_blob:!0,data:t,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){N(n._dbInfo,g,(function(s,i){if(s)return o(s);try{var a=i.objectStore(n._dbInfo.storeName),c=(null===t&&(t=void 0),a.put(t,e));i.oncomplete=function(){r(t=void 0===t?null:t)},i.onabort=i.onerror=function(){o(c.error||c.transaction.error)}}catch(s){o(s)}}))})).catch(o)})));return a(o,r),o},removeItem:function(e,t){var r=this,n=(e=l(e),new i((function(t,n){r.ready().then((function(){N(r._dbInfo,g,(function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){n(i.error)},s.onabort=function(){n(i.error||i.transaction.error)}}catch(o){n(o)}}))})).catch(n)})));return a(n,t),n},clear:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){N(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){r(s.error||s.transaction.error)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){N(t._dbInfo,f,(function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){r(s.error)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new i((function(t,n){e<0?t(null):r.ready().then((function(){N(r._dbInfo,f,(function(o,s){if(o)return n(o);try{var i=s.objectStore(r._dbInfo.storeName),a=!1,c=i.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(o){n(o)}}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){N(t._dbInfo,f,(function(n,o){if(n)return r(n);try{var s=o.objectStore(t._dbInfo.storeName).openKeyCursor(),i=[];s.onsuccess=function(){var t=s.result;t?(i.push(t.key),t.continue()):e(i)},s.onerror=function(){r(s.error)}}catch(n){r(n)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),a(r=e.name?(r=e.name===r.name&&this._dbInfo.db?i.resolve(this._dbInfo.db):v(e).then((function(t){var r=_[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t})),r.then(e.storeName?function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1,n=(y(e),_[e.name]),s=n.forages;t.close();for(var a=0;a<s.length;a++){var c=s[a];c._dbInfo.db=null,c._dbInfo.version=r}return new i((function(t,n){var s=o.open(e.name,r);s.onerror=function(e){s.result.close(),n(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<s.length;t++){var r=s[t];r._dbInfo.db=e,E(r._dbInfo)}})).catch((function(t){throw(T(e,t)||i.resolve()).catch((function(){})),t}))}}:function(t){y(e);var r=_[e.name],n=r.forages;t.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;return new i((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)E(n[t]._dbInfo)})).catch((function(t){throw(T(e,t)||i.resolve()).catch((function(){})),t}))})):i.reject("Invalid arguments"),t),r}};var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",A=P.length,M=A+"arbf".length,w=Object.prototype.toString;function D(e){for(var t,r,n,o,s=.75*e.length,i=e.length,a=0,c=("="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--),s=new ArrayBuffer(s),new Uint8Array(s)),l=0;l<i;l+=4)t=k.indexOf(e[l]),r=k.indexOf(e[l+1]),n=k.indexOf(e[l+2]),o=k.indexOf(e[l+3]),c[a++]=t<<2|r>>4,c[a++]=(15&r)<<4|n>>2,c[a++]=(3&n)<<6|63&o;return s}function U(e){for(var t=new Uint8Array(e),r="",n=0;n<t.length;n+=3)r=(r=(r=(r+=k[t[n]>>2])+k[(3&t[n])<<4|t[n+1]>>4])+k[(15&t[n+1])<<2|t[n+2]>>6])+k[63&t[n+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var H={serialize:function(e,t){var r="";if(e&&(r=w.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===w.call(e.buffer))){var n,o=P;e instanceof ArrayBuffer?(n=e,o+="arbf"):(n=e.buffer,"[object Int8Array]"===r?o+="si08":"[object Uint8Array]"===r?o+="ui08":"[object Uint8ClampedArray]"===r?o+="uic8":"[object Int16Array]"===r?o+="si16":"[object Uint16Array]"===r?o+="ur16":"[object Int32Array]"===r?o+="si32":"[object Uint32Array]"===r?o+="ui32":"[object Float32Array]"===r?o+="fl32":"[object Float64Array]"===r?o+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(o+U(n))}else if("[object Blob]"===r)(o=new FileReader).onload=function(){var r="~~local_forage_type~"+e.type+"~"+U(this.result);t(P+"blob"+r)},o.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,A)!==P)return JSON.parse(e);var t,r=e.substring(M),n=e.substring(A,M),o=("blob"===n&&L.test(r)&&(t=(e=r.match(L))[1],r=r.substring(e[0].length)),D(r));switch(n){case"arbf":return o;case"blob":return s([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+n)}},stringToBuffer:D,bufferToString:U};function B(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function q(e,t,r,n,o,s){e.executeSql(r,n,o,(function(e,i){i.code===i.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,i):B(e,t,(function(){e.executeSql(r,n,o,s)}),s)}),s):s(e,i)}),s)}function j(e,t,r,n){var o=this,s=(e=l(e),new i((function(s,i){o.ready().then((function(){var a=t=void 0===t?null:t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?i(l):c.db.transaction((function(r){q(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){i(t)}))}),(function(t){t.code===t.QUOTA_ERR&&(0<n?s(j.apply(o,[e,a,r,n-1])):i(t))}))}))})).catch(i)})));return a(s,r),s}var x={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new i((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){B(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=H,o},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new i((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){q(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var s=n.rows,i=s.length,a=0;a<i;a++){var c=s.item(a),l=(l=c.value)&&o.serializer.deserialize(l);if(void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=l(e),new i((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){q(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){r=(r=r.rows.length?r.rows.item(0).value:null)&&o.serializer.deserialize(r),t(r)}),(function(e,t){n(t)}))}))})).catch(n)})));return a(n,t),n},setItem:function(e,t,r){return j.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this,n=(e=l(e),new i((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){q(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)})));return a(n,t),n},clear:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){q(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){q(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){r=r.rows.item(0).c,e(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new i((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){q(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){r=r.rows.length?r.rows.item(0).key:null,t(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new i((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){q(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config(),n=((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),this),o=e.name?new i((function(t){var o,s=e.name===r.name?n._dbInfo.db:openDatabase(e.name,"","",0);t(e.storeName?{db:s,storeNames:[e.storeName]}:(o=s,new i((function(e,t){o.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,r){for(var n=[],s=0;s<r.rows.length;s++)n.push(r.rows.item(s).name);e({db:o,storeNames:n})}),(function(e,r){t(r)}))}),(function(e){t(e)}))}))))})).then((function(e){return new i((function(t,r){e.db.transaction((function(n){for(var o=[],s=0,a=e.storeNames.length;s<a;s++)o.push(function(e){return new i((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}(e.storeNames[s]));i.all(o).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):i.reject("Invalid arguments");return a(o,t),o}};function G(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function z(e,t){for(var r,n,o=e.length,s=0;s<o;){if((r=e[s])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return 1;s++}}var V={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=G(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),0}catch(e){return 1}}()||0<localStorage.length?((this._dbInfo=t).serializer=H,i.resolve()):i.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,s=localStorage.length,i=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var l=(l=localStorage.getItem(c))&&t.serializer.deserialize(l);if(void 0!==(l=e(l,c.substring(o),i++)))return l}}}));return a(n,t),n},getItem:function(e,t){var r=this,n=(e=l(e),r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&t.serializer.deserialize(n)})));return a(n,t),n},setItem:function(e,t,r){var n=this,o=(e=l(e),n.ready().then((function(){var r=t=void 0===t?null:t;return new i((function(o,s){var i=n._dbInfo;i.serializer.serialize(t,(function(t,n){if(n)s(n);else try{localStorage.setItem(i.keyPrefix+e,t),o(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||s(t),s(t)}}))}))})));return a(o,r),o},removeItem:function(e,t){var r=this,n=(e=l(e),r.ready().then((function(){localStorage.removeItem(r._dbInfo.keyPrefix+e)})));return a(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;0<=r;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(n){t=null}return t&&t.substring(n.keyPrefix.length)}));return a(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var s=localStorage.key(o);0===s.indexOf(e.keyPrefix)&&n.push(s.substring(e.keyPrefix.length))}return n}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments),(e="function"!=typeof e&&e||{}).name||(n=this.config(),e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r=this,n=e.name?new i((function(t){t(e.storeName?G(e,r._defaultConfig):e.name+"/")})).then((function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):i.reject("Invalid arguments");return a(n,t),n}},W=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Z={},Y={},F={INDEXEDDB:e,WEBSQL:x,LOCALSTORAGE:V},K=(e=[F.INDEXEDDB._driver,F.WEBSQL._driver,F.LOCALSTORAGE._driver],["dropInstance"]),Q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(K),X={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function J(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=W(r[n])?r[n].slice():r[n])}return e}function $(e){var t,r,n;if(!(this instanceof $))throw new TypeError("Cannot call a class as a function");for(t in F)F.hasOwnProperty(t)&&(n=(r=F[t])._driver,this[t]=n,Z[n]||this.defineDriver(r));this._defaultConfig=J({},X),this._config=J({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}$.prototype.config=function(e){if("object"!==(void 0===e?"undefined":n(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},$.prototype.defineDriver=function(e,t,r){var n=new i((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var s=Q.concat("_initStorage"),c=0,l=s.length;c<l;c++){var u=s[c];if((!z(K,u)||e[u])&&"function"!=typeof e[u])return void r(o)}for(var h=0,p=K.length;h<p;h++){var _=K[h];e[_]||(e[_]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver");return a(t=i.reject(t),arguments[arguments.length-1]),t}}(_))}var d=function(r){Z[n]&&console.info("Redefining LocalForage driver: "+n),Z[n]=e,Y[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,r):d(!!e._support):d(!0)}catch(o){r(o)}}));return c(n,t,r),n},$.prototype.driver=function(){return this._driver||null},$.prototype.getDriver=function(e,t,r){return c(e=Z[e]?i.resolve(Z[e]):i.reject(new Error("Driver not found.")),t,r),e},$.prototype.getSerializer=function(e){var t=i.resolve(H);return c(t,e),t},$.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},$.prototype.setDriver=function(e,t,r){var n=this,o=(W(e)||(e=[e]),this._getSupportedDrivers(e));function s(){n._config.driver=n.driver()}function a(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}return e=null!==this._driverSet?this._driverSet.catch((function(){return i.resolve()})):i.resolve(),this._driverSet=e.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}s();var c=new Error("No available storage method found.");return n._driverSet=i.reject(c),n._driverSet}()}}(o)}))})).catch((function(){s();var e=new Error("No available storage method found.");return n._driverSet=i.reject(e),n._driverSet})),c(this._driverSet,t,r),this._driverSet},$.prototype.supports=function(e){return!!Y[e]},$.prototype._extend=function(e){J(this,e)},$.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},$.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Q.length;e<t;e++)!function(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}(this,Q[e])},$.prototype.createInstance=function(e){return new $(e)},x=new $,t.exports=x},{3:3}]},{},[4])(4)}).call(this,r(10))},function(e,t){},function(e,t,r){var n;e.exports=(e=r(2),n=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=this._map,o=(e.clamp(),[]),s=0;s<r;s+=3)for(var i=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<r;a++)o.push(n.charAt(i>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,r=this._map;if(!(o=this._reverseMap))for(var o=this._reverseMap=[],s=0;s<r.length;s++)o[r.charCodeAt(s)]=s;var i=r.charAt(64);return i&&-1!==(i=e.indexOf(i))&&(t=i),function(e,t,r){for(var o,s,i=[],a=0,c=0;c<t;c++)c%4&&(o=r[e.charCodeAt(c-1)]<<c%4*2,s=r[e.charCodeAt(c)]>>>6-c%4*2,i[a>>>2]|=(o|s)<<24-a%4*8,a++);return n.create(i,a)}(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,r){var n,o,s,i;e.exports=(e=r(2),i=(r=e).lib,n=i.WordArray,o=i.Hasher,s=[],i=(i=r.algo).SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],c=r[4],l=0;l<80;l++){s[l]=l<16?0|e[t+l]:(u=s[l-3]^s[l-8]^s[l-14]^s[l-16])<<1|u>>>31;var u=(n<<5|n>>>27)+c+s[l];u+=l<20?1518500249+(o&i|~o&a):l<40?1859775393+(o^i^a):l<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,c=a,a=i,i=o<<30|o>>>2,o=n,n=u}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(64+n>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+n>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=o._createHelper(i),r.HmacSHA1=o._createHmacHelper(i),e.SHA1)},function(e,t,r){var n;e.exports=(e=r(2),n=e.enc.Utf8,void(e.algo.HMAC=(r=e.lib.Base).extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));for(var r=e.blockSize,o=4*r,s=((t=t.sigBytes>o?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone(),e.words),i=t.words,a=0;a<r;a++)s[a]^=1549556828,i[a]^=909522486;e.sigBytes=t.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,r){var n,o,s,i,a,c,l,u,h,p,_,d;e.exports=(e=r(2),r(11),void(e.lib.Cipher||(r=e.lib,n=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,h=e.enc,i=h.Base64,a=e.algo.EvpKDF,c=r.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?d:p}return function(t){return{encrypt:function(r,n,o){return e(n).encrypt(t,r,n,o)},decrypt:function(r,n,o){return e(n).decrypt(t,r,n,o)}}}}()}),r.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=e.mode={},l=r.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=h.CBC=function(){var e=l.extend();function t(e,t,r){var n,o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(var s=0;s<r;s++)e[t+s]^=n[s]}return e.Encryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize;t.call(this,e,r,o),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+o)}}),e.Decryptor=e.extend({processBlock:function(e,r){var n=this._cipher,o=n.blockSize,s=e.slice(r,r+o);n.decryptBlock(e,r),t.call(this,e,r,o),this._prevBlock=s}}),e}(),_=(e.pad={}).Pkcs7={pad:function(e,t){for(var r=(t*=4)-e.sigBytes%t,n=r<<24|r<<16|r<<8|r,s=[],i=0;i<r;i+=4)s.push(n);t=o.create(s,r),e.concat(t)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=c.extend({cfg:c.cfg.extend({mode:h,padding:_}),reset:function(){c.reset.call(this);var e,t=(r=this.cfg).iv,r=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(r,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),u=r.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t,r=(e=i.parse(e)).words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),e.sigBytes-=16),u.create({ciphertext:e,salt:t})}},p=r.SerializableCipher=n.extend({cfg:n.extend({format:h}),encrypt:function(e,t,r,n){n=this.cfg.extend(n),t=(o=e.createEncryptor(r,n)).finalize(t);var o=o.cfg;return u.create({ciphertext:t,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(e.kdf={}).OpenSSL={execute:function(e,t,r,n){return n=n||o.random(8),e=a.create({keySize:t+r}).compute(e,n),r=o.create(e.words.slice(t),4*r),e.sigBytes=4*t,u.create({key:e,iv:r,salt:n})}},d=r.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:_}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=p.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,p.decrypt.call(this,e,t,r.key,n)}}))))},function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoExpressWebRTMEngine",(function(){return Fe})),r.d(t,"getReportSeq",(function(){return g})),r.d(t,"getSeq",(function(){return f})),r.d(t,"ZegoLogger",(function(){return c.ZegoLogger})),r.d(t,"ZegoDataReport",(function(){return c.ZegoDataReport})),r.d(t,"ZegoExpressWebRTM",(function(){return ze})),r.d(t,"BusinessService",(function(){return R})),r.d(t,"NetConnection",(function(){return k}));var n,o,s,i,a,c=r(5),l={debug:0,info:1,warn:2,error:3,report:99,disable:100};(t=n=n||{})[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN",(t=o=o||{})[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",(t=s=s||{})[t.offline=0]="offline",t[t.online=1]="online",(t=i=i||{})[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN",(t=a=a||{})[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallProgram=2]="ClientType_SmallProgram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc";var u,h,p="eventStart",_="eventEndWithMsgInfo",d="addEventMsg",f=function(){return u++},g=(h=u=1,function(){return h++}),m=(Object.defineProperty(y.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),y.prototype.hasNext=function(){return this.next&&this.next.id},y.prototype.hasPrev=function(){return this.prev&&this.prev.id},y);function y(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}T.prototype.insertBefore=function(e,t){return(t=new m(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},T.prototype.addLast=function(e){return this.insertBefore(this.end,e)},T.prototype.add=function(e){return this.addLast(e)},T.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},T.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},T.prototype.size=function(){return this._numNodes},T.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},T.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},T.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},T.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},T.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},T.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},T.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},T.prototype.find=function(e){for(var t=this.start,r=!1,n=null;t.hasNext()&&!r;)e(t=t.next)&&(n=t,r=!0);return n},T.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},T.prototype.push=function(e){return this.addLast(e)},T.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},T.prototype.pop=function(){return this.removeLast()},T.prototype.shift=function(){return this.removeFirst()};var E=T;function T(){this.start=new m,this.end=new m,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var S,v,b,O,R,C,I="未引入消息模块",N=r(13),k=(L.prototype.init=function(){var e;null!=(e=this.connection)&&e.init()},L.prototype.unInit=function(){var e;null!=(e=this.connection)&&e.unInit()},L.prototype.setAppInfo=function(e){var t;null!=(t=this.connection)&&t.setAppInfo(e)},L.prototype.setUserInfo=function(e){var t;null!=(t=this.connection)&&t.setUserInfo(e)},L.prototype.setNetAgentDefaultServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentDefaultServers(e)},L.prototype.setDispatchConnectServers=function(e){var t;null!=(t=this.connection)&&t.setDispatchConnectServers(e)},L.prototype.startHttpRequest=function(e,t,r,n,o){var s;null!=(s=this.connection)&&s.startHttpRequest(e,t,r,n,o)},L.prototype.getAppConfigByAgent=function(e,t,r){var n;return null==(n=this.connection)?void 0:n.getAppConfigByAgent(e,t,r)},L.prototype.getPCRequest=function(e,t){var r;return(null==(r=this.connection)?void 0:r.getPCRequest(e,t))||null},L.prototype.connectUa=function(){var e;null!=(e=this.connection)&&e.connectUa()},L.prototype.destroyConnect=function(){var e;null!=(e=this.connection)&&e.destroyConnect()},L.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},L.prototype.on=function(e,t){var r;return(null==(r=this.connection)?void 0:r.on(e,t))||!0},L.prototype.off=function(e,t){var r;return null==(r=this.connection)?void 0:r.off(e,t)},L.prototype.setLogger=function(e){var t;return null==(t=this.connection)?void 0:t.setLogger(e)},L.prototype.setAccess=function(e){var t;return null==(t=this.connection)?void 0:t.setAccess(e)},L);function L(){this.isLoad=!1,this.callBackList=[],this.connection=new N.ZegoConnectionAgent}(t=S=S||{})[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",(t=v=v||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",(t=b=b||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=O=O||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(t=R=R||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=C=C||{}).Logining="LOGINING",t.Logined="LOGINED",t.LoginFailed="LOGIN_FAILED",t.Reconnecting="RECONNECTING",t.Reconnected="RECONNECTED",t.ReconnectFailed="RECONNECT_FAILED",t.Kickout="KICKOUT",t.Logout="LOGOUT",t.LogoutFailed="LOGOUT_FAILED";var P={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."}},A=(M.base64encode=function(e){for(var t,r,n,o=e.length,s=0,i="";s<o;){if(t=255&e.charCodeAt(s++),s==o){i=(i+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4)+"==";break}if(r=e.charCodeAt(s++),s==o){i=(i=(i+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+M.base64EncodeChars.charAt((15&r)<<2)+"=";break}n=e.charCodeAt(s++),i=(i=(i=(i+=M.base64EncodeChars.charAt(t>>2))+M.base64EncodeChars.charAt((3&t)<<4|(240&r)>>4))+M.base64EncodeChars.charAt((15&r)<<2|(192&n)>>6))+M.base64EncodeChars.charAt(63&n)}return i},M.base64decode=function(e){for(var t,r,n,o,s=e.length,i=0,a="";i<s;){for(;t=M.base64DecodeChars[255&e.charCodeAt(i++)],i<s&&-1==t;);if(-1==t)break;for(;r=M.base64DecodeChars[255&e.charCodeAt(i++)],i<s&&-1==r;);if(-1==r)break;a+=String.fromCharCode(t<<2|(48&r)>>4);do{if(61==(n=255&e.charCodeAt(i++)))return a}while(n=M.base64DecodeChars[n],i<s&&-1==n);if(-1==n)break;a+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(61==(o=255&e.charCodeAt(i++)))return a}while(o=M.base64DecodeChars[o],i<s&&-1==o);if(-1==o)break;a+=String.fromCharCode((3&n)<<6|o)}return a},M.utf16to8=function(e){for(var t,r="",n=e.length,o=0;o<n;o++)1<=(t=e.charCodeAt(o))&&t<=127?r+=e.charAt(o):r=2047<t?(r=(r+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(r+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return r},M.utf8to16=function(e){for(var t,r,n,o="",s=e.length,i=0;i<s;)switch((t=e.charCodeAt(i++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=e.charAt(i-1);break;case 12:case 13:r=e.charCodeAt(i++),o+=String.fromCharCode((31&t)<<6|63&r);break;case 14:r=e.charCodeAt(i++),n=e.charCodeAt(i++),o+=String.fromCharCode((15&t)<<12|(63&r)<<6|(63&n)<<0)}return o},M.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],M);function M(){}t=r(3);var w=r.n(t),D=(t=r(7),r.n(t)),U=function(){return(U=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},H=(B.checkConfigParam=function(e,t,r){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(r.error("ccp.0 server must be string or string array and not empty"),!1):(r.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkPriConfigParam=function(e,t,r,n,o){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof r||"string"!=typeof r.deviceID?(o.error("ccp.0 deviceID must be string and not empty"),!1):1===n||0===n||(o.error("ccp.0 anType must be 0 or 1"),!1):(o.error("ccp.0 dispatchServer must be string and not empty"),!1):(o.error("ccp.0 appid must be positive integer number and not empty"),!1)},B.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},B.isUrl=function(e){return!!(e.startsWith("rtmp://")||e.startsWith("https://")&&e.endsWith(".flv")||e.startsWith("https://")&&e.endsWith(".m3u8"))},B.registerCallback=function(e,t,r){t.success&&(r[e+"SuccessCallback"]=t.success),t.error&&(r[e+"ErrorCallback"]=t.error)},B.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},B.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},B.logReportCallback=function(e,t,r,n){B.registerCallback(e,{success:function(e,n){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];B.dataReportEvent(t,r,e,n,o)}},n)},B.proxyRes=function(e,t,r,n){return{interResolve:function(n){e.uploadReport(t),r(n)},interReject:function(r,o){var s;void 0===o&&(o=""),(s=r.code<2e9&&1e9<r.code?B.decodeServerError(r.code,r.msg):{code:r.code,message:r.msg})&&e.addMsgInfo(t,{error:s.code,message:s.message+o}),e.uploadReport(t),n({errorCode:r.code||r.errorCode})}}},B.getServerError=function(e){var t={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};if(0===e)return P.SUCCESS;var r,n=U({},P.ROOM_INNER_ERROR);return n.code=e,n.msg=1e9<e?(r=t[e])?"liveroom cmd error, code: "+e+", message: "+r:t[1e9]+e:t[e]?t[e]+" code:"+e:"unknown error code:"+e,n},B.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},B.decodeServerError=function(e,t){var r={code:-1,message:"server error"};return r.code=1e9<e?e-1e9+52e6:e+2002e6,t&&(r.message=t),r},B.getLiveRoomError=function(e,t){var r={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED"};return t?2e5<e&&e<3e5?r[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||r[e]||"ROOM_INNER_ERROR":r[e]||"ROOM_INNER_ERROR":1e9<e?r[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},B.getKickoutError=function(e,t){var r={code:e,message:"kickout reason = "+e};if(t)switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 4:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}else switch(e){case 1:r.code=63000001,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:r.code=63000002,r.message="zpush manual kickout",r.name="MANUAL_KICKOUT";break;case 3:r.code=63000003,r.message="kickout reason = "+e;break;case 4:r.code=63000004,r.message="zpush multiple login kickout",r.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:r.code=63000005,r.message="zpush token expired",r.name="TOKEN_EXPIRED";break;default:r.code=e,r.message="kickout reason = "+e}return r},B.dataReportEvent=function(e,t,r,n,o){switch(r){case"eventStart":e.eventStart(t,n);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,n,o[0]);break;case"addEventMsg":e.addEventMsg(t,n,o[0],o[1]);break;case"addEvent":e.addEvent(t,n);break;case"eventEnd":e.eventEnd(t,n);break;case"addMsgInfo":e.addMsgInfo(t,o[0])}},B.isKeepTryLogin=function(e){switch(e){case 1002:case 1003:return!0;default:return!1}},B.mergeUserList=function(e,t,r,n){e.debug("msl.0 call");var o=[],s=[];r=r||[];for(var i=0;i<r.length;i++){for(var a=!1,c=0;c<t.length;c++)if(r[i].userID===t[c].userID){a=!0;break}a||o.push(r[i])}for(var l=0;l<t.length;l++){a=!1;for(var u=0;u<r.length;u++)if(t[l].userID===r[u].userID){a=!0;break}a||s.push(t[l])}for(t.splice(0),i=0;i<r.length;i++)t.push(t[i]);n(o,s),e.debug("msl.0 call success")},B.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&0<=e:"number"==typeof e&&e%1==0&&0<e},B.checkValidNumber=function(e,t,r){return t=t||1,r=r||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=r},B.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},B.uuid=function(e,t){var r,n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||o.length,e)for(r=0;r<e;r++)s[r]=o[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",r=0;r<36;r++)s[r]||(n=0|16*Math.random(),s[r]=o[19==r?3&n|8:n]);return s.join("")},B.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;n<r;n++){var o=parseInt(e[n]),s=parseInt(t[n]);if(s<o)return 1;if(o<s)return-1}return 0},B.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),r=-1!=e.indexOf("Firefox"),n=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome;return e=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),t?"IE":r?"Firefox":n?"Opera":o?"Chrome":e?"Safari":"Unkown"},B.isTestEnv=function(e){return-1!=e.indexOf("wss://wssliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://test2-wsliveroom-api.zego.im/ws")||-1!=e.indexOf("wss://wsliveroom-test.zegocloud.com/ws")||-1!=e.indexOf("wss://wsliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-test-bak.zego.im/ws")||-1!=e.indexOf("wss://webliveroom-hk-test.zegocloud.com/ws")||-1!=e.indexOf("wss://webliveroom-hk-test-bak.zegocloud.com/ws")},B.getLogLevel=function(e){return l[e]},B.getUint64=function(e,t,r){var n=r.getUint32(e,t);return r=r.getUint32(e+4,t),e=t?n+Math.pow(2,32)*r:Math.pow(2,32)*n+r,Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},B.decodeTokenExpire=function(e){try{var t,r=Uint8Array.from(A.base64decode(e),(function(e){return e.charCodeAt(0)})),n=new DataView(r.buffer);return 0<(t="function"==typeof n.getBigInt64?n.getBigUint64(0):B.getUint64(0,!1,n))?Number(t):Number(n.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},B.bin2hex=function(e){for(var t,r="",n=0,o=(e+="").length;n<o;n++)r+=(t=e.charCodeAt(n).toString(16)).length<2?"0"+t:t;return r},B.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),r=((r=t.getContext("2d")).textBaseline="top",r.font="14px 'Arial'",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.fillText(e,2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));return e=atob(r),this.bin2hex(e.slice(-16,-12))},B.generateUUID=function(e){var t,r;return 0===(e=void 0===e?0:e)?r=localStorage.getItem("z_deviceID"):wx.getStorageSync("z_deviceID"),r||(t=(new Date).getTime(),r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(36)})),0===e?(e=this.getCanvasFingerprint("hello, zego")+r.slice(8),localStorage.setItem("z_deviceID",e)):wx.setStorageSync("z_deviceID",r),r)},B.getNetType=function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()},B.getNetTypeNum=function(){var e;return-1<(e=((null==(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection)?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()).indexOf("4G")?i.NT_4G:-1<e.indexOf("2G")?i.NT_2G:-1<e.indexOf("3G")?i.NT_3G:-1<e.indexOf("WIFI")?i.NT_WIFI:-1<e.indexOf("LINE")?i.NT_LINE:-1<e.indexOf("NONE")?i.NT_NONE:i.NT_UNKNOWN},B.encryptStores=function(e,t){return w.a.encrypt(e,t).toString()},B.decryptStores=function(e,t){try{return w.a.decrypt(e,t).toString(D.a)}catch(e){return""}},B);function B(){}var q,j={product:"Web_SDK",URL:["https://cloud-setting-api.zego.im/cloud-setting/get","https://cloud-setting-api.zegocloud.com/cloud-setting/get"],ONLINE:!1},x="init",G="0c9e6e0f8c0a8f4e",z="z_appconfig",V={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:b.MODE_ONLINE,sdkType:3,connectVer:3,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1};function W(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}W.prototype.init=function(e,t,r,n){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof r&&(this.RETRY_CONTINUE_COUNT=r),"number"==typeof n&&(this.RETRY_MAX_TIME_INTERVAL=n)},W.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},t=W,(Se=q=q||{}).RTM_CONSTRUCTOR="zm.0",Se.RTM_BIND_WINDOW_LISTENER="zm.wl",Se.RTM_SET_LOG_CONFIG="zm.slf",Se.RTM_SET_DEBUG_VERBOSE="zm.sdv",Se.RTM_LOGIN_ROOM="zm.lg",Se.RTM_LOGOUT_ROOM="zm.lo",Se.RTM_GET_SETTING_UNIFY="zm.gsu",Se.RTM_FETCH_APP_CONFIG="zm.fac",Se.RTM_SET_ACCESS="zm.sa",Se.RTM_CREATENETAGENT="zm.cna",Se.RTM_GETSTOREAPPCONFIG="zm.gsac",Se.RTM_SET_CLOUD_SETTING_URLS="zm.scsu",Se.RTM_ON="zm.on",Se.RTM_OFF="zm.off",Se.RTM_RENEWTOKEN="zm.rntk",Se.RTM_RESETTOKENTIMER="zm.rstt",Se.RTM_ENABLE_MULTI_ROOM="zm.emr",Se.RTM_SEND_PB="zm.spb",Se.RTM_GET_HEADER="zm.gh",Se.ROOM_LOGIN_ROOM="zm.rm.lg",Se.ROOM_TRY_LOGIN="zm.rm.tl",Se.ROOM_OPEN_HANDLER="zm.rm.op",Se.ROOM_HANDLE_LOGINRSP="zm.rm.lgr",Se.ROOM_CLOSEHANDLER="zm.rm.clh",Se.ROOM_LOGOUT="zm.rm.lo",Se.ROOM_RESET_ROOM="zm.rm.rr",Se.ROOM_DISCONNECT="zm.rm.dcn",Se.ROOM_KICK_OUT="zm.rm.kco",Se.ROOM_STATUS_CALLBACK="zm.rm.scb",Se.ROOM_RESETTOKEN_TIMER="zm.rm.rst",Se.HEARTBEAT_START="zm.hb.st",Se.HEARTBEAT_HEARTBEAT_RSP="zm.hb.rsp",Se.HEARTBEAT_RESET="zm.hb.rst",Se.SERVICE_PUSH="zm.sv.ps",Se.SERVICE_SEND="zm.sv.sd",Se.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH="zm.rrh.hlf",Se.RETRYROOMHANDLER_HANDLE_ERROR="zm.rrh.he",Se.USER_LOGIN_RSP="zm.us.lgr",Se.USER_FETCH_USER="zm.us.ftu",Se.USER_FETCH_USER_RSP="zm.us.urp",Se.USER_USER_PUSH="zm.us.uph",Se.USER_MERGE_SEQ="zm.us.mg",Se.USER_MERGE_TIMEOUT="zm.us.mto",Se.USER_MERGE="zm.us.mg",Se.USER_HB_PATCH="zm.us.pt",Se.STATE_ACTION="zm.st.at",Se.ON_LISTENER="ON_LISTENER",Se.LIVEROOMHANDLER_SENDMESSAGE="zm.lrh.sm",Se.LIVEROOMHANDLER_HANDLEPUSH="zm.lrh.hp",Se.LIVEROOMHANDLER_HANDLESWITCHPUSH="zm.lrh.hsp",Se.LIVEROOMHANDLER_PUSHUSERUPDATE="zm.lrh.puu",Se.LIVEROOMHANDLER_PUSHKICKOUT="zm.lrh.pk",Se.LIVEROOMHANDLER_GETSTREAMLIST="zm.lrh.gs",Se.LIVEROOMHANDLER_LOGIN="zm.lrh.lgi",Se.LIVEROOMHANDLER_FETCH_USER_LIST="zm.lrh.ful",Se.LIVEROOMHANDLER_LOGOUT="zm.lrh.lgo",Se.LIVEROOMHANDLER_SENDSTREAMUPDATE="zm.lrh.sru",Se.LIVEROOMHANDLER_RENEW_TOKEN="zm.lrh.rt",Se.LIVEROOMHANDLER_SENDSIGNALCMD="zm.lrh.ssc",Se.LIVEROOMHANDLER_SENDBIGROOMMESSAGE="zm.lrh.sbrm",Se.LIVEROOMHANDLER_SENDCUSTOMCOMMAND="zm.lrh.scc",Se.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE="zm.lrh.frm",Se.LIVEROOMHANDLER_SENDRELIABLEMESSAGE="zm.lrh.srm.0",Se.LIVEROOMHANDLER_SENDROOMMSG="zm.lrh.srm.1",Se.LIVEROOMHANDLER_HANDLEDISCONNECTED="zm.lrh.hd",Se.LIVEROOMHANDLER_HANDLEBROKEN="zm.lrh.hb",Se.LIVEROOMHANDLER_HANDLECONNECTED="zm.lrh.hc",Se.LIVEROOMHANDLER_RESET="zm.lrh.r.0",Z=function(e,t){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(Q,Y=t),Q.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var r=(new Date).getTime(),n=void 0;t&&"number"==typeof t?n=1e3*t:["03","04"].includes(e.substring(0,2))&&(n=1e3*H.decodeTokenExpire(e.substring(2))-r),n&&this.roomHandler.resetTokenTimer(n-this.stateCenter.local_time_deviation),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},Q.prototype.initRoom=function(e,t,r,n,o,s,i){this.roomHandler=e,this.roomID=t,this.renewLocalToken(r),this.user=n,this.server=o,this.serverBak=s||o,this.config=i},Q.prototype.active=function(e){var t,r=this;this.logger.info(q.ROOM_LOGIN_ROOM+" retry call"),this.roomHandler.setRunState(o.trylogin),this.room.isMulti&&(null==(t=this.stateCenter.roomModulesList.find((function(e){return!e.isMulti})))?void 0:t.runState)!==o.login?this.logger.info(q.ROOM_LOGIN_ROOM+" service is disconnected, multi room stop retry"):this.stateCenter.networkState==s.offline?this.logger.info(q.ROOM_LOGIN_ROOM+" network is broken, stop retry"):this.retryTimer?this.logger.info(q.ROOM_LOGIN_ROOM+" has actived, ignore"):this.isOverTime?this.logger.info(q.ROOM_LOGIN_ROOM+" retry over time, stop retry"):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(t=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=t>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:t),this.retryTimer=setTimeout((function(){r.roomHandler.login(r.retryActiveCount%2==1?r.server:r.serverBak,r.roomID,r.token,r.user,r.config,(function(e){r.handleLoginFinish(e)}),(function(e,t){r.handleLoginFinish(!1,e,t)})),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,r.retryActiveCount++}),e?0:1e3*this.retryActiveInterval))},Q.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.maxTimer=setTimeout((function(){e.logger.info(q.ROOM_LOGIN_ROOM+" over max time "+e.RETRY_MAX_TIME+"s, stop retry"),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,P.LOGIN_TIMEOUT),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(P.LOGIN_TIMEOUT),e.roomHandler.disconnectedHandle(P.LOGIN_TIMEOUT),e.resetCallBack())}),1e3*this.RETRY_MAX_TIME))},Q.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},Q.prototype.onactive=function(e,t){},Q.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){t=void 0;var r=void 0,n=void 0,s=(this.stateCenter.useNetAgent?(t=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],r=["40001","40100"],n=["201002","30019"]):(t=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],r=["1100040001","1100040100"]),e.code+"");if(this.stateCenter.useNetAgent){if(10015===e.code)return this.room.retryConnect(),!0;if(40001<=e.code&&e.code<=40100||50200<=e.code&&e.code<=50299||null!=n&&n.includes(s))return this.room.resetSessionInfo(),!0}return!t.includes(s)&&(!!r.includes(s)||this.room.lastRunState==o.login&&(this.logger.warn(q.RETRYROOMHANDLER_HANDLE_ERROR+" reset"),this.room.sessionID="0",this.invalid(),!0))}return!0},Q.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},Q.prototype.loginFail=function(e){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,e),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(e),this.roomHandler.disconnectedHandle(e),this.resetCallBack())},Q.prototype.handleLoginFinish=function(e,t,r){this.logger.info(q.RETRYROOMHANDLER_HANDLE_LOGIN_FINISH+" "+e+" "+JSON.stringify(t)),t?this.handleError(t,r)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack())):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.resetCallBack()))},Q.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var Z,Y,F,K=Q;function Q(e,t,r){var n=Y.call(this,e,t)||this;return n.logger=e,n.stateCenter=t,n.room=r,n.loginRoomCallback={},n}(Se=F=F||{}).NOT_EMPTY="NOT_EMPTY",Se.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",Se.TYPE_STRING="TYPE_STRING",Se.TYPE_INTEGER="TYPE_INTEGER",Se.TYPE_OBJECT="TYPE_OBJECT",Se.MAX_LENGTH_10="MAX_LENGTH_10",Se.MAX_LENGTH_64="MAX_LENGTH_64",Se.MAX_LENGTH_100="MAX_LENGTH_100",Se.MAX_LENGTH_128="MAX_LENGTH_128",Se.MAX_LENGTH_256="MAX_LENGTH_256",Se.MAX_LENGTH_1024="MAX_LENGTH_1024";var X={error:{code:0,msg:"suc"}},J={NOT_EMPTY:function(e,t,r,n,o){return void 0===t||""===t||null===t?(n.error(r+" "+e+" is empty"),o):X},ILLEGAL_CHARACTERS:function(e,t,r,n,o){return H.checkIllegalCharacters(t)?X:(n.error(r+" "+e+" contains illegal characters"),o)},TYPE_STRING:function(e,t,r,n,o){return"string"!=typeof t?(n.error(r+" "+e+" must be string"),o):X},TYPE_INTEGER:function(e,t,r,n,o){return H.checkInteger(t,!1)?X:(n.error(r+" "+e+"  must be integer number"),o)},TYPE_OBJECT:function(e,t,r,n,o){return t&&"object"==typeof t?X:(n.error(r+" "+e+"  must be object"),o)},MAX_LENGTH_10:function(e,t,r,n,o){return 10<t.length?(n.error(r+" "+e+" is too long"),o):X},MAX_LENGTH_64:function(e,t,r,n,o){return 64<t.length?(n.error(r+" "+e+" is too long"),o):X},MAX_LENGTH_100:function(e,t,r,n,o){return 100<t.length?(n.error(r+" "+e+" is too long"),o):X},MAX_LENGTH_128:function(e,t,r,n,o){return 128<t.length?(n.error(r+" "+e+" is too long"),o):X},MAX_LENGTH_256:function(e,t,r,n,o){return 256<t.length?(n.error(r+" "+e+" is too long"),o):X},MAX_LENGTH_1024:function(e,t,r,n,o){return 1024<t.length?(n.error(r+" "+e+" is too long"),o):X}};function $(e){return e}function ee(e){return e}var te={kZegoTaskInitSetting:{event:"/sdk/init",error:{kInvalidParamError:P.INPUT_PARAM},system_info:navigator?navigator.appVersion:""},kZegoTaskSetDebug:{event:"/sdk/set_debug",debug:$},kZegoTaskSetLog:{event:"/sdk/set_log_config",error:{kInvalidParamError:P.INPUT_PARAM},log_level:function(e){return e},remote_log_level:$,log_url:$},kZegoTaskLoginRoom:{event:"/sdk/login",user_update:$,max_member_count:$,message:$,token:$,use_na:$,error:{ROOM_ID_NULL:P.ROOM_ID_NULL,INPUT_PARAM:P.INPUT_PARAM,ROOM_ID_TOO_LONG:P.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:P.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:P.USER_ID_NULL,USER_ID_TOO_LONG:P.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:P.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:P.USER_NAME_NULL,USER_NAME_TOO_LONG:P.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:P.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:P.LOGIN_TIMEOUT,INNER_ERROR:P.ROOM_INNER_ERROR,NETWORK_BROKEN:P.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:$,try_cnt:$},liveroom_login:{event:"liveroom_login",server:$,respond_info:$}}},kZegoTaskReNewToken:{event:"/sdk/reNewToken",error:{INPUT_PARAM:P.INPUT_PARAM,NOT_LOGIN:P.NOT_LOGIN}},kZegoTaskLogoutRoom:{event:"/sdk/logout",error:{INPUT_PARAM:P.INPUT_PARAM,ROOM_NOT_EXIST:P.ROOM_NOT_EXIST}},kZegoTaskReLoginRoom:{event:"/sdk/relogin",error:{ROOM_ID_NULL:P.ROOM_ID_NULL,ROOM_DISCONNECT:P.NETWORK_BROKEN},subEvent:{create_socket:{event:"create_socket",server:$,try_cnt:$},liveroom_login:{event:"liveroom_login",server:$,respond_info:$}}},kZegoTaskKickout:{event:"/sdk/kickout",user_id:$,error:{}},kZegoTaskRoomKickout:{event:"/sdk/room_kickout",user_id:$,room_id:$,message:$},kZegoTaskLiveRoomHB:{event:"/liveroom/hb",room_sid:$,error:{NOT_LOGIN:P.NOT_LOGIN,HB_TIMEOUT:P.TIMEOUT}},kZegoTaskLiveRoomGetUserUpdateInfo:{event:"/liveroom/get_user_update_info",user_update_type:$},kZegoListener:{event:"/sdk/listener"},kZegoEnableMultiRoom:{event:"sdk/enable_multi_room",error:{kInvalidParamError:P.INPUT_PARAM,kAlreadyLoginError:P.ALREADY_LOGIN}},kZegoTaskCloudSettingCache:{event:"/cloud_setting/cache"},kZegoTaskCloudSettingRefresh:{event:"/cloud_setting/refresh"},kZegoTaskCloudSettingRequest:{event:"/cloud_setting/request"},kZegoConnConnect:{event:"/zegoconn/connect",request_count:ee,svr_env:$,server_list:$},kZegoConnDisConnect:{event:"/zegoconn/disconnect",server:$},kZegoConnDispatch:{event:"/zegoconn/auto_dispatch",trigger_reason:$,domain_list:function(e){return e}},kZegoRequest:{event:"/zegoconn/request",na_req_location:$},kZegoSDKConfigInit:{event:"/sdk_config/init",trigger_reason:$},kZegoSDKProxyConnect:{event:"/zegoconn/proxy_connect",proxy_link_sources:ee,recv_time:ee}},re=(Object.defineProperty(ne.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,c.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,c.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,c.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),ne.prototype.getRequestId=function(){return this.idName+"-"+f()},ne.prototype.actionListener=function(e){for(var t,r=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];this.listenerList[e]&&(t=g(),this.dataReport.newReport(t,te.kZegoListener.event),this.dataReport.addMsgInfo(t,{listener:e,params:n}),this.dataReport.uploadReport(t)),this.listenerList[e]&&this.listenerList[e].forEach((function(t){try{t.apply(void 0,n)}catch(t){r.logger.error(q.STATE_ACTION+" ",e," ",JSON.stringify(t))}}))},ne.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(q.ON_LISTENER+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(q.ON_LISTENER+" event "+e+" no found"),!1)},Object.defineProperty(ne.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),ne);function ne(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this.appConfigFetched=!1,this.requestList={},this.mode=b.MODE_ONLINE,this.connectState="connected",this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=s.offline,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=V.modeNo}se.prototype.init=function(e){var t=this,r=e.body.hearbeat_interval<3e3?3e3:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){t.start(r)}),r),this.initCount++},se.prototype.start=function(e){var t=this,r=(this.logger.info(q.HEARTBEAT_START+" call"),g());if(this.dataReport.newReport(r,te.kZegoTaskLiveRoomHB.event),this.dataReport.addMsgInfo(r,{room_sid:te.kZegoTaskLiveRoomHB.room_sid(this.room.sessionID)}),!this.room.isLogin())return this.logger.error(q.HEARTBEAT_START+" state error"),this.dataReport.addMsgInfo(r,{error:te.kZegoTaskLiveRoomHB.error.NOT_LOGIN.code,message:te.kZegoTaskLiveRoomHB.error.NOT_LOGIN.msg}),void this.dataReport.uploadReport(r);if(3<++this.tryHeartbeatCount)return this.logger.error(q.HEARTBEAT_START+" come to try limit"),this.dataReport.addMsgInfo(r,{error:te.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.code,message:te.kZegoTaskLiveRoomHB.error.HB_TIMEOUT.msg}),this.dataReport.uploadReport(r),void this.hbLogout(P.HEARTBEAT_TIMEOUT);function n(e){var n=e.body&&e.body.err_code;e.header&&e.body?0!==n&&(n=H.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message),t.dataReport.addMsgInfo(r,{error:n.code,message:n.message+e.body.err_code})):t.dataReport.addMsgInfo(r,{error:(0<e.code?e:P.ROOM_INNER_ERROR).code,message:e.msg||P.ROOM_INNER_ERROR}),t.dataReport.uploadReport(r),t.handleHeartbeatRsp(e)}(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).heartBeat(n,n,this.room),this.heartbeatInterval=e,e=this.heartbeatInterval,2<=this.initCount?(e=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):e=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){t.start(t.heartbeatInterval)}),e),this.logger.info(q.HEARTBEAT_START+" call success")},se.prototype.handleHeartbeatRsp=function(e){return e.body&&e.body.err_code&&0!==e.body.err_code?(this.logger.error(q.HEARTBEAT_HEARTBEAT_RSP+" disconnect, server error=",e.body.err_code),1000000152==e.body.err_code?void this.hbLogout(P.HEARTBEAT_TIMEOUT):void this.hbLogout(H.getServerError(e.body.err_code))):e.header&&e.body?((this.tryHeartbeatCount=0)!==e.body.hearbeat_interval&&(this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<3e3&&(this.heartbeatInterval=3e3)),this.heartbeatRspNotiFy(e),void this.logger.info(q.HEARTBEAT_HEARTBEAT_RSP+" call success")):(this.logger.error(q.HEARTBEAT_HEARTBEAT_RSP+" disconnect, error=",JSON.stringify(e)),void this.hbLogout(e))},se.prototype.heartbeatRspNotiFy=function(e){},se.prototype.hbLogout=function(e){},se.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info(q.HEARTBEAT_RESET+" call success")};var oe=se;function se(e,t,r,n,o,s){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.liveRoomHandler=o,this.room=s,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}ae.prototype.resetTokenTimer=function(e){var t=this;this.logger.info(q.ROOM_RESETTOKEN_TIMER+"  call: "+(e=2147483647<(e=(e-=3e4)<0?0:e)?2147483647:e)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},ae.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},ae.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},ae.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},ae.prototype.resetRoom=function(e){var t=this;this.logger.info(q.ROOM_RESET_ROOM+" call"),1<this.stateCenter.roomModulesList.length&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),"0"===this.room.sessionID||this.room.runState===o.logout||this.room.isDisConnect()||(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).logout(this.room,e=function(e){t.handleLogoutRsp(e,!t.room.isMulti)},e),this.setRunState(o.logout),this.room.sessionID="0",this.room.roomSessionID="0",this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent?null!=(e=this.liveRoomHandler)&&e.reset():this.service.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==t.room})),(e=this.stateCenter.roomModulesList[0])&&(e.isMulti=!1,e.runState!==o.login&&e.roomTryHandler&&(e.roomTryHandler.startMaxTime(),e.roomTryHandler.active())),this.logger.info(q.ROOM_RESET_ROOM+" call success")},ae.prototype.resetRoomCallBack=function(){},ae.prototype.loginSuccessCallBack=function(e,t){},ae.prototype.handlePushKickout=function(e,t,r){var n,s=this;this.logger.info(q.ROOM_KICK_OUT+"  call "+JSON.stringify(e)),r||this.room.sessionID===e.header.session_id||this.room.sessionID===e.body.session_id?(r=g(),this.dataReport.newReport(r,te.kZegoTaskKickout.event),this.dataReport.addMsgInfo(r,{user_id:te.kZegoTaskKickout.user_id(this.stateCenter.idName)}),n=H.getKickoutError(e.body.reason||e.body.kickout_reason,this.stateCenter.useNetAgent),this.dataReport.addMsgInfo(r,{error:n.code,message:n.message}),this.dataReport.uploadReport(r),(r=this.room.roomTryHandler)?(r.onactive=function(e,t){s.disconnectedHandle(t),s.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin?(this.room.sessionID="0",r.startMaxTime(),r.active()):(this.setRunState(o.logout),this.resetRoom(t),r={},e&&e.body.custom_reason?r.custom_kickout_message=e.body.custom_reason:n.name&&P[n.name]&&(r.custom_kickout_message=P[n.name].msg+"; kickout reason: "+(t=e.body.reason||e.body.kickout_reason)),this.disconnectedHandle(n.name&&P[n.name]?P[n.name]:P.ROOM_INNER_ERROR,{extendedData:JSON.stringify(r),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:P.MANUAL_KICKOUT.code,msg:P.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason}))):this.logger.info(q.ROOM_KICK_OUT+" try handler no found")):this.logger.info(q.ROOM_KICK_OUT+" session id wrong, ignore")},ae.prototype.handleHbLogout=function(e){var t=this,r=this.room.roomTryHandler;r&&(r.onactive=function(e,r){t.disconnectedHandle(r)},[P.HEARTBEAT_TIMEOUT,P.SOCKET_CLOSE,P.TIMEOUT].includes(e)||[105,152,2001].includes(null==e?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(r.startMaxTime(),r.active()):(r.stopMaxTime(),r.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},ae.prototype.onDisconnect=function(e){var t,r=this;this.logger.error(q.ROOM_DISCONNECT+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code?this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:te.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.code,message:te.kZegoTaskReLoginRoom.error.ROOM_DISCONNECT.msg}):"number"==typeof e.code&&(t=e.code<2e9&&1e9<e.code||e.code<1e6?H.decodeServerError(e.code,e.msg):{code:e.code,message:e.msg})&&this.dataReport.addMsgInfo(this.stateCenter.reportSeqList.relogin,{error:t.code,message:t.message}),this.dataReport.uploadReport(this.stateCenter.reportSeqList.relogin),this.stateCenter.reportSeqList.relogin=0,H.unregisterCallback(te.kZegoTaskReLoginRoom.event,this.stateCenter.reportList),(e=this.room.roomTryHandler)?(e.onactive=function(e,t){t&&0!==t.code?r.roomStateHandle("DISCONNECTED",C.ReconnectFailed,t):r.roomStateHandle("CONNECTED",C.Reconnected,t)},e.startMaxTime(),e.active()):this.logger.error(q.ROOM_DISCONNECT+" try handler no found")},ae.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",C.Logining,e)},ae.prototype.disconnectedHandle=function(e,t){e&&0!==e.code?(this.stopTokenTimer(),this.roomStateHandle("DISCONNECTED",null!=t&&t.isKickout?C.Kickout:C.ReconnectFailed,e,null==t?void 0:t.extendedData)):this.roomStateHandle("CONNECTED",C.Reconnected,e,null==t?void 0:t.extendedData)},ae.prototype.roomStateHandle=function(e,t,r,n,o){var s;this.logger.info(q.ROOM_STATUS_CALLBACK+" "+e+" "+JSON.stringify(r)),(t=(t=t&&[C.LoginFailed,C.ReconnectFailed].includes(t)?null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.fail?C.LoginFailed:C.ReconnectFailed:t)&&[C.Logined,C.Reconnected].includes(t)?null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.success?C.Logined:C.Reconnected:t)&&[C.Logining,C.Reconnecting].includes(t)&&(t=null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.success?C.Logining:C.Reconnecting),this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,r?r.code:0,n,o),o||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,r?r.code:0,n),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,t,r?r.code:0,n)))},ae.prototype.login=function(e,t,r,n,s,i,a){if(this.logger.info(q.ROOM_LOGIN_ROOM+" call:"+t+" "+r),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,t,"",n.userID,"",this.stateCenter.sdKVersion),s&&(s.userUpdate&&"boolean"==typeof s.userUpdate&&(this.stateCenter.userStateUpdate=s.userUpdate),s.maxMemberCount&&"number"==typeof s.maxMemberCount&&(this.room.maxMemberCount=s.maxMemberCount)),!this.stateCenter.configOK)return this.logger.error(q.ROOM_LOGIN_ROOM+" init sdk wrong"),void a(P.INIT);this.room.runState!==o.trylogin&&this.setRunState(o.trylogin),this.room.roomID=t,this.room.token=r,this.room.thirdToken=r,this.stateCenter.idName=n.userID,this.stateCenter.nickName=n.userName||n.userID,this.loginCallback.success=i,this.loginCallback.fail=a,0===this.stateCenter.reportSeqList.login&&(s=g(),this.stateCenter.reportSeqList.relogin=s,this.dataReport.newReport(s,te.kZegoTaskReLoginRoom.event),this.dataReport.addMsgInfo(s,{server:e}),H.logReportCallback(te.kZegoTaskReLoginRoom.event,this.dataReport,s,this.stateCenter.reportList)),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(q.ROOM_LOGIN_ROOM+" call success")},ae.prototype.tryLogin=function(e){var t,r=this;if(this.room.runState!==o.trylogin)this.logger.error("zb.rh.tl state error");else{var n=(0!==this.stateCenter.reportSeqList.login?te.kZegoTaskLoginRoom:te.kZegoTaskReLoginRoom).event;if(this.stateCenter.useNetAgent)this.room.isMulti&&this.room.isDisConnect()?this.logger.warn(q.ROOM_TRY_LOGIN+" liveroom is not connected"):(s=function(e,t){r.handleLoginRsp(e,t)},null!=(t=this.liveRoomHandler)&&t.isUaConnect()?this.liveRoomHandler.login(this.room,s,s):(this.tryLoginTimer=setTimeout((function(){r.logger.info(q.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(te.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.warn(q.ROOM_TRY_LOGIN+" ua is not connected")));else{if(this.service.isDisConnect())try{this.service.closeSocket(),this.logger.debug(q.ROOM_TRY_LOGIN+" new websocket"),H.actionSuccessCallback(n,this.stateCenter.reportList)&&(1<this.tryLoginCount&&H.actionSuccessCallback(n,this.stateCenter.reportList)("eventEnd",te.kZegoTaskLoginRoom.subEvent.create_socket.event),H.actionSuccessCallback(n,this.stateCenter.reportList)(p,te.kZegoTaskLoginRoom.subEvent.create_socket.event),H.actionSuccessCallback(n,this.stateCenter.reportList)(d,te.kZegoTaskLoginRoom.subEvent.create_socket.event,te.kZegoTaskLoginRoom.subEvent.create_socket.server("server"),e)),this.service.createSocket(e),this.service.openHandler((function(){r.openHandler()})),this.service.closeHandler((function(e){r.logger.error(q.ROOM_TRY_LOGIN+" close "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)})),this.service.errorHandler((function(e){r.logger.error(q.ROOM_TRY_LOGIN+" error "+JSON.stringify(e.code||e)),r.service.closeSocket(),r.closeHandler(e)}))}catch(e){this.logger.error(q.ROOM_TRY_LOGIN+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(q.ROOM_TRY_LOGIN+" use current websocket and sent login"),H.actionSuccessCallback(n,this.stateCenter.reportList)&&H.actionSuccessCallback(n,this.stateCenter.reportList)(p,te.kZegoTaskLoginRoom.subEvent.liveroom_login.event);var s=function(e,t){r.handleLoginRsp(e,t)};this.service.login(this.room,s,s)}this.tryLoginTimer=setTimeout((function(){r.logger.info(q.ROOM_TRY_LOGIN+" over time no response, login timeout"),r.loginCallback.fail&&r.loginCallback.fail(te.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(q.ROOM_TRY_LOGIN+" call success")}}},ae.prototype.openHandler=function(){function e(e,r){t.handleLoginRsp(e,r)}var t=this,r=(this.logger.info(q.ROOM_OPEN_HANDLER+" websocket.onpen call"),(0!==this.stateCenter.reportSeqList.login?te.kZegoTaskLoginRoom:te.kZegoTaskReLoginRoom).event);H.actionSuccessCallback(r,this.stateCenter.reportList)&&H.actionSuccessCallback(r,this.stateCenter.reportList)(_,te.kZegoTaskLoginRoom.subEvent.create_socket.event,{try_cnt:this.tryLoginCount}),this.service.onPush(),H.actionSuccessCallback(r,this.stateCenter.reportList)&&H.actionSuccessCallback(r,this.stateCenter.reportList)(p,te.kZegoTaskLoginRoom.subEvent.liveroom_login.event),this.service.login(this.room,e,e)},ae.prototype.handleLoginRsp=function(e,t){this.logger.info(q.ROOM_HANDLE_LOGINRSP+" seq: "+t+" "+JSON.stringify(e));var r=(0!==this.stateCenter.reportSeqList.login?te.kZegoTaskLoginRoom:te.kZegoTaskReLoginRoom).event;H.actionSuccessCallback(r,this.stateCenter.reportList)&&H.actionSuccessCallback(r,this.stateCenter.reportList)(_,te.kZegoTaskLoginRoom.subEvent.liveroom_login.event),this.room.runState!==o.trylogin?this.logger.error(q.ROOM_HANDLE_LOGINRSP+" state error"):e.header&&e.body?e.header.seq!==t&&0==this.room.isMulti?this.logger.error(q.ROOM_HANDLE_LOGINRSP+" in wrong seq, local=",t+"",",recv=",e.header.seq):0!==e.body.err_code?(this.logger.error(q.ROOM_HANDLE_LOGINRSP+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(q.ROOM_HANDLE_LOGINRSP+" call success."),this.handleLoginSuccess(e)):(this.logger.error(q.ROOM_HANDLE_LOGINRSP+" "+JSON.stringify(e)),this.handleLoginFail(e))},ae.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=te.kZegoTaskLoginRoom.error.INNER_ERROR;e.header&&e.body?t=H.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},ae.prototype.handleLoginSuccess=function(e){var t,r={},n=this.room.lastRunState,s=(this.setRunState(o.login),this.stateCenter.userid=e.body.user_id,this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id,this.room.lvKey=e.body.lv_key,null==(s=null==e?void 0:e.body)?void 0:s.token_remain_time),i=(this.stateCenter.configRoomAuth=0<s,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(t=(i=(new Date).getTime())-e.body.ret_timestamp,this.stateCenter.local_time_deviation=t<5e3?0:t,t=0<s?1e3*s:1e3*H.decodeTokenExpire(this.room.token.substring(2))-i,this.resetTokenTimer(t-this.stateCenter.local_time_deviation)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.sessionID,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.stateCenter.useNetAgent||(e.body.config_info&&(s=this.stateCenter.settingConfig.getSetting("remote_log_level",!0)||e.body.config_info.log_level,this.logger.setRemoteLogLevel(s),r.log_level=s,""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),r.log_url=e.body.config_info.log_url)),e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,r.test_environment="true",this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),(0!==this.stateCenter.reportSeqList.login?te.kZegoTaskLoginRoom:te.kZegoTaskReLoginRoom).event);H.actionSuccessCallback(i,this.stateCenter.reportList)&&H.actionSuccessCallback(i,this.stateCenter.reportList)(d,te.kZegoTaskLoginRoom.subEvent.liveroom_login.event,te.kZegoTaskLoginRoom.subEvent.liveroom_login.respond_info("respond_info"),r),this.resetTryLogin(),this.loginSuccessCallBack(n,e),this.roomStateHandle("CONNECTED",C.Logined,{code:0,msg:""}),this.loginCallback.success&&this.loginCallback.success(!0)},ae.prototype.closeHandler=function(e){this.logger.error(q.ROOM_CLOSEHANDLER+" room websocket close "+JSON.stringify(e.code||e)),this.room.runState!==o.logout?this.room.runState===o.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?te.kZegoTaskLoginRoom.error.LOGIN_TIMEOUT:e)):this.room.runState===o.login&&(this.logger.info(q.ROOM_CLOSEHANDLER+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(te.kZegoTaskLoginRoom.error.NETWORK_BROKEN)):this.logger.info(q.ROOM_CLOSEHANDLER+" onclose logout flow call websocket.close")},ae.prototype.logout=function(e,t){this.logger.info(q.ROOM_LOGOUT+" call"),this.room.runState===o.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",C.Logout,{code:0,msg:""},void 0,t),this.stopTokenTimer(),this.logger.info(q.ROOM_LOGOUT+" call success"))},ae.prototype.handleLogoutRsp=function(e,t){this.logger.info(q.ROOM_LOGOUT+" result=",e.body&&e.body.err_code?e.body.err_code:"-1"),this.stateCenter.useNetAgent&&t&&null!=(e=this.liveRoomHandler)&&e.closeRequest()};var ie=ae;function ae(e,t,r,n,o,s){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.room=o,this.liveRoomHandler=s,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.loginCallback={}}var ce=(le.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info(q.USER_LOGIN_RSP+"  userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList(t)},le.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.stateCenter.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info(q.USER_HB_PATCH+" call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},le.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},le.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn(q.USER_FETCH_USER+" is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info(q.USER_FETCH_USER+" the first time call"))},le.prototype.fetchUserListWithPage=function(e,t){function r(e){n.handleFetchUserListRsp(e,t)}var n=this;(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).fetchUserList({user_index:e,sort_type:0},r,r,this.room)},le.prototype.handleFetchUserListRsp=function(e,t){var r=this;if(e.body&&0!=e.body.err_code)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(q.USER_FETCH_USER_RSP+" fetch error "+e.body.err_code);if(!e.header||!e.body)return this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,void this.logger.info(q.USER_FETCH_USER_RSP+" fetch error "+e);if(this.stateCenter.userStateUpdate){this.userTempList=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}(this.userTempList,e.body.user_baseinfos);var n=e.body.ret_user_index;if(n!=e.body.server_user_index)return this.logger.info(q.USER_FETCH_USER_RSP+" fetch another page"),void this.fetchUserListWithPage(n+1,t);this.userSeq=e.body.server_user_seq;for(var s=[],i=[],a=0;a<this.userTempList.length;a++)s.push({userID:this.userTempList[a].id_name,userName:this.userTempList[a].nick_name,role:this.userTempList[a].role}),i.push({idName:this.userTempList[a].id_name,nickName:this.userTempList[a].nick_name,role:this.userTempList[a].role});this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,i),t==o.login?(this.userList&&H.mergeUserList(this.logger,this.userList,s,(function(e,t){0!==e.length&&r.onUserStateUpdate(r.room.roomID,"ADD",e),0!==t.length&&r.onUserStateUpdate(r.room.roomID,"DELETE",t)})),this.userList=s):0!==(this.userList=s).length&&this.onUserStateUpdate(this.room.roomID,"ADD",s),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(q.USER_FETCH_USER_RSP+" call success user_list "+s+" count "+s.length)}},le.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(q.USER_USER_PUSH+" call"),this.stateCenter.userStateUpdate)if(this.userSeq===e.body.user_list_seq)this.logger.warn(q.USER_USER_PUSH+" user_list_seq is the same with local seq");else if(this.userSeq+e.body.user_actions.length!==e.body.user_list_seq)this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else{this.userSeq=e.body.user_list_seq;for(var t=[],r=0;r<e.body.user_actions.length;r++)t.push({action:e.body.user_actions[r].Action,idName:e.body.user_actions[r].IdName,nickName:e.body.user_actions[r].NickName,role:e.body.user_actions[r].Role,loginTime:e.body.user_actions[r].LoginTime});this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,t);var n=[],o=[];t.forEach((function(e){1==e.action?n.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(n).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))}))),0!==n.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"ADD",n),0!==o.length&&this.onUserStateUpdate(e.body.room_id||e.body.room_pushheader.room_id,"DELETE",o),this.logger.info(q.USER_USER_PUSH+" call success")}else this.logger.info(q.USER_USER_PUSH+" userStateUpdate is false")},le.prototype.onUserStateUpdate=function(e,t,r){var n=this,o=g();this.dataReport.newReport(o,te.kZegoTaskLiveRoomGetUserUpdateInfo.event),r=r.filter((function(e){return e.userID!==n.stateCenter.idName})),0!=r.length&&(r=r.map((function(e){return{userID:e.userID,userName:e.userName}})),this.stateCenter.actionListener("roomUserUpdate",e,t,r),this.dataReport.addMsgInfo(o,{user_update_type:te.kZegoTaskLiveRoomGetUserUpdateInfo.user_update_type("ADD"==t?"added":"deleted")}),this.dataReport.uploadReport(o))},le.prototype.mergeUserByUserSeq=function(e,t){var r=this;this.userSeqMergeMap||(this.logger.warn(q.USER_MERGE_SEQ+" new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){r.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn(q.USER_MERGE_SEQ+"  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},le.prototype.mergeUser=function(e){var t=this,r=(this.logger.info(q.USER_MERGE+" merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),n=((e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){r[e.IdName]=e}))})),this.userSeqMergeMap=null,e=Object.values(r).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}}))).sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)})),[]),o=[];e.forEach((function(e){1==e.action?n.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(n).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))})),0!==n.length&&this.onUserStateUpdate(this.room.roomID,"ADD",n),0!==o.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",o),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,e)},le.prototype.handleMergeTimeout=function(){var e,t=this,r=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));r[r.length-1]-r[0]+1===r.length||r[r.length-1]>=this.minUserSeq?this.mergeUser(r):(this.userSeqMergeMap=null,e=this.lastUserQueryTime-Date.now(),this.logger.info(q.USER_MERGE_TIMEOUT+"  fetch merge userlist "+this.userSeq+" userSeqList "+r.join(",")+" wait "+e),0<e?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){t.fetchUserList()}),e)):this.fetchUserList())},le.prototype.loginPrivateRsp=function(e){this.logger.info(q.USER_FETCH_USER," userStateUpdate "+this.stateCenter.userStateUpdate),this.stateCenter.userStateUpdate&&this.fetchUserList()},le);function le(e,t,r,n,o,s){this.logger=e,this.stateCenter=t,this.dataReport=r,this.service=n,this.liveRoomHandler=o,this.room=s,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}he.prototype.initMessageHandler=function(){},he.prototype.initLiveHandler=function(){},he.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},he.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t)}},he.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,r){e.heartBeatHandler.init(r),e.stateCenter.useNetAgent?e.liveRoomHandler.startCheck():(e.service.stopCheck(),e.service.startCheck()),e.userHandler.loginRsp(r,t),e.messageHandler&&e.messageHandler.loginRsp(r),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(r)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.stateCenter.useNetAgent&&e.liveRoomHandler&&e.liveRoomHandler.stopCheck(),e.userHandler.resetUserHandler(),e.service.stopCheck(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},he.prototype.bindUserHandler=function(){},he.prototype.bindMessageHandler=function(){},he.prototype.bindLiveHandler=function(){},he.prototype.HBResponse=function(e){this.stateCenter.actionListener("HBResponse",e)},he.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},he.prototype.handleMultiRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.runState!==o.login&&t.roomTryHandler&&1==t.isMulti&&(t.roomTryHandler.onactive=function(r,n){var o;n&&0!==n.code?(0!==n.code&&(o=H.getLiveRoomError(n.code,e.stateCenter.useNetAgent))&&P[o]&&(n=P[o]),t.roomHandler.roomStateHandle("DISCONNECTED",C.ReconnectFailed,n,n.msg)):t.roomHandler.roomStateHandle("CONNECTED",C.Reconnected,n)},t.roomTryHandler.startMaxTime(),t.roomTryHandler.active())}))},he.prototype.isLogin=function(){return this.runState===o.login},he.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},he.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.stateCenter.useNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},he.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.sessionID="0",this.roomSessionID="0",this.roomTryHandler.active(!0))},he.prototype.resetSessionInfo=function(){var e;this.logger.info("zm.lrm.rsi call"),this.sessionID="0",this.roomSessionID="0",null!=(e=this.liveRoomHandler)&&e.reset()};var ue=he;function he(e,t,r,n,s,i,a){this.roomID=e,this.stateCenter=t,this.logger=r,this.dataReport=n,this.service=s,this.rtm=i,this.liveRoomHandler=a,this.runState=o.logout,this.lastRunState=o.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.isMulti=!1,this.token="",this.thirdToken="",this.maxMemberCount=0,this.lvKey="",this.roomName="",this.roomHandler=new ie(this.logger,this.stateCenter,this.dataReport,this.service,this,a),this.heartBeatHandler=new oe(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.userHandler=new ce(this.logger,this.stateCenter,this.dataReport,this.service,this.liveRoomHandler,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}_e.prototype.createSocket=function(e){this.socket=Object(c.createZegoWebSocket)(e,this.ENV%2)},_e.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},_e.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},_e.prototype.sendMessage=function(e,t,r,n,o){return void 0===r&&(r=null),void 0===n&&(n=null),void 0===o&&(o={timeOut:6e3}),o={data:t={header:e,body:t},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:o.timeOut,success:r,error:n},r=this.sendCommandList.push(o),this.sendCommandMap[o.seq]=r,this.socket&&this.socket.send(JSON.stringify(t)),e.seq},_e.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},_e.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)!function(){var r,n,o;e.remove(t),t&&t._data&&(r=t._data.error,n=t._data.seq,o=t._data.data.body.custom_msg,setTimeout((function(){r&&r(P.NOT_LOGIN,n,o)}),0)),t=e.getFirst()}()},_e.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),n=Date.parse(new Date+""),o=0,s=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeOut>n?"break":(r._data&&delete t[r._data.data.header.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+s.sendDataDropTimeout<n||r&&r._data&&(i=r._data.error,a=r._data.seq,c=r._data.data.body.custom_msg,setTimeout((function(){i&&i(P.TIMEOUT,a,c)}),0)),++o>=s.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var i,a,c}(););},_e.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},_e.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},_e.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.socket.binaryType="arraybuffer",t.responseHandler(),e(r)})},_e.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},_e.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},_e.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},_e.prototype.onMessage=function(e){};var pe=_e;function _e(e){this.socket=null,this.sendCommandList=new E,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}var de=function(){return(de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},fe=(ge.prototype.checkResponse=function(e){return 0!=this.stateCenter.roomModulesList.filter((function(e){return e.runState!==o.logout})).length&&(e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid)},ge.prototype.handleSendCommandMsgRsp=function(e){var t,r=this,n=this.service.sendCommandMap[e.header.seq];null!=n&&(t=n._data,delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(n),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,r.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,r.cmdSeq)}),0))},ge.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error(q.SERVICE_PUSH+" cmd="+t.header.cmd+", err_code="+t.body.err_code+", err_message="+t.body.err_message+" "):e.logger.info(q.SERVICE_PUSH+" cmd="+t.header.cmd+", msg="+JSON.stringify(t)+" "),-1<["login","logout"].indexOf(t.header.cmd)?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(q.SERVICE_PUSH+"  check session fail."):(e.logger.info(q.SERVICE_PUSH+" cmd="+t.header.cmd+",function="+!!e.responseRouters[t.header.cmd]),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error(q.SERVICE_PUSH+" msg type error ")}},ge.prototype.handlePushKickout=function(e){var t,r;void 0===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)||1===(null==(r=null==e?void 0:e.body)?void 0:r.protocol)?function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}(this.stateCenter.roomModulesList).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)})):(t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,(r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t})))?r.roomHandler.handlePushKickout(e):this.logger.error(q.SERVICE_PUSH+" room no found ignore "+JSON.stringify(null==(r=e.header)?void 0:r.room_id)))},ge.prototype.handlePushCustomMsg=function(e){},ge.prototype.handlePushRoomMsg=function(e){},ge.prototype.handlePushUserStateUpdateMsg=function(e){var t=null==(r=null==e?void 0:e.header)?void 0:r.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t}));r?r.userHandler.handlePushUserStateUpdateMsg(e):this.logger.error(q.SERVICE_PUSH+" room no found ignore "+JSON.stringify(e))},ge.prototype.handlePushMergeMsg=function(e){},ge.prototype.handlePushTransMsg=function(e){},ge.prototype.handleBigImMsgRsp=function(e){},ge.prototype.handlePushSignalMsg=function(e){},ge.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},ge.prototype.closeHandler=function(e){this.service.closeHandler(e)},ge.prototype.openHandler=function(e){this.service.openHandler(e)},ge.prototype.errorHandler=function(e){this.service.errorHandler(e)},ge.prototype.getHeader=function(e,t,r,n){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:r||"",room_session_id:n||"",biz_version:this.stateCenter.bizVersion||""}},ge.prototype.startCheck=function(){this.service.startCheck()},ge.prototype.stopCheck=function(){this.service.stopCheck()},ge.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},ge.prototype.createSocket=function(e){var t=this;this.service.createSocket(e),this.responseRouters=de(de({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},ge.prototype.closeSocket=function(){this.service.closeSocket()},ge.prototype.sendMessage=function(e,t,r,n,o,s){var i,a;return this.service.isDisConnect()?(this.logger.error(q.SERVICE_SEND+" socket is disconnect"),n(P.SOCKET_CLOSE),0):(i=null!=s&&s.roomID?s.roomID:null==(i=this.stateCenter.roomModulesList[0])?void 0:i.roomID,a=null!=s&&s.roomSessionID?s.roomSessionID:null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomSessionID,s=null!=s&&s.sessionID?s.sessionID:null==(s=this.stateCenter.roomModulesList[0])?void 0:s.sessionID,o=o||this.getHeader(e,s,i,a),this.logger.info(q.SERVICE_SEND+" sendMsg:"+JSON.stringify({header:o,body:t})),this.service.sendMessage(o,t,r,n))},ge.prototype.on=function(e,t){this.responseRouters[e]=t},ge.prototype.login=function(e,t,r){var n=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID);return e={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:this.stateCenter.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?a.ClientType_Webrtc:a.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat},this.sendMessage("",e,t,r,n)},ge.prototype.logout=function(e,t,r){var n=e.isMulti?"quit":"logout",o={reserve:0};return"logout"==n&&(o.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(n,o,t,r,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},ge.prototype.heartBeat=function(e,t,r){return this.sendMessage("hb",{reserve:0},e,t,void 0,r)},ge.prototype.fetchUserList=function(e,t,r,n){return this.sendMessage("user_list",e,t,r,void 0,n)},ge.prototype.fetchUserListV2=function(e,t,r,n){return this.sendMessage("user_list_v2",e,t,r,void 0,n)},ge.prototype.fetchReliableMessage=function(e,t,r,n){return this.sendMessage("trans_fetch",e,t,r,void 0,n)},ge.prototype.sendReliableMessage=function(e,t,r,n){return this.sendMessage("trans",e,t,r,void 0,n)},ge.prototype.sendRoomMsg=function(e,t,r,n){return this.sendMessage("im_chat",e,t,r,void 0,n)},ge.prototype.sendCustomCommand=function(e,t,r,n){return this.sendMessage("custommsg",e,t,r,void 0,n)},ge.prototype.sendBigRoomMessage=function(e,t,r,n){return this.sendMessage("bigim_chat",e,t,r,void 0,n)},ge.prototype.sendRelayMessage=function(e,t,r,n){return this.sendMessage("relay",e,t,r,void 0,n)},ge.prototype.sendSignalCmd=function(e,t,r,n){return this.sendMessage("signal",e,t,r,void 0,n)},ge.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==s.offline?(this.logger.error(q.RTM_SEND_PB+" socket is disconnected"),!1):this.service.sendPB(e)},ge);function ge(e,t,r){this.stateCenter=e,this.logger=t,this.rtm=r,this.service=new pe(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}ye.getInstance=function(){return ye.instance=ye.instance?ye.instance:new ye},ye.prototype.setSetting=function(e,t){var r,n,o=Array.isArray(t)&&0<t.length;for(r in e)if("number"==typeof e[r].ctrlmode&&[1,2].includes(e[r].ctrlmode))this.setting[r]=e[r],this.setting[r+"_ctrlmode"]=e[r].ctrlmode;else for(var s in e[r])s.endsWith("_ctrlmode")||o&&-1==t.indexOf(s)||(1===(n=e[r][s+"_ctrlmode"])||2===n?this.setting[s]=e[r][s]:this.defaultSetting[s]&&(this.setting[s]=this.defaultSetting[s]),"number"==typeof n&&(this.setting[s+"_ctrlmode"]=e[r][s+"_ctrlmode"]))},ye.prototype.getSetting=function(e,t){return(t=void 0!==t&&t)&&2!=this.setting[e+"_ctrlmode"]?void 0:this.setting[e]};var me=ye;function ye(){this.defaultSetting={remote_log_level:"info"},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}var Ee=r(0),Te=r.n(Ee),Se=(t=r(6),r(8)),ve=r.n(Se),be=(Se=r(9),r.n(Se)),Oe=(Se=r(14),r.n(Se)),Re=(Se=r(4),r.n(Se)),Ce={d:(e,t)=>{for(var r in t)Ce.o(t,r)&&!Ce.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Ie=(((e,t,r)=>{function n(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function o(e,t){return e&t}function s(e,t){return e|t}function i(e,t){return e^t}function a(e,t){return e&~t}r.d(t,{default:()=>se});var c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function u(e){for(var t,r="",n=0;n+3<=e.length;n+=3)t=parseInt(e.substring(n,n+3),16),r+=l.charAt(t>>6)+l.charAt(63&t);for(n+1==e.length?(t=parseInt(e.substring(n,n+1),16),r+=l.charAt(t<<2)):n+2==e.length&&(t=parseInt(e.substring(n,n+2),16),r+=l.charAt(t>>2)+l.charAt((3&t)<<4));0<(3&r.length);)r+="=";return r}function h(e){for(var t="",r=0,o=0,s=0;s<e.length&&"="!=e.charAt(s);++s){var i=l.indexOf(e.charAt(s));i<0||(r=0==r?(t+=n(i>>2),o=3&i,1):1==r?(t+=n(o<<2|i>>4),o=15&i,2):2==r?(t=(t+=n(o))+n(i>>2),o=3&i,3):(t=(t+=n(o<<2|i>>4))+n(15&i),0))}return 1==r&&(t+=n(o<<2)),t}var p,_={decode:function(e){if(void 0===p){var t="= \f\n\r\t \u2028\u2029";for(p=Object.create(null),s=0;s<64;++s)p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s)]=s;for(p["-"]=62,p._=63,s=0;s<t.length;++s)p[t.charAt(s)]=-1}for(var r=[],n=0,o=0,s=0;s<e.length;++s){var i=e.charAt(s);if("="==i)break;if(-1!=(i=p[i])){if(void 0===i)throw new Error("Illegal character at offset "+s);n|=i,4<=++o?(r[r.length]=n>>16,r[r.length]=n>>8&255,r[r.length]=255&n,o=n=0):n<<=6}}switch(o){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=n>>10;break;case 3:r[r.length]=n>>16,r[r.length]=n>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=_.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return _.decode(e)}},d=(m.prototype.mulAdd=function(e,t){for(var r,n=this.buf,o=n.length,s=0;s<o;++s)(r=n[s]*e+t)<1e13?t=0:r-=1e13*(t=0|r/1e13),n[s]=r;0<t&&(n[s]=t)},m.prototype.sub=function(e){for(var t,r=this.buf,n=r.length,o=0;o<n;++o)e=(t=r[o]-e)<0?(t+=1e13,1):0,r[o]=t;for(;0===r[r.length-1];)r.pop()},m.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,r=t[t.length-1].toString(),n=t.length-2;0<=n;--n)r+=(1e13+t[n]).toString().substring(1);return r},m.prototype.valueOf=function(){for(var e=this.buf,t=0,r=e.length-1;0<=r;--r)t=1e13*t+e[r];return t},m.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},m),f=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,g=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function m(e){this.buf=[+e||0]}function y(e,t){return e.length>t?e.substring(0,t)+"…":e}U.prototype.get=function(e){if((e=void 0===e?this.pos++:e)>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},U.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},U.prototype.hexDump=function(e,t,r){for(var n="",o=e;o<t;++o)if(n+=this.hexByte(this.get(o)),!0!==r)switch(15&o){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},U.prototype.isASCII=function(e,t){for(var r=e;r<t;++r){var n=this.get(r);if(n<32||176<n)return!1}return!0},U.prototype.parseStringISO=function(e,t){for(var r="",n=e;n<t;++n)r+=String.fromCharCode(this.get(n));return r},U.prototype.parseStringUTF=function(e,t){for(var r="",n=e;n<t;){var o=this.get(n++);r+=String.fromCharCode(o<128?o:191<o&&o<224?(31&o)<<6|63&this.get(n++):(15&o)<<12|(63&this.get(n++))<<6|63&this.get(n++))}return r},U.prototype.parseStringBMP=function(e,t){for(var r,n,o="",s=e;s<t;)r=this.get(s++),n=this.get(s++),o+=String.fromCharCode(r<<8|n);return o},U.prototype.parseTime=function(e,t,r){return e=this.parseStringISO(e,t),(t=(r?f:g).exec(e))?(r&&(t[1]=+t[1],t[1]+=+t[1]<70?2e3:1900),e=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4],t[5]&&(e+=":"+t[5],t[6]&&(e+=":"+t[6],t[7]&&(e+="."+t[7]))),t[8]&&(e+=" UTC","Z"!=t[8]&&(e+=t[8],t[9]&&(e+=":"+t[9]))),e):"Unrecognized time: "+e},U.prototype.parseInteger=function(e,t){for(var r,n=this.get(e),o=127<n,s=o?255:0,i="";n==s&&++e<t;)n=this.get(e);if(0==(r=t-e))return o?-1:0;if(4<r){for(i=n,r<<=3;0==(128&(+i^s));)i=+i<<1,--r;i="("+r+" bit)\n"}o&&(n-=256);for(var a=new d(n),c=e+1;c<t;++c)a.mulAdd(256,this.get(c));return i+a.toString()},U.prototype.parseBitString=function(e,t,r){for(var n=this.get(e),o="("+((t-e-1<<3)-n)+" bit)\n",s="",i=e+1;i<t;++i){for(var a=this.get(i),c=i==t-1?n:0,l=7;c<=l;--l)s+=a>>l&1?"1":"0";if(s.length>r)return o+y(s,r)}return o+s},U.prototype.parseOctetString=function(e,t,r){if(this.isASCII(e,t))return y(this.parseStringISO(e,t),r);var n=t-e,o="("+n+" byte)\n";n>(r/=2)&&(t=e+r);for(var s=e;s<t;++s)o+=this.hexByte(this.get(s));return r<n&&(o+="…"),o},U.prototype.parseOID=function(e,t,r){for(var n="",o=new d,s=0,i=e;i<t;++i){var a=this.get(i);if(o.mulAdd(128,127&a),s+=7,!(128&a)){if(""===n?n=(o=o.simplify())instanceof d?(o.sub(80),"2."+o.toString()):(a=o<80?o<40?0:1:2)+"."+(o-40*a):n+="."+o.toString(),n.length>r)return y(n,r);o=new d,s=0}}return 0<s&&(n+=".incomplete"),n};var E=U,T=(D.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},D.prototype.content=function(e){if(void 0!==this.tag){void 0===e&&(e=1/0);var t=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+r,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);case 6:return this.stream.parseOID(t,t+r,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return y(this.stream.parseStringUTF(t,t+r),e);case 18:case 19:case 20:case 21:case 22:case 26:return y(this.stream.parseStringISO(t,t+r),e);case 30:return y(this.stream.parseStringBMP(t,t+r),e);case 23:case 24:return this.stream.parseTime(t,t+r,23==this.tag.tagNumber)}}return null},D.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},D.prototype.toPrettyString=function(e){var t=(e=void 0===e?"":e)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var r=0,n=this.sub.length;r<n;++r)t+=this.sub[r].toPrettyString(e)}return t},D.prototype.posStart=function(){return this.stream.pos},D.prototype.posContent=function(){return this.stream.pos+this.header},D.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},D.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},D.decodeLength=function(e){var t=127&(r=e.get());if(t==r)return t;if(6<t)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0==t)return null;for(var r=0,n=0;n<t;++n)r=256*r+e.get();return r},D.prototype.getHexStringValue=function(){return this.toHexString().substr(2*this.header,2*this.length)},D.decode=function(e){function t(){var e=[];if(null!==o){for(var t=s+o;r.pos<t;)e[e.length]=D.decode(r);if(r.pos!=t)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var n=D.decode(r);if(n.tag.isEOC())break;e[e.length]=n}o=s-r.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return e}var r=e instanceof E?e:new E(e,0),n=(e=new E(r),new S(r)),o=D.decodeLength(r),s=r.pos,i=s-e.pos,a=null;if(n.tagConstructed)a=t();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=t();for(var c=0;c<a.length;++c)if(a[c].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){a=null}if(null===a){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);r.pos=s+Math.abs(o)}return new D(e,i,o,n,a)},D),S=(w.prototype.isUniversal=function(){return 0===this.tagClass},w.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},w),v=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],b=(1<<26)/v[v.length-1],O=(M.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,o=(1<<t)-1,s=!1,i="",a=this.t,c=this.DB-a*this.DB%t;if(0<a--)for(c<this.DB&&0<(r=this[a]>>c)&&(s=!0,i=n(r));0<=a;)c<t?(r=(this[a]&(1<<c)-1)<<t-c,r|=this[--a]>>(c+=this.DB-t)):(r=this[a]>>(c-=t)&o,c<=0&&(c+=this.DB,--a)),(s=0<r||s)&&(i+=n(r));return s?i:"0"},M.prototype.negate=function(){var e=H();return M.ZERO.subTo(this,e),e},M.prototype.abs=function(){return this.s<0?this.negate():this},M.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this[r]-e[r]))return t;return 0},M.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+V(this[this.t-1]^this.s&this.DM)},M.prototype.mod=function(e){var t=H();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(M.ZERO)&&e.subTo(t,t),t},M.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?C:I)(t),this.exp(e,t)},M.prototype.clone=function(){var e=H();return this.copyTo(e),e},M.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},M.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},M.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},M.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},M.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(0<e--)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);0<=e;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(0<o||r!=this.s)&&(t[o++]=r);return t},M.prototype.equals=function(e){return 0==this.compareTo(e)},M.prototype.min=function(e){return this.compareTo(e)<0?this:e},M.prototype.max=function(e){return 0<this.compareTo(e)?this:e},M.prototype.and=function(e){var t=H();return this.bitwiseTo(e,o,t),t},M.prototype.or=function(e){var t=H();return this.bitwiseTo(e,s,t),t},M.prototype.xor=function(e){var t=H();return this.bitwiseTo(e,i,t),t},M.prototype.andNot=function(e){var t=H();return this.bitwiseTo(e,a,t),t},M.prototype.not=function(){for(var e=H(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},M.prototype.shiftLeft=function(e){var t=H();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},M.prototype.shiftRight=function(e){var t=H();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},M.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},M.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},M.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},M.prototype.setBit=function(e){return this.changeBit(e,s)},M.prototype.clearBit=function(e){return this.changeBit(e,a)},M.prototype.flipBit=function(e){return this.changeBit(e,i)},M.prototype.add=function(e){var t=H();return this.addTo(e,t),t},M.prototype.subtract=function(e){var t=H();return this.subTo(e,t),t},M.prototype.multiply=function(e){var t=H();return this.multiplyTo(e,t),t},M.prototype.divide=function(e){var t=H();return this.divRemTo(e,t,null),t},M.prototype.remainder=function(e){var t=H();return this.divRemTo(e,null,t),t},M.prototype.divideAndRemainder=function(e){var t=H(),r=H();return this.divRemTo(e,t,r),[t,r]},M.prototype.modPow=function(e,t){var r=e.bitLength(),n=z(1);if(r<=0)return n;var o=r<18?1:r<48?3:r<144?4:r<768?5:6,s=new(r<8?C:t.isEven()?N:I)(t),i=[],a=3,c=o-1,l=(1<<o)-1;if(i[1]=s.convert(this),1<o){var u=H();for(s.sqrTo(i[1],u);a<=l;)i[a]=H(),s.mulTo(u,i[a-2],i[a]),a+=2}var h,p,_=e.t-1,d=!0,f=H();for(r=V(e[_])-1;0<=_;){for(c<=r?h=e[_]>>r-c&l:(h=(e[_]&(1<<r+1)-1)<<c-r,0<_&&(h|=e[_-1]>>this.DB+r-c)),a=o;0==(1&h);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--_),d)i[h].copyTo(n),d=!1;else{for(;1<a;)s.sqrTo(n,f),s.sqrTo(f,n),a-=2;0<a?s.sqrTo(n,f):(p=n,n=f,f=p),s.mulTo(f,i[h],n)}for(;0<=_&&0==(e[_]&1<<r);)s.sqrTo(n,f),p=n,n=f,f=p,--r<0&&(r=this.DB-1,--_)}return s.revert(n)},M.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return M.ZERO;for(var r=e.clone(),n=this.clone(),o=z(1),s=z(0),i=z(0),a=z(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);0<=r.compareTo(n)?(r.subTo(n,r),t&&o.subTo(i,o),s.subTo(a,s)):(n.subTo(r,n),t&&i.subTo(o,i),a.subTo(s,a))}return 0!=n.compareTo(M.ONE)?M.ZERO:0<=a.compareTo(e)?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},M.prototype.pow=function(e){return this.exp(e,new R)},M.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone(),n=(t.compareTo(r)<0&&(e=t,t=r,r=e),t.getLowestSetBit());if((e=r.getLowestSetBit())<0)return t;for(0<(e=n<e?n:e)&&(t.rShiftTo(e,t),r.rShiftTo(e,r));0<t.signum();)0<(n=t.getLowestSetBit())&&t.rShiftTo(n,t),0<(n=r.getLowestSetBit())&&r.rShiftTo(n,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<e&&r.lShiftTo(e,r),r},M.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=v[v.length-1]){for(t=0;t<v.length;++t)if(r[0]==v[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<v.length;){for(var n=v[t],o=t+1;o<v.length&&n<b;)n*=v[o++];for(n=r.modInt(n);t<o;)if(n%v[t++]==0)return!1}return r.millerRabin(e)},M.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},M.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},M.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,o=!1,s=0;0<=--n;){var i=8==r?255&+e[n]:G(e,n);i<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==s?this[this.t++]=i:s+r>this.DB?(this[this.t-1]|=(i&(1<<this.DB-s)-1)<<s,this[this.t++]=i>>this.DB-s):this[this.t-1]|=i<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,0<s&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&M.ZERO.subTo(this,this)},M.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},M.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t[r+e]=this[r];for(r=e-1;0<=r;--r)t[r]=0;t.t=this.t+e,t.s=this.s},M.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},M.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,n=this.DB-r,o=(1<<n)-1,s=Math.floor(e/this.DB),i=this.s<<r&this.DM,a=this.t-1;0<=a;--a)t[a+s+1]=this[a]>>n|i,i=(this[a]&o)<<r;for(a=s-1;0<=a;--a)t[a]=0;t[s]=i,t.t=this.t+s+1,t.s=this.s,t.clamp()},M.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var i=r+1;i<this.t;++i)t[i-r-1]|=(this[i]&s)<<o,t[i-r]=this[i]>>n;0<n&&(t[this.t-r-1]|=(this.s&s)<<o),t.t=this.t-r,t.clamp()}},M.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:0<n&&(t[r++]=n),t.t=r,t.clamp()},M.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),o=r.t;for(t.t=o+n.t;0<=--o;)t[o]=0;for(o=0;o<n.t;++o)t[o+r.t]=r.am(0,n[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&M.ZERO.subTo(t,t)},M.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},M.prototype.divRemTo=function(e,t,r){if(!((l=e.abs()).t<=0)){var n=this.abs();if(n.t<l.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=H());var o=H(),s=this.s,i=(e=e.s,this.DB-V(l[l.t-1])),a=(0<i?(l.lShiftTo(i,o),n.lShiftTo(i,r)):(l.copyTo(o),n.copyTo(r)),o.t),c=o[a-1];if(0!=c){var l=c*(1<<this.F1)+(1<a?o[a-2]>>this.F2:0),u=this.FV/l,h=(1<<this.F1)/l,p=1<<this.F2,_=r.t,d=_-a,f=null==t?H():t;for(o.dlShiftTo(d,f),0<=r.compareTo(f)&&(r[r.t++]=1,r.subTo(f,r)),M.ONE.dlShiftTo(a,f),f.subTo(o,o);o.t<a;)o[o.t++]=0;for(;0<=--d;){var g=r[--_]==c?this.DM:Math.floor(r[_]*u+(r[_-1]+p)*h);if((r[_]+=o.am(0,g,r,d,0,a))<g)for(o.dlShiftTo(d,f),r.subTo(f,r);r[_]<--g;)r.subTo(f,r)}null!=t&&(r.drShiftTo(a,t),s!=e&&M.ZERO.subTo(t,t)),r.t=a,r.clamp(),0<i&&r.rShiftTo(i,r),s<0&&M.ZERO.subTo(r,r)}}},M.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},M.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},M.prototype.exp=function(e,t){if(4294967295<e||e<1)return M.ONE;var r,n=H(),o=H(),s=t.convert(this),i=V(e)-1;for(s.copyTo(n);0<=--i;)t.sqrTo(n,o),0<(e&1<<i)?t.mulTo(o,s,n):(r=n,n=o,o=r);return t.revert(n)},M.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},M.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=z(r),o=H(),s=H(),i="";for(this.divRemTo(n,o,s);0<o.signum();)i=(r+s.intValue()).toString(e).substr(1)+i,o.divRemTo(n,o,s);return s.intValue().toString(e)+i},M.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),n=Math.pow(t,r),o=!1,s=0,i=0,a=0;a<e.length;++a){var c=G(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(o=!0):(i=t*i+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(i,0),i=s=0))}0<s&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(i,0)),o&&M.ZERO.subTo(this,this)},M.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(M.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(M.ONE.shiftLeft(e-1),this);else{var n=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),0<n?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}},M.prototype.bitwiseTo=function(e,t,r){for(var n,o=Math.min(e.t,this.t),s=0;s<o;++s)r[s]=t(this[s],e[s]);if(e.t<this.t){for(n=e.s&this.DM,s=o;s<this.t;++s)r[s]=t(this[s],n);r.t=this.t}else{for(n=this.s&this.DM,s=o;s<e.t;++s)r[s]=t(n,e[s]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},M.prototype.changeBit=function(e,t){return e=M.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},M.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},M.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},M.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},M.prototype.multiplyLowerTo=function(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;0<n;)r[--n]=0;for(var o=r.t-this.t;n<o;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(o=Math.min(e.t,t);n<o;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},M.prototype.multiplyUpperTo=function(e,t,r){var n=r.t=this.t+e.t- --t;for(r.s=0;0<=--n;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},M.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this[0]%e;else for(var n=this.t-1;0<=n;--n)r=(t*r+this[n])%e;return r},M.prototype.millerRabin=function(e){var t=this.subtract(M.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>v.length&&(e=v.length);for(var o=H(),s=0;s<e;++s){o.fromInt(v[Math.floor(Math.random()*v.length)]);var i=o.modPow(n,this);if(0!=i.compareTo(M.ONE)&&0!=i.compareTo(t)){for(var a=1;a++<r&&0!=i.compareTo(t);)if(0==(i=i.modPowInt(2,this)).compareTo(M.ONE))return!1;if(0!=i.compareTo(t))return!1}}return!0},M.prototype.square=function(){var e=H();return this.squareTo(e),e},M.prototype.gcda=function(e,t){var r,n=this.s<0?this.negate():this.clone(),o=e.s<0?e.negate():e.clone(),s=(n.compareTo(o)<0&&(e=n,n=o,o=e),n.getLowestSetBit()),i=o.getLowestSetBit();i<0?t(n):(0<(i=s<i?s:i)&&(n.rShiftTo(i,n),o.rShiftTo(i,o)),r=function(){0<(s=n.getLowestSetBit())&&n.rShiftTo(s,n),0<(s=o.getLowestSetBit())&&o.rShiftTo(s,o),0<=n.compareTo(o)?(n.subTo(o,n),n.rShiftTo(1,n)):(o.subTo(n,o),o.rShiftTo(1,o)),0<n.signum()?setTimeout(r,0):(0<i&&o.lShiftTo(i,o),setTimeout((function(){t(o)}),0))},setTimeout(r,10))},M.prototype.fromNumberAsync=function(e,t,r,n){var o,i,a;"number"==typeof t?e<2?this.fromInt(1):(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(M.ONE.shiftLeft(e-1),s,this),this.isEven()&&this.dAddOffset(1,0),o=this,i=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(M.ONE.shiftLeft(e-1),o),o.isProbablePrime(t)?setTimeout((function(){n()}),0):setTimeout(i,0)},setTimeout(i,0)):(r=7&e,(a=[]).length=1+(e>>3),t.nextBytes(a),0<r?a[0]&=(1<<r)-1:a[0]=0,this.fromString(a,256))},M),R=(A.prototype.convert=function(e){return e},A.prototype.revert=function(e){return e},A.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},A.prototype.sqrTo=function(e,t){e.squareTo(t)},A),C=(P.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},P.prototype.revert=function(e){return e},P.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},P.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P),I=(L.prototype.convert=function(e){var t=H();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(O.ZERO)&&this.m.subTo(t,t),t},L.prototype.revert=function(e){var t=H();return e.copyTo(t),this.reduce(t),t},L.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},L.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},L.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},L),N=(k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=H();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},k);function k(e){this.m=e,this.r2=H(),this.q3=H(),O.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}function L(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function P(e){this.m=e}function A(){}function M(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):this.fromString(e,null==t&&"string"!=typeof e?256:t))}function w(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){for(var r=new d;t=e.get(),r.mulAdd(128,127&t),128&t;);this.tagNumber=r.simplify()}}function D(e,t,r,n,o){if(!(n instanceof S))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=r,this.tag=n,this.sub=o}function U(e,t){this.hexDigits="0123456789ABCDEF",e instanceof U?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=t)}function H(){return new O(null)}function B(e,t){return new O(e,t)}t=(r="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(O.prototype.am=function(e,t,r,n,o,s){for(var i=32767&t,a=t>>15;0<=--s;){var c=32767&this[e],l=this[e++]>>15,u=a*c+l*i;o=((c=i*c+((32767&u)<<15)+r[n]+(1073741823&o))>>>30)+(u>>>15)+a*l+(o>>>30),r[n++]=1073741823&c}return o},30):r&&"Netscape"!=navigator.appName?(O.prototype.am=function(e,t,r,n,o,s){for(;0<=--s;){var i=t*this[e++]+r[n]+o;o=Math.floor(i/67108864),r[n++]=67108863&i}return o},26):(O.prototype.am=function(e,t,r,n,o,s){for(var i=16383&t,a=t>>14;0<=--s;){var c=16383&this[e],l=this[e++]>>14,u=a*c+l*i;o=((c=i*c+((16383&u)<<14)+r[n]+o)>>28)+(u>>14)+a*l,r[n++]=268435455&c}return o},28),O.prototype.DB=t,O.prototype.DM=(1<<t)-1,O.prototype.DV=1<<t,O.prototype.FV=Math.pow(2,52),O.prototype.F1=52-t,O.prototype.F2=2*t-52;for(var q=[],j="0".charCodeAt(0),x=0;x<=9;++x)q[j++]=x;for(j="a".charCodeAt(0),x=10;x<36;++x)q[j++]=x;for(j="A".charCodeAt(0),x=10;x<36;++x)q[j++]=x;function G(e,t){return null==(e=q[e.charCodeAt(t)])?-1:e}function z(e){var t=H();return t.fromInt(e),t}function V(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}O.ZERO=z(0),O.ONE=z(1),F.prototype.init=function(e){for(var t,r,n=0;n<256;++n)this.S[n]=n;for(n=t=0;n<256;++n)r=this.S[n],this.S[n]=this.S[t=t+this.S[n]+e[n%e.length]&255],this.S[t]=r;this.i=0,this.j=0},F.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var W,Z=F,Y=null;function F(){this.i=0,this.j=0,this.S=[]}Y=[];var K=0,Q=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var X=new Uint32Array(256);for(window.crypto.getRandomValues(X),Q=0;Q<X.length;++Q)Y[K++]=255&X[Q]}te.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==W){for(W=new Z;K<256;){var e=Math.floor(65536*Math.random());Y[K++]=255&e}for(W.init(Y),K=0;K<Y.length;++K)Y[K]=0;K=0}return W.next()}()};var J=te,$=(ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},ee.prototype.setPublic=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=B(e,16),this.e=parseInt(t,16)):console.error("Invalid RSA public key")},ee.prototype.encrypt=function(e){var t=this.n.bitLength()+7>>3;if(e=function(e,t){if(t<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],n=e.length-1;0<=n&&0<t;){var o=e.charCodeAt(n--);o<128?r[--t]=o:127<o&&o<2048?(r[--t]=63&o|128,r[--t]=o>>6|192):(r[--t]=63&o|128,r[--t]=o>>6&63|128,r[--t]=o>>12|224)}r[--t]=0;for(var s=new J,i=[];2<t;){for(i[0]=0;0==i[0];)s.nextBytes(i);r[--t]=i[0]}return r[--t]=2,r[--t]=0,new O(r)}(e,t),null==e)return null;if(null==(e=this.doPublic(e)))return null;for(var r=e.toString(16),n=r.length,o=0;o<2*t-n;o++)r="0"+r;return r},ee.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=B(e,16),this.e=parseInt(t,16),this.d=B(r,16)):console.error("Invalid RSA private key")},ee.prototype.setPrivateEx=function(e,t,r,n,o,s,i,a){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=B(e,16),this.e=parseInt(t,16),this.d=B(r,16),this.p=B(n,16),this.q=B(o,16),this.dmp1=B(s,16),this.dmq1=B(i,16),this.coeff=B(a,16)):console.error("Invalid RSA private key")},ee.prototype.generate=function(e,t){var r=new J,n=e>>1;this.e=parseInt(t,16);for(var o=new O(t,16);;){for(;this.p=new O(e-n,1,r),0!=this.p.subtract(O.ONE).gcd(o).compareTo(O.ONE)||!this.p.isProbablePrime(10););for(;this.q=new O(n,1,r),0!=this.q.subtract(O.ONE).gcd(o).compareTo(O.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(s=this.p,this.p=this.q,this.q=s);var s=this.p.subtract(O.ONE),i=this.q.subtract(O.ONE),a=s.multiply(i);if(0==a.gcd(o).compareTo(O.ONE)){this.n=this.p.multiply(this.q),this.d=o.modInverse(a),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(i),this.coeff=this.q.modInverse(this.p);break}}},ee.prototype.decrypt=function(e){if(e=B(e,16),null==(e=this.doPrivate(e)))return null;for(var t=this.n.bitLength()+7>>3,r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var o="";++n<r.length;){var s=255&r[n];s<128?o+=String.fromCharCode(s):191<s&&s<224?(o+=String.fromCharCode((31&s)<<6|63&r[n+1]),++n):(o+=String.fromCharCode((15&s)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return o},ee.prototype.generateAsync=function(e,t,r){var n=new J,o=e>>1,s=(this.e=parseInt(t,16),new O(t,16)),i=this,a=function(){var t=function(){i.p.compareTo(i.q)<=0&&(e=i.p,i.p=i.q,i.q=e);var e=i.p.subtract(O.ONE),t=i.q.subtract(O.ONE),n=e.multiply(t);0==n.gcd(s).compareTo(O.ONE)?(i.n=i.p.multiply(i.q),i.d=s.modInverse(n),i.dmp1=i.d.mod(e),i.dmq1=i.d.mod(t),i.coeff=i.q.modInverse(i.p),setTimeout((function(){r()}),0)):setTimeout(a,0)},c=function(){i.q=H(),i.q.fromNumberAsync(o,1,n,(function(){i.q.subtract(O.ONE).gcda(s,(function(e){0==e.compareTo(O.ONE)&&i.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(c,0)}))}))};setTimeout((function t(){i.p=H(),i.p.fromNumberAsync(e-o,1,n,(function(){i.p.subtract(O.ONE).gcda(s,(function(e){0==e.compareTo(O.ONE)&&i.p.isProbablePrime(10)?setTimeout(c,0):setTimeout(t,0)}))}))}),0)};setTimeout(a,0)},ee.prototype.sign=function(e,t,r){return r=function(e,t){if(t<e.length+22)return console.error("Message too long for RSA"),null;for(var r=t-e.length-6,n="",o=0;o<r;o+=2)n+="ff";return B("0001"+n+"00"+e,16)}(($[r]||"")+t(e).toString(),this.n.bitLength()/4),null==r||null==(t=this.doPrivate(r))?null:0==(1&(e=t.toString(16)).length)?e:"0"+e},ee.prototype.verify=function(e,t,r){return t=B(t,16),null==(t=this.doPublic(t))?null:function(e){for(var t in $)if($.hasOwnProperty(t)){var r=(t=$[t]).length;if(e.substr(0,r)==t)return e.substr(r)}return e}(t.toString(16).replace(/^1f+00/,""))==r(e).toString()},r=ee,{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(){}(t={}).lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function n(){}if(n.prototype=t.prototype,e.prototype=new n,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){for(var o in r)e.prototype[o]=r[o];t=function(){};var s=["toString","valueOf"];try{"undefined"!=typeof navigator&&/MSIE/.test(navigator.userAgent)&&(t=function(e,t){for(o=0;o<s.length;o+=1){var r=s[o],n=t[r];"function"==typeof n&&n!=Object.prototype[r]&&(e[r]=n)}})}catch(e){}t(e.prototype,r)}}};var re={};void 0!==re.asn1&&re.asn1||(re.asn1={}),re.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){return(e=e.toString(16)).length%2==1?"0"+e:e},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",o=0;o<r;o++)n+="f";t=new O(n,16).xor(e).add(O.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t,r=(t=re.asn1).DERBoolean,n=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,i=t.DERNull,a=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,u=t.DERNumericString,h=t.DERPrintableString,p=t.DERTeletexString,_=t.DERIA5String,d=t.DERUTCTime,f=t.DERGeneralizedTime,g=t.DERSequence,m=t.DERSet,y=t.DERTaggedObject,E=t.ASN1Util.newObject;if(1!=(t=Object.keys(e)).length)throw"key of param shall be only one.";if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+(t=t[0])+":"))throw"undefined key: "+t;if("bool"==t)return new r(e[t]);if("int"==t)return new n(e[t]);if("bitstr"==t)return new o(e[t]);if("octstr"==t)return new s(e[t]);if("null"==t)return new i(e[t]);if("oid"==t)return new a(e[t]);if("enum"==t)return new c(e[t]);if("utf8str"==t)return new l(e[t]);if("numstr"==t)return new u(e[t]);if("prnstr"==t)return new h(e[t]);if("telstr"==t)return new p(e[t]);if("ia5str"==t)return new _(e[t]);if("utctime"==t)return new d(e[t]);if("gentime"==t)return new f(e[t]);if("seq"==t){for(var T=e[t],S=[],v=0;v<T.length;v++){var b=E(T[v]);S.push(b)}return new g({array:S})}if("set"==t){for(T=e[t],S=[],v=0;v<T.length;v++)b=E(T[v]),S.push(b);return new m({array:S})}if("tag"==t){if(r=e[t],"[object Array]"===Object.prototype.toString.call(r)&&3==r.length)return n=E(r[2]),new y({tag:r[0],explicit:r[1],obj:n});if(o={},void 0!==r.explicit&&(o.explicit=r.explicit),void 0!==r.tag&&(o.tag=r.tag),void 0===r.obj)throw"obj shall be specified for 'tag'.";return o.obj=E(r.obj),new y(o)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},re.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),o=2;o<e.length;o+=2){var s=("00000000"+parseInt(e.substr(o,2),16).toString(2)).slice(-8);n+=s.substr(1,7),"0"==s.substr(0,1)&&(t=t+"."+new O(n,2).toString(10),n="")}return t},re.asn1.ASN1Util.oidIntToHex=function(e){function t(e){return 1==(e=e.toString(16)).length?"0"+e:e}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split(".");r+=t(e=40*parseInt(n[0])+parseInt(n[1])),n.splice(0,2);for(var o=0;o<n.length;o++)r+=function(e){var r="",n=new O(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var s="",i=0;i<o;i++)s+="0";for(n=s+n,i=0;i<n.length-1;i+=7){var a=n.substr(i,7);i!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[o]);return r},re.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},re.asn1.DERAbstractString=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},t.lang.extend(re.asn1.DERAbstractString,re.asn1.ASN1Object),re.asn1.DERAbstractTime=function(e){re.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var n=this.zeroPadding,o=(e=this.localDateToUTC(e),String(e.getFullYear()));return t=(o="utc"==t?o.substr(2,2):o)+n(String(e.getMonth()+1),2)+n(String(e.getDate()),2)+n(String(e.getHours()),2)+n(String(e.getMinutes()),2)+n(String(e.getSeconds()),2),(t=!0===r&&0!=(o=e.getMilliseconds())?t+"."+n(String(o),3).replace(/[0]+$/,""):t)+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,n,o,s){e=new Date(Date.UTC(e,t-1,r,n,o,s,0)),this.setByDate(e)},this.getFreshValueHex=function(){return this.hV}},t.lang.extend(re.asn1.DERAbstractTime,re.asn1.ASN1Object),re.asn1.DERAbstractStructured=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},t.lang.extend(re.asn1.DERAbstractStructured,re.asn1.ASN1Object),re.asn1.DERBoolean=function(){re.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},t.lang.extend(re.asn1.DERBoolean,re.asn1.ASN1Object),re.asn1.DERInteger=function(e){re.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new O(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DERInteger,re.asn1.ASN1Object),re.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),re.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;e="0"+e,this.hTLV=null,this.isModified=!0,this.hV=e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var o=e.substr(r,8);n+=o=1==(o=parseInt(o,2).toString(16)).length?"0"+o:o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)t+=1==e[r]?"1":"0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},t.lang.extend(re.asn1.DERBitString,re.asn1.ASN1Object),re.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),re.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},t.lang.extend(re.asn1.DEROctetString,re.asn1.DERAbstractString),re.asn1.DERNull=function(){re.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},t.lang.extend(re.asn1.DERNull,re.asn1.ASN1Object),re.asn1.DERObjectIdentifier=function(e){var t=function(e){return 1==(e=e.toString(16)).length?"0"+e:e};re.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split(".");e=40*parseInt(n[0])+parseInt(n[1]),r+=t(e),n.splice(0,2);for(var o=0;o<n.length;o++)r+=function(e){var r="",n=new O(e,10).toString(2),o=7-n.length%7;7==o&&(o=0);for(var s="",i=0;i<o;i++)s+="0";for(n=s+n,i=0;i<n.length-1;i+=7){var a=n.substr(i,7);i!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(n[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=re.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},t.lang.extend(re.asn1.DERObjectIdentifier,re.asn1.ASN1Object),re.asn1.DEREnumerated=function(e){re.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new O(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DEREnumerated,re.asn1.ASN1Object),re.asn1.DERUTF8String=function(e){re.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},t.lang.extend(re.asn1.DERUTF8String,re.asn1.DERAbstractString),re.asn1.DERNumericString=function(e){re.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},t.lang.extend(re.asn1.DERNumericString,re.asn1.DERAbstractString),re.asn1.DERPrintableString=function(e){re.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},t.lang.extend(re.asn1.DERPrintableString,re.asn1.DERAbstractString),re.asn1.DERTeletexString=function(e){re.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},t.lang.extend(re.asn1.DERTeletexString,re.asn1.DERAbstractString),re.asn1.DERIA5String=function(e){re.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},t.lang.extend(re.asn1.DERIA5String,re.asn1.DERAbstractString),re.asn1.DERUTCTime=function(e){re.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},t.lang.extend(re.asn1.DERUTCTime,re.asn1.DERAbstractTime),re.asn1.DERGeneralizedTime=function(e){re.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},t.lang.extend(re.asn1.DERGeneralizedTime,re.asn1.DERAbstractTime),re.asn1.DERSequence=function(e){re.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},t.lang.extend(re.asn1.DERSequence,re.asn1.DERAbstractStructured),re.asn1.DERSet=function(e){re.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++)e.push(this.asn1Array[t].getEncodedHex());return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},t.lang.extend(re.asn1.DERSet,re.asn1.DERAbstractStructured),re.asn1.DERTaggedObject=function(e){re.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},t.lang.extend(re.asn1.DERTaggedObject,re.asn1.ASN1Object),ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var ne,oe=function(e){function t(r){var n=e.call(this)||this;return r&&("string"==typeof r?n.parseKey(r):(t.hasPrivateKeyProperty(r)||t.hasPublicKeyProperty(r))&&n.parsePropertiesFrom(r)),n}var r=t,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=r}return ne(r,n),r.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o),t.prototype.parseKey=function(e){try{var t=0,r=0,n=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){if(void 0===c){var t="0123456789ABCDEF",r=" \f\n\r\t \u2028\u2029";for(c={},i=0;i<16;++i)c[t.charAt(i)]=i;for(t=t.toLowerCase(),i=10;i<16;++i)c[t.charAt(i)]=i;for(i=0;i<r.length;++i)c[r.charAt(i)]=-1}for(var n=[],o=0,s=0,i=0;i<e.length;++i){var a=e.charAt(i);if("="==a)break;if(-1!=(a=c[a])){if(void 0===a)throw new Error("Illegal character at offset "+i);o|=a,2<=++s?(n[n.length]=o,s=o=0):o<<=4}}if(s)throw new Error("Hex encoding incomplete: 4 bits missing");return n}(e):_.unarmor(e),o=T.decode(n);if(9===(o=3===o.sub.length?o.sub[2].sub[0]:o).sub.length){t=o.sub[1].getHexStringValue(),this.n=B(t,16),r=o.sub[2].getHexStringValue(),this.e=parseInt(r,16);var s=o.sub[3].getHexStringValue(),i=(this.d=B(s,16),o.sub[4].getHexStringValue()),a=(this.p=B(i,16),o.sub[5].getHexStringValue()),l=(this.q=B(a,16),o.sub[6].getHexStringValue()),u=(this.dmp1=B(l,16),o.sub[7].getHexStringValue()),h=(this.dmq1=B(u,16),o.sub[8].getHexStringValue());this.coeff=B(h,16)}else{if(2!==o.sub.length)return!1;var p=o.sub[1].sub[0];t=p.sub[0].getHexStringValue(),this.n=B(t,16),r=p.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new re.asn1.DERInteger({int:0}),new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e}),new re.asn1.DERInteger({bigint:this.d}),new re.asn1.DERInteger({bigint:this.p}),new re.asn1.DERInteger({bigint:this.q}),new re.asn1.DERInteger({bigint:this.dmp1}),new re.asn1.DERInteger({bigint:this.dmq1}),new re.asn1.DERInteger({bigint:this.coeff})]};return new re.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return u(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new re.asn1.DERSequence({array:[new re.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new re.asn1.DERNull]}),t=new re.asn1.DERSequence({array:[new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e})]});return t=new re.asn1.DERBitString({hex:"00"+t.getEncodedHex()}),new re.asn1.DERSequence({array:[e,t]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return u(this.getPublicBaseKey())},t.wordwrap=function(e,t){return e?(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(RegExp(t,"g")).join("\n")):e},t.prototype.getPrivateKey=function(){return"-----BEGIN RSA PRIVATE KEY-----\n"+t.wordwrap(this.getPrivateBaseKeyB64())+"\n-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){return"-----BEGIN PUBLIC KEY-----\n"+t.wordwrap(this.getPublicBaseKeyB64())+"\n-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(r);ie.prototype.setKey=function(e){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new oe(e)},ie.prototype.setPrivateKey=function(e){this.setKey(e)},ie.prototype.setPublicKey=function(e){this.setKey(e)},ie.prototype.decrypt=function(e){try{return this.getKey().decrypt(h(e))}catch(e){return!1}},ie.prototype.encrypt=function(e){try{return u(this.getKey().encrypt(e))}catch(e){return!1}},ie.prototype.sign=function(e,t,r){try{return u(this.getKey().sign(e,t,r))}catch(e){return!1}},ie.prototype.verify=function(e,t,r){try{return this.getKey().verify(e,h(t),r)}catch(e){return!1}},ie.prototype.getKey=function(e){if(!this.key){if(this.key=new oe,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},ie.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},ie.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},ie.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},ie.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},ie.version="3.2.1";const se=ie;function ie(e){this.default_key_size=(e=(e=void 0===e?{}:e)||{}).default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}})(0,Se={},Ce),Se.default),Ne=(Object.defineProperty(ke.prototype,"publicKey",{get:function(){return"-----BEGIN PUBLIC KEY-----\n        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxtEM51skf+Bg29Mdb+WN\n        IkgbGDZ/wOP4MTntlut65WpPpXOkg2m9EKscmzfE6kUNLYnYV77fZGFSjr+Wkmoz\n        VK1lJ3seswBNyP6X5LUszkf1WoeEyBbfegTf3XkHEeWJ5BlD9syurlA2Fh+cTaNO\n        RNlAGBZO7SdgTHPYAcHu0fAnJZwCZ9+ZZkVnjyTBqQckovMttKqvtoUKcp7NgGve\n        w0OJxFKwIITu1keGdZ+yN9wBul4qJfTy8otOcwGL4bnoABMhCNvJc3xA70BuaaF0\n        fvhxA8diV/2W+qg+LAzdqajLaNciuDHIY5Y+z5kZI1eBa3J3aqUASse4YzzTYv48\n        7wIDAQAB\n        -----END PUBLIC KEY-----"},enumerable:!1,configurable:!0}),ke.prototype.encrypt=function(e){return e=w.a.encrypt(this.uint8Array2WordArray(e),this.key2,{iv:this.iv2}).toString(),ve.a.toByteArray(e)},ke.prototype.decrypt=function(e){return this.wordArray2Uint8Array(w.a.decrypt(ve.a.fromByteArray(e),this.key2,{iv:this.iv2}))},ke.prototype.generateK1Sign=function(){var e=this.generateNonce(),t=((this.key1=D.a.parse(e),this.iv1=be.a.parse(Re()(e).toString().toLowerCase()),t=new Ie).setPublicKey(this.publicKey),t.getKey().encrypt(e));return this.wordArray2Uint8Array(be.a.parse(t))},ke.prototype.decryptK2Sign=function(e){try{this.key2=w.a.decrypt(ve.a.fromByteArray(e),this.key1,{iv:this.iv1}),this.iv2=Re()(this.key2)}catch(e){}},ke.prototype.generateNonce=function(){var e=Math.random().toString().substr(2,16);return e.length<16&&(e+=e.substr(0,16-e.length)),e},ke.prototype.md5=function(e){return Re()(e).toString()},ke.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(Re()(this.uint8Array2WordArray(e)))},ke.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,r=e.sigBytes,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t[o>>>2]>>>24-o%4*8&255;return n},ke.prototype.uint8Array2WordArray=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e[n])<<24-n%4*8;return Oe.a.create(r,t)},ke);function ke(){}function Le(e){return Uint8Array.from(Array.from(unescape(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function Pe(e){return decodeURIComponent(escape(String.fromCharCode.apply(String,Array.from(e))))}var Ae={"/lr/login_room_rsp":"LoginRoomRsp","/lr/logout_room_rsp":"LogoutRoomRsp","/sw/push_kickout":"PushKickout","/sw/push":"PushReq","/sw/merge_push":"CmdMergePushReq","/lr/room/hb_rsp":"HbRsp","/lr/userlist/userlist_rsp":"UserlistRsp","/lr/stream/add_rsp":"StreamAddRsp","/lr/stream/delete_rsp":"StreamDeleteRsp","/lr/stream/update_rsp":"StreamUpdateRsp","/lr/stream/list_rsp":"StreamListRsp","/lr/push/stream_add":"PushStream","/lr/push/stream_delete":"PushStream","/lr/push/stream_update":"PushStream","/lr/signal/liverequest_rsp":"SignalLiveRsp","/lr/signal/liverresult_rsp":"SignalLiveResulRsp","/lr/signal/liveinvite_rsp":"SignalLiveInviteRsp","/lr/signal/livestop_rsp":"SignalLiveStopRsp","/lr/signal/livescustom_rsp":"SignalLiveCustomRsp","/lr/im/chat_rsp":"ImChatRsp","/lr/room/enter_rsp":"EnterRsp","/lr/room/quit_rsp":"QuitRsp","/lr/trans/trans_rsp":"TransRsp","/lr/trans/transfetch_rsp":"TransFetchRsp","/lr/bigim/chat_rsp":"BigimChatRsp","/lr/relay_rsp":"RelayRsp","/lr/token/renew_token_rsp":"RenewTokenRsp","/lr/push/user_updated":"PushUserInfoUpdated","/lr/push/user_token_expire":"PushUserTokenExpire","/lr/push/im_chat":"PushImChat","/lr/push/bigim_chat":"PushBigImChat","/lr/push/trans":"PushTrans","/lr/push/user_kickout":"PushUserKickout","/lr/push/user_logreport":"PushUserLogReport","/lr/push/usertrans":"PushUserTrans"},Me=(Se=r(1),r.n(Se)),we=function(){return(we=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.util.Long=Me.a,t.configure();var De,Ue=((Se=De=De||{})[Se.disconnected=0]="disconnected",Se[Se.broken=1]="broken",Se[Se.connected=2]="connected",Object.defineProperty(He.prototype,"nickName",{get:function(){return Le(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),He.prototype.isDisConnect=function(){return this.state!==De.connected},He.prototype.getHeader=function(e){e={cmd:e,seq:++this.seq,timestamp:(new Date).getTime(),session_id:this.switchSessionID,controls:this.controls,flags:this.flags};var t=Ee.proto_switch.Header.create(e);return t=Ee.proto_switch.Header.encode(t).finish(),[e.seq,t]},He.prototype.isUaConnect=function(){return this.ua.isConnect()},He.prototype.sendMessage=function(e,t,r,n,o,s,i){var a=this;if(void 0===o&&(o={timeout:6e3}),void 0===s&&(s=!0),this.logger.info(q.LIVEROOMHANDLER_SENDMESSAGE+" call"),"/lr/login_room"!==e&&this.state!==De.connected)return this.logger.warn(q.LIVEROOMHANDLER_SENDMESSAGE+" state "+this.state),-1;var c=this.getHeader(e),l=c[1],u=t;return!this.unEncryptCmdList.includes(e)&&this.isEncrypt&&(u=this.crypto.encrypt(t)),t=this.getHead(l.length,u.length),t=new Uint8Array(Array.from(t).concat(Array.from(l)).concat(Array.from(u))),s&&(l={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:o.timeout,success:r,error:function(e,t,r){var o;if(a.logger.info(q.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+t+" "+JSON.stringify(e)+" "+JSON.stringify(r)),"/lr/login_room_rsp"!==(null==(o=null==e?void 0:e.header)?void 0:o.cmd)&&-1<[1002,105].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code))return null!=r&&r.roomID?(o=a.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID})))?void o.retryRoom():void a.logger.error(q.LIVEROOMHANDLER_SENDMESSAGE+" room no found ignore "):void a.rtm.retryRoom();[207,208].indexOf(null==(o=null==e?void 0:e.body)?void 0:o.err_code),n&&n(e,t)},params:i},u=this.sendCommandList.push(l),this.sendCommandMap[l.seq]=u),this.logger.info(q.LIVEROOMHANDLER_SENDMESSAGE+" seq: "+c[0]+" cmd: "+e),s="/lr/login_room"===e,null!=(o=this.liveroomRequest)&&o.sendRequest({payload:t,ack:s},(function(e){a.logger.info(q.LIVEROOMHANDLER_SENDMESSAGE+" fail")}),(function(){a.logger.info(q.LIVEROOMHANDLER_SENDMESSAGE+" ack")})),c[0]},He.prototype.getHead=function(e,t){var r=new Uint8Array(7);return r[0]=33,r[1]=e>>8,r[2]=e-(r[1]<<8),r.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),r},He.prototype.handlePush=function(e){if(33===(t=e[0])){var t=(e[1]<<8)+e[2],r=Ee.proto_switch.Header.decode(e.slice(7,7+t));if(t=e=e.slice(7+t),!this.unEncryptCmdList.includes(r.cmd)&&this.isEncrypt&&(t=this.crypto.decrypt(e)),!Ae[r.cmd])return this.logger.info(q.LIVEROOMHANDLER_HANDLEPUSH+" cmd is not rtc"),void this.onSwitchMessage(r,t);e=this.decodeResponseBody(r,t),this.swPushCmdList.includes(r.cmd)?this.handleSwitchPush(r,e):(this.logger.info(q.LIVEROOMHANDLER_HANDLEPUSH+" down "+JSON.stringify(this.transBuf(e))),t={header:this.transHeader(r),body:this.transRsp(e)},this.handleSendCommandMsgRsp(t))}},He.prototype.handleSwitchPush=function(e,t){if("/sw/push"===e.cmd){var r=(a=this.transRsp(t.head)).room_id;if(this.stateCenter.roomModulesList.find((function(e){return e.roomID==r}))){var n=void 0,o={header:a,body:n=this.unStructCmdList.includes(t.head.sub_cmd)?{signal_msg:Pe(t.msg_body),sub_cmd:this.joinLiveMap[t.head.sub_cmd]}:"/lr/push/signal_custom"===t.head.sub_cmd?{custommsg:Pe(t.msg_body)}:Ae[t.head.sub_cmd]?this.transRsp(this.decode(Ee.liveroom_cs[Ae[t.head.sub_cmd]],t.msg_body)):{}};if(this.logger.info(q.LIVEROOMHANDLER_HANDLESWITCHPUSH+" push "+JSON.stringify(this.transBuf(o))),this.whiteboardPushCmdList.includes(t.head.sub_cmd))this.logger.info(q.LIVEROOMHANDLER_HANDLESWITCHPUSH+" white "),this.onSwitchMessage(e,t);else switch(t.head.sub_cmd){case"/lr/push/user_updated":this.handlePushUserStateUpdateMsg(o);break;case"/lr/push/user_kickout":this.handlePushKickout(o,!1);break;case"/lr/push/trans":this.handlePushTransMsg(o);break;case"/lr/push/im_chat":this.handlePushRoomMsg(o);break;case"/lr/push/signal_custom":this.handlePushCustomMsg(o);break;case"/lr/push/stream_add":case"/lr/push/stream_delete":case"/lr/push/stream_update":this.handlePushStreamMsg(o);break;case"/lr/push/joinlive_request":case"/lr/push/joinlive_result":case"/lr/push/joinlive_invite":case"/lr/push/joinlive_stop":this.handlePushSignalMsg(o);break;case"/lr/push/user_token_expire":this.handlePushTokenExpire(o)}1==t.head.qos_flag&&(c=Ee.proto_switch.PushRsp.create({code:0,message:"",sub_cmd:t.head.sub_cmd,msg_id:t.head.msg_id,server_send_time:t.head.send_time}),l=Ee.proto_switch.PushRsp.encode(c).finish(),this.sendMessage("/sw/push_rsp",l,void 0,void 0))}else this.logger.warn(q.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")}else{var s,i,a,c,l;"/sw/merge_push"===e.cmd?(s=(a=this.transRsp(t.head)).room_id,this.stateCenter.roomModulesList.find((function(e){return e.roomID==s}))?(i=[],t.messages.forEach((function(e){var t;i.push({sub_cmd:e.sub_cmd,sub_seq:e.sub_seq,msg_id:e.msg_id}),"/lr/push/bigim_chat"===e.sub_cmd&&(t=Ee.liveroom_cs.PushBigImChat.decode(e.msg_body),e.msg_body=t)})),delete(a={header:(n=this.transRsp(t)).head,body:n}).body.head,this.handlePushMergeMsg(a),1==t.head.qos_flag&&(c=Ee.proto_switch.CmdMergePushRsp.create({messages:i}),l=Ee.proto_switch.CmdMergePushRsp.encode(c).finish(),this.sendMessage("/sw/merge_push_rsp",l,void 0,void 0))):this.logger.warn(q.LIVEROOMHANDLER_HANDLESWITCHPUSH+" room no found ignore ")):"/sw/push_kickout"===e.cmd&&this.handlePushKickout({header:e,body:n={reason:900<t.reason?t.reason-900:t.reason,msg:t.message,need_relogin:void 0!==t.need_relogin?t.need_relogin:0}},!0)}},He.prototype.handlePushTokenExpire=function(e){},He.prototype.handlePushKickout=function(e,t){},He.prototype.handlePushStreamMsg=function(e){},He.prototype.handlePushSignalMsg=function(e){},He.prototype.handlePushMergeMsg=function(e){},He.prototype.handlePushCustomMsg=function(e){},He.prototype.handlePushRoomMsg=function(e){},He.prototype.handlePushTransMsg=function(e){},He.prototype.onSwitchMessage=function(e,t){},He.prototype.decodeResponseBody=function(e,t){var r=this.onSwitchCmdList.includes(e.cmd)?"proto_switch":"liveroom_cs";return this.decode(this.protoInstance[r][Ae[e.cmd]],t)},He.prototype.handlePushUserStateUpdateMsg=function(e){},He.prototype.login=function(e,t,r){var o,s,i,a,c=this,l=(this.state==De.disconnected&&(this.logger.info(q.LIVEROOMHANDLER_LOGIN+" state disconnect"),this.closeRequest()),(new Date).getTime()+"");e.isMulti?(i={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,net_type:H.getNetTypeNum(),config:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0},lv_key:e.lvKey,third_token:Le(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",conn_type:2,room_name:Le(e.roomName)},s=we(we({},i),{room_name:e.roomName,third_token:e.token}),this.logger.info(q.LIVEROOMHANDLER_LOGIN+" enter "+JSON.stringify(s)),i=Ee.liveroom_cs.EnterReq.create(i),a=Ee.liveroom_cs.EnterReq.encode(i).finish(),this.sendMessage("/lr/room/enter",a,(function(e,r){c.longToStringNumber(e.body,["user_session_id","room_session_id","ret_timestamp"],"toString"),c.transKeysName(e.body,[["user_session_id","session_id"],["hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)}),void 0,void 0,{roomID:e.roomID})):(o={app_id:this.stateCenter.appid,id_name:Le(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.stateCenter.ENV%2==0?n.TT_WEB:n.TT_MINIPROGRAM,net_type:H.getNetTypeNum(),sdk_ver:parseInt(this.rtm.version.replace(/\./g,"")),proto_ver:131072,nick_name:this.nickName,client_stamp:Le(l),crypt_version:1,k1_sign:this.crypto.generateK1Sign(),relogin_token:this.switchSessionID.notEquals(Me.a.fromInt(0))?Le(this.reloginToken):"",role:this.stateCenter.role,liveroom_session_id:Me.a.fromString(e.sessionID),room_id:Le(e.roomID),room_name:Le(e.roomName),biz_type:0,room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0,lv_key:e.lvKey,third_token:Le(e.token),user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2},s=we(we({},o),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:l,k1_sign:void 0,relogin_token:this.reloginToken,liveroom_session_id:e.sessionID,room_id:e.roomID,room_name:e.roomName,third_token:e.token}),this.logger.info(q.LIVEROOMHANDLER_LOGIN+" login "+JSON.stringify(s)),this.k1SignLogoutBuffer=this.crypto.md5Bytes(o.k1_sign),i=Ee.proto_switch.LoginRoomReq.create(o),a=Ee.proto_switch.LoginRoomReq.encode(i).finish(),this.sendMessage("/lr/login_room",a,(function(e,r){c.switchSessionID=e.header.session_id,c.reloginToken=e.body.relogin_token,c.crypto.decryptK2Sign(e.body.k2_sign),1===e.body.crypt_option?c.isEncrypt=!1:void 0===e.body.crypt_option&&(c.isEncrypt=!0),c.longToStringNumber(e.body,["liveroom_session_id","room_session_id","ret_timestamp"],"toString"),delete e.body.heartbeat_interval,delete e.body.heartbeat_timeout,c.transKeysName(e.body,[["liveroom_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"]]),c.keysExist(e.body,["token_remain_time","stream_seq"]),t&&t(e,r)}),(function(e,t){r&&r(e,t)})))},He.prototype.transKeysName=function(e,t){t.forEach((function(t){e[t[1]]=e[t[0]],delete e[t[0]]}))},He.prototype.keysExist=function(e,t){t.forEach((function(t){void 0===e[t]&&(e[t]=0)}))},He.prototype.longToStringNumber=function(e,t,r){t.forEach((function(t){Me.a.isLong(e[t])&&(e[t]=e[t][r]())}))},He.prototype.logout=function(e,t,r){var n,o,s,i;return e.isMulti?(n={req_head:this.getReqHead(e),switch_session_id:this.switchSessionID,nick_name:this.nickName,role:this.stateCenter.role,config_list:{room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:this.stateCenter.userStateUpdate?1:0}},o=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_LOGOUT+" quit "+JSON.stringify(o)),s=Ee.liveroom_cs.QuitReq.create(n),i=Ee.liveroom_cs.QuitReq.encode(s).finish(),this.sendMessage("/lr/room/quit",i,t,r)):(n={logout_code:0,logout_check:this.crypto.md5Bytes(Le(e.token)),liveroom_session_id:Me.a.fromString(e.sessionID),room_id:Le(e.roomID),role:this.stateCenter.role,nickname:this.nickName,logout_logic:this.stateCenter.isMultiRoom?3:1},o=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_LOGOUT+" logout "+JSON.stringify(o)),s=Ee.proto_switch.LogoutRoomReq.create(n),i=Ee.proto_switch.LogoutRoomReq.encode(s).finish(),this.sendMessage("/lr/logout_room",i,t,r))},He.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(P.TIMEOUT,t._data.seq)}),0),t=e.getFirst()},He.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),n=Date.parse(new Date+""),o=0,s=this;null!=r&&"break"!==function(){return r._data&&r._data.sendTime+r._data.timeout>n?"break":(r._data&&delete t[r._data.seq],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+s.sendDataDropTimeout<n||(i=r&&r._data&&r._data.error,a=r&&r._data&&r._data.seq,setTimeout((function(){i&&i(P.TIMEOUT,a)}),0)),++o>=s.sendDataCheckOnceCount?"break":void(r=e.getFirst()));var i,a}(););},He.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},He.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},He.prototype.handleSendCommandMsgRsp=function(e){var t,r,n=this,o=this.sendCommandMap[e.header.seq];null!=o&&(r=null==(t=o._data)?void 0:t.params,delete this.sendCommandMap[e.header.seq],this.sendCommandList.remove(o),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,n.seq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,n.seq,r)}),0))},He.prototype.getReqHead=function(e){return{room_id:e.roomID,user_session_id:Me.a.fromString(e.sessionID),room_session_id:Me.a.fromString(e.roomSessionID)}},He.prototype.heartBeat=function(e,t,r){var n=this;r={req_head:this.getReqHead(r),role:this.stateCenter.role,lv_key:r.lvKey},r=Ee.liveroom_cs.HbReq.create(r),r=Ee.liveroom_cs.HbReq.encode(r).finish(),this.sendMessage("/lr/room/hb",r,(function(t){n.transKeysName(t.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"]]),t.body.server_user_seq=t.body.user_seq.toNumber(),n.longToStringNumber(t.body,["dati_time_window"],"toNumber"),e&&e(t)}),t)},He.prototype.fetchUserList=function(e,t,r,n){var o=this;return n=this.getReqHead(n),n=we({req_head:n},e),e=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_FETCH_USER_LIST+" "+JSON.stringify(e)),e=Ee.liveroom_cs.UserlistReq.create(n),n=Ee.liveroom_cs.UserlistReq.encode(e).finish(),this.sendMessage("/lr/userlist/userlist",n,(function(e,r){o.logger.info(q.LIVEROOMHANDLER_FETCH_USER_LIST+" suc "+r),o.transKeysName(e.body,[["user_basic_list","user_baseinfos"]]),o.longToStringNumber(e.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(e,r)}),r)},He.prototype.sendRoomMsg=function(e,t,r,n){var o=this;return n={req_head:this.getReqHead(n),msg_category:e.msg_category,msg_priority:e.msg_priority,msg_type:e.msg_type,msg_content:Le(e.msg_content)},e=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_SENDROOMMSG+" "+JSON.stringify(e)),e=Ee.liveroom_cs.ImChatReq.create(n),n=Ee.liveroom_cs.ImChatReq.encode(e).finish(),this.sendMessage("/lr/im/chat",n,(function(e){o.longToStringNumber(e.body,["msg_id"],"toNumber"),t&&t(e)}),r)},He.prototype.sendReliableMessage=function(e,t,r,n){return n={req_head:this.getReqHead(n),role:this.stateCenter.role,nick_name:this.nickName,trans_type:Le(e.trans_type),trans_data:Le(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:Le(e.trans_channel)},e=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_SENDRELIABLEMESSAGE+" "+JSON.stringify(e)),e=Ee.liveroom_cs.TransReq.create(n),n=Ee.liveroom_cs.TransReq.encode(e).finish(),this.sendMessage("/lr/trans/trans",n,t,r)},He.prototype.fetchReliableMessage=function(e,t,r,n){n=this.getReqHead(n);var o=e.fetch_array.map((function(e){return{trans_type:Le(e.trans_type),trans_local_seq:e.trans_seq}}));return n={req_head:n,trans_channel:Le(e.trans_channel),fetch_array:o},e=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_FETCHRELIABLEMESSAGE+" "+JSON.stringify(e)),o=Ee.liveroom_cs.TransFetchReq.create(n),e=Ee.liveroom_cs.TransFetchReq.encode(o).finish(),this.sendMessage("/lr/trans/transfetch",e,t,r)},He.prototype.sendCustomCommand=function(e,t,r,n){var o=this,s=(n=this.getReqHead(n),e.dest_id_name.map((function(e){return{id_name:Le(e)}})));return n=we({req_head:n,dst_userlist:s,push_message:Le(e.custom_msg)},e),s=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_SENDCUSTOMCOMMAND+" "+JSON.stringify(s)),e=Ee.liveroom_cs.SignalLiveReq.create(n),s=Ee.liveroom_cs.SignalLiveReq.encode(e).finish(),this.sendMessage("/lr/signal/livescustom",s,(function(e){t&&t(o.transRsp(e))}),(function(e){r&&r(o.transRspHead(e.rsp_head))}))},He.prototype.sendBigRoomMessage=function(e,t,r,n){return n=this.getReqHead(n),e=e.msgs.map((function(e){return{msg_category:e.msg_category,msg_type:e.msg_type,msg_timestamp:Me.a.fromNumber(Date.now()),msg_content:Le(e.msg_content),bigmsg_client_id:Le(e.bigmsg_client_id)}})),e=this.transBuf(n={req_head:n,nick_name:this.nickName,role:this.stateCenter.role,msgs:e}),this.logger.info(q.LIVEROOMHANDLER_SENDBIGROOMMESSAGE+" "+JSON.stringify(e)),e=Ee.liveroom_cs.BigimChatReq.create(n),n=Ee.liveroom_cs.BigimChatReq.encode(e).finish(),this.sendMessage("/lr/bigim/chat",n,t,r)},He.prototype.sendRelayMessage=function(e,t,r,n){return n={req_head:this.getReqHead(n),nick_name:this.nickName,role:this.stateCenter.role,relay_type:Le(e.relay_type),relay_data:Le(e.relay_data)},e=Ee.liveroom_cs.RelayReq.create(n),n=Ee.liveroom_cs.RelayReq.encode(e).finish(),this.sendMessage("/lr/relay",n,t,r)},He.prototype.sendSignalCmd=function(e,t,r,n){var o="",s="";switch(e.sub_cmd){case 1003:o="/lr/signal/liveinvite",s="SignalLiveInviteReq";break;case 1001:o="/lr/signal/liverequest",s="SignalLiveReq";break;case 1002:o="/lr/signal/liverresult",s="SignalLiveResultReq";break;case 1004:o="/lr/signal/livestop",s="SignalLiveStopReq"}n=this.getReqHead(n);var i=e.dest_id_name.map((function(e){return{id_name:Le(e)}}));return n={req_head:n,push_message:Le(e.signal_msg),dst_userlist:i},e=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_SENDSIGNALCMD+" "+JSON.stringify(e)),i=Ee.liveroom_cs[s].create(n),e=Ee.liveroom_cs[s].encode(i).finish(),Ee.liveroom_cs[s].decode(e),this.sendMessage(o,e,t,r)},He.prototype.sendStreamUpdate=function(e,t,r,n){var o,s=this;try{o=JSON.parse(e.stream_msg)}catch(e){}var i,a,c="",l=(this.logger.info(q.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(e)),this.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID})));if(l){switch(e.sub_cmd){case 2001:c="/lr/stream/add",i="StreamAddReq",a={req_head:this.getReqHead(l),stream_id:Le(o.stream_id),extra_info:Le(o.extra_info),client_req_seq:this.seq+1,login_mode:1,third_token:Le(e.third_token||"")};break;case 2002:c="/lr/stream/delete",i="StreamDeleteReq",a={req_head:this.getReqHead(l),stream_id:Le(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1};break;case 2003:c="/lr/stream/update",i="StreamUpdateReq",a={req_head:this.getReqHead(l),stream_id:Le(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1,extra_info:Le(o.extra_info)}}var u=this.transBuf(a);this.logger.info(q.LIVEROOMHANDLER_SENDSTREAMUPDATE+" "+JSON.stringify(u)),u=Ee.liveroom_cs[i].create(a),u=Ee.liveroom_cs[i].encode(u).finish(),this.sendMessage(c,u,(function(e){s.logger.info(q.LIVEROOMHANDLER_SENDSTREAMUPDATE+" suc "+c+" "+JSON.stringify(e)),e.header.room_id=l.roomID,t&&t(e)}),(function(e){s.logger.info(q.LIVEROOMHANDLER_SENDSTREAMUPDATE+" fail "+c+" "+JSON.stringify(e)),r&&r(e)}))}else this.logger.error(q.LIVEROOMHANDLER_SENDSTREAMUPDATE+" room no found ignore ")},He.prototype.getStreamList=function(e,t,r,n){var o,s=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID}));s?(s={req_head:this.getReqHead(s)},o=this.transBuf(s),this.logger.info(q.LIVEROOMHANDLER_GETSTREAMLIST+" "+JSON.stringify(o)),o=Ee.liveroom_cs.StreamListReq.create(s),s=Ee.liveroom_cs.StreamListReq.encode(o).finish(),this.sendMessage("/lr/stream/list",s,(function(e){t&&t(e)}),(function(e){r&&r(e)}))):this.logger.error(q.LIVEROOMHANDLER_GETSTREAMLIST+" room no found ignore "+n.roomID)},He.prototype.transBuf=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){["logout_check","k2_sign","k1_sign"].includes(n)?r[n]=e[n]:t.transReqBytes(r,e,n)})),r},He.prototype.transReqBytes=function(e,t,r){var n=this;if(Me.a.isLong(t[r]))e[r]=t[r].toString();else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(o){return n.transReqBytes(e[r],t[r],o)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var o=0;o<t[r].length;o++)!function(o){var s={};Object.keys(t[r][o]).forEach((function(e){n.transReqBytes(s,t[r][o],e)})),e[r].push(s)}(o)}else e[r]="[object Uint8Array]"===Object.prototype.toString.call(t[r])?Pe(t[r]):t[r]},He.prototype.transHeader=function(e){return e.timestamp=Me.a.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},He.prototype.transRsp=function(e){var t=this,r=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},n=we(we({},e),r),o=(delete n.rsp_head,{});return Object.keys(n).forEach((function(e){"k2_sign"===e?o[e]=n[e]:t.transBytes(o,n,e)})),o},He.prototype.transBytes=function(e,t,r){var n=this;if(Me.a.isLong(t[r]))e[r]=t[r];else if("[object Object]"===Object.prototype.toString.call(t[r]))e[r]={},Object.keys(t[r]).forEach((function(o){return n.transBytes(e[r],t[r],o)}));else if("[object Array]"===Object.prototype.toString.call(t[r])&&"[object Object]"===Object.prototype.toString.call(t[r][0])){e[r]=[];for(var o=0;o<t[r].length;o++)!function(o){var s={};Object.keys(t[r][o]).forEach((function(e){n.transBytes(s,t[r][o],e)})),e[r].push(s)}(o)}else e[r]="[object Uint8Array]"===Object.prototype.toString.call(t[r])?Pe(t[r]):t[r]},He.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},He.prototype.decode=function(e,t){return we({},e.decode(t))},He.prototype.handleDisconnected=function(e,t){var r=this;this.logger.info(q.LIVEROOMHANDLER_HANDLEDISCONNECTED+" call"),this.state=De.disconnected,this.stateCenter.useNetAgent&&e===O.TIMEOUT&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(r.ua.isConnect()?(r.logger.info(q.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is connect"),e.roomTryHandler.active()):(r.logger.info(q.LIVEROOMHANDLER_HANDLEDISCONNECTED+" ua is disconnect"),r.ua.connectUa()))}))},He.prototype.handleBroken=function(){this.logger.info(q.LIVEROOMHANDLER_HANDLEBROKEN+" call"),this.state=De.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",C.Reconnecting,P.NETWORK_BROKEN))}))},He.prototype.handleConnected=function(e){var t=this;this.logger.info(q.LIVEROOMHANDLER_HANDLECONNECTED+" call "+e),this.state=De.connected,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach(e===S.AUTO?function(e){e.roomTryHandler&&t.ua.isConnect()&&e.roomTryHandler.active()}:function(e){e.roomTryHandler&&(e.roomTryHandler.stopMaxTime(),e.roomTryHandler.invalid())})},He.prototype.renewToken=function(e,t,r,n){var o=this;n={req_head:this.getReqHead(n),token:e.token},e=Ee.liveroom_cs.RenewTokenReq.create(n),e=Ee.liveroom_cs.RenewTokenReq.encode(e).finish(),n=this.transBuf(n),this.logger.info(q.LIVEROOMHANDLER_RENEW_TOKEN+" "+JSON.stringify(n)),this.sendMessage("/lr/token/renew_token",e,(function(e,r){o.keysExist(e.body,["token_remain_time"]),t&&t(e,r)}),r)},He.prototype.reset=function(){this.logger.info(q.LIVEROOMHANDLER_RESET+" call "),this.state=De.disconnected,this.switchSessionID=Me.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},He.prototype.closeRequest=function(){var e;null!=(e=this.liveroomRequest)&&e.closeRequest()},He.prototype.resetSessionInfo=function(){this.switchSessionID=Me.a.fromInt(0)},He);function He(e,t,r,n,o){var s=this;this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=n,this.rtm=o,this.seq=0,this.controls=new Uint8Array(1),this.flags=new Uint8Array(1),this.sendCommandList=new E,this.sendCommandMap={},this.isEncrypt=!1,this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=Te.a,this.swPushCmdList=["/sw/push","/sw/merge_push","/sw/push_kickout","/sw/push_redirect"],this.onSwitchCmdList=["/lr/login_room_rsp","/lr/logout_room_rsp","/sw/push_kickout","/sw/push","/sw/merge_push"],this.unEncryptCmdList=["/lr/login_room","/lr/login_room_rsp"],this.whiteboardPushCmdList=["/edu/push/set_room","/edu/push/set_user","/edu/push/joinlive","/edu/push/set_mod","/edu/push/draw_graphics","/edu/push/clear_graphics","/edu/push/draw_page_graphics","/edu/push/clear_page_graphics","/edu/push/clear_user_graphic_list","/edu/push/qaa","/edu/push/set_user_auth","/edu/push/set_room_auth"],this.state=De.disconnected,this.unStructCmdList=["/lr/push/joinlive_request","/lr/push/joinlive_result","/lr/push/joinlive_invite","/lr/push/joinlive_stop"],this.joinLiveMap={"/lr/push/joinlive_request":11001,"/lr/push/joinlive_result":11002,"/lr/push/joinlive_invite":11003,"/lr/push/joinlive_stop":11004},this.reloginToken="",this.crypto=new Ne,this.liveroomRequest=this.ua.getPCRequest(R.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Me.a.fromInt(0),null!=(e=this.liveroomRequest)&&e.on("connected",(function(e){s.handleConnected(e)})),null!=(t=this.liveroomRequest)&&t.on("broken",(function(){s.handleBroken()})),null!=(r=this.liveroomRequest)&&r.on("disconnected",(function(e,t){s.handleDisconnected(e,t)})),null!=(n=this.liveroomRequest)&&n.on("downLoadMessage",(function(e){s.handlePush(e)})),null!=(o=this.liveroomRequest)&&o.on("pcConnectedEvent",(function(e){var t=g();s.dataReport.newReport(t,te.kZegoSDKProxyConnect.event),s.dataReport.addMsgInfo(t,{recv_time:(new Date).getTime(),proxy_link_sources:e.proxy_link_sources}),s.dataReport.uploadReport(t)}))}var Be=(qe.prototype.listenCallBack=function(){var e=this;this.roomServicer.handlePushCustomMsg=function(t){e.handlePushCustomMsg(t)},this.roomServicer.handlePushTokenExpire=function(t){var r,n=null==(n=null==(n=null==t?void 0:t.body)?void 0:n.stop_stream)?void 0:n.stream_id_list.map(Pe);null!=(r=null==(r=null==t?void 0:t.body)?void 0:r.stop_stream)&&(r.stream_id_list=n),e.stateCenter.actionListener("_tokenExpired",t)},this.roomServicer.handlePushKickout=function(t,r){var n;r?function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}(e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.handlePushKickout(t,!0,!0)})):(n=null==(r=null==t?void 0:t.header)?void 0:r.room_id,r=e.stateCenter.roomModulesList.find((function(e){return e.roomID==n})),e.roomServicer.longToStringNumber(t.body,["session_id"],"toString"),r?r.roomHandler.handlePushKickout(t):e.logger.error(q.LIVEROOMHANDLER_PUSHKICKOUT+" room no found ignore "+JSON.stringify(null==(r=t.header)?void 0:r.room_id)))},this.roomServicer.handlePushStreamMsg=function(t){e.handlePushStreamMsg(t)},this.roomServicer.handlePushSignalMsg=function(t){e.handlePushSignalMsg(t)},this.roomServicer.handlePushMergeMsg=function(t){e.handlePushMergeMsg(t)},this.roomServicer.handlePushRoomMsg=function(t){e.handlePushRoomMsg(t)},this.roomServicer.handlePushTransMsg=function(t){e.handlePushTransMsg(t)},this.roomServicer.onSwitchMessage=function(t,r){e.onSwitchMessage(t,r)},this.roomServicer.handlePushUserStateUpdateMsg=function(t){var r,n=null==(o=null==t?void 0:t.header)?void 0:o.room_id,o=e.stateCenter.roomModulesList.find((function(e){return e.roomID==n}));o?(r={body:{user_actions:t.body.user_list.map((function(e){return{Action:e.action,IdName:e.id_name,NickName:e.nick_name,Role:e.role,LoginTime:e.login_time.toString()}})),user_list_seq:t.body.server_user_seq.toNumber(),room_id:t.body.room_id}},o.userHandler.handlePushUserStateUpdateMsg(r)):e.logger.error(q.LIVEROOMHANDLER_PUSHUSERUPDATE+" room no found ignore "+JSON.stringify(t))}},qe.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},qe.prototype.isUaConnect=function(){var e;return null==(e=this.roomServicer)?void 0:e.isUaConnect()},qe.prototype.sendMessage=function(e,t,r,n,o,s){var i;return null==(i=this.roomServicer)?void 0:i.sendMessage(e,t,r,n,o)},qe.prototype.handlePushTokenExpire=function(e){},qe.prototype.handlePushKickout=function(e,t){},qe.prototype.handlePushStreamMsg=function(e){},qe.prototype.handlePushSignalMsg=function(e){},qe.prototype.handlePushMergeMsg=function(e){},qe.prototype.handlePushCustomMsg=function(e){},qe.prototype.handlePushRoomMsg=function(e){},qe.prototype.handlePushTransMsg=function(e){},qe.prototype.onSwitchMessage=function(e,t){},qe.prototype.handlePushUserStateUpdateMsg=function(e){},qe.prototype.login=function(e,t,r){var n;null!=(n=this.roomServicer)&&n.login(e,t,r)},qe.prototype.logout=function(e,t,r){var n;return null==(n=this.roomServicer)?void 0:n.logout(e,t,r)},qe.prototype.startCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},qe.prototype.stopCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},qe.prototype.getReqHead=function(e){var t;return null==(t=this.roomServicer)?void 0:t.getReqHead(e)},qe.prototype.heartBeat=function(e,t,r){var n;null!=(n=this.roomServicer)&&n.heartBeat(e,t,r)},qe.prototype.fetchUserList=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.fetchUserList(e,t,r,n)},qe.prototype.sendRoomMsg=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendRoomMsg(e,t,r,n)},qe.prototype.sendReliableMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendReliableMessage(e,t,r,n)},qe.prototype.fetchReliableMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.fetchReliableMessage(e,t,r,n)},qe.prototype.sendCustomCommand=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendCustomCommand(e,t,r,n)},qe.prototype.sendBigRoomMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendBigRoomMessage(e,t,r,n)},qe.prototype.sendRelayMessage=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendRelayMessage(e,t,r,n)},qe.prototype.sendSignalCmd=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendSignalCmd(e,t,r,n)},qe.prototype.sendStreamUpdate=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.sendStreamUpdate(e,t,r,n)},qe.prototype.getStreamList=function(e,t,r,n){var o;return null==(o=this.roomServicer)?void 0:o.getStreamList(e,t,r,n)},qe.prototype.renewToken=function(e,t,r,n){var o;null!=(o=this.roomServicer)&&o.renewToken(e,t,r,n)},qe.prototype.reset=function(){var e;null!=(e=this.roomServicer)&&e.reset()},qe.prototype.closeRequest=function(){var e;null!=(e=this.roomServicer)&&e.closeRequest()},qe);function qe(e,t,r,n,o){this.logger=e,this.stateCenter=t,this.ua=r,this.dataReport=n,this.rtm=o,this.roomServicer=new Ue(e,t,r,n,o),this.listenCallBack()}var je=function(e,t,r,n){return new(r=r||Promise)((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))},xe=function(e,t){var r,n,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){var c=[i,a];if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(a){c=[6,a],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},Ge=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n},ze=(Object.defineProperty(Ve.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Ve.prototype.getSettingUnify=function(e){var t=this.stateCenter.settingConfig.getSetting("unify",e=void 0!==e&&e);return this.logger.info(q.RTM_GET_SETTING_UNIFY+" "+e+" "+JSON.stringify(t)),t?(e=t.enable,t=t.sdk_conn_ver,!!(e&&t<=V.connectVer)):this.stateCenter.useNetAgent},Ve.prototype.initCallback=function(){this.proxyRes=H.proxyRes,this.actionSuccessCallback=H.actionSuccessCallback,this.actionErrorCallback=H.actionErrorCallback,this.getServerError=H.getServerError,this.generateRandumNumber=H.generateRandumNumber,this.unregisterCallback=H.unregisterCallback,this.logReportCallback=H.logReportCallback,this.registerCallback=H.registerCallback},Ve.prototype.getStoreAppConfig=function(){this.logger.info(q.RTM_GETSTOREAPPCONFIG+" call");var e=localStorage.getItem(z+"_"+this.getAppID()+"_"+(this.stateCenter.mode||V.modeNo));if(e)try{var t=H.decryptStores(e,G);t?(this.stateCenter.appConfig=JSON.parse(t),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(z+"_"+this.getAppID()+"_"+(this.stateCenter.mode||V.modeNo))}catch(e){this.logger.warn(q.RTM_GETSTOREAPPCONFIG+" "+JSON.stringify(e))}else this.logger.info(q.RTM_GETSTOREAPPCONFIG+" no store config")},Ve.prototype.createNetAgent=function(){var e=this,t=(this.logger.info(q.RTM_CREATENETAGENT+" call"),this.netAgent.on("disconnected",(function(t){e.logger.info(q.RTM_CREATENETAGENT+" netAgent disconnect")})),this.netAgent.on("connected",(function(){e.logger.info(q.RTM_CREATENETAGENT+" netAgent connect"),e.stateCenter.useNetAgent?(e.fetchAppConfig(),e.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&t.roomTryHandler.active(!0)}))):e.logger.info(q.RTM_CREATENETAGENT+" unify false")})),this.netAgent.on("broken",(function(t){e.logger.info(q.RTM_CREATENETAGENT+" netAgent broken"),t===v.CLOSE&&e.stateCenter.roomModulesList.forEach((function(e){e.resetSessionInfo()}))})),this.netAgent.on("dispatchEvent",(function(t,r,n){var o;e.logger.info(q.RTM_CREATENETAGENT+" dispatch"),"start"===r?(o=g(),e.dataReport.newReport(o,te.kZegoConnDispatch.event),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(r="",r=null!=n&&n.reason?n.reason:e.dispatchServers?"UpdateDispatchResult":"NoDispatchResult",e.dataReport.addMsgInfo(o,{domain_list:te.kZegoConnDispatch.domain_list(n.domains),trigger_reason:te.kZegoConnDispatch.trigger_reason(r)}),e.dataReport.uploadReport(o))})),this.netAgent.on("connectedEvent",(function(t,r,n){var o;e.logger.info(q.RTM_CREATENETAGENT+" connect"),"start"===r?(o=g(),e.dataReport.newReport(o,te.kZegoConnConnect.event),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(e.dataReport.addMsgInfo(o,{server_list:te.kZegoConnConnect.server_list(n.servers),request_count:n.count,connect_id:n.connectid}),e.dataReport.uploadReport(o))})),this.netAgent.on("requestEvent",(function(t,r,n){var o;e.logger.info(q.RTM_CREATENETAGENT+" request"),"start"===r?(o=g(),e.dataReport.newReport(o,te.kZegoRequest.event),e.stateCenter.requestList[t]=o):"end"===r&&(o=e.stateCenter.requestList[t])&&(e.dataReport.addMsgInfo(o,{na_req_location:te.kZegoRequest.na_req_location(n.na_req_location),http_code:n.status_code}),e.dataReport.uploadReport(o))})),this.netAgent.on("disConnectedEvent",(function(t){var r=t.duration,n=t.server,o=(t=t.connectid,e.logger.info(q.RTM_CREATENETAGENT+" disconnect"),g());e.dataReport.newReport(o,te.kZegoConnDisConnect.event),e.dataReport.addMsgInfo(o,{server:te.kZegoConnDisConnect.server(n),connect_duration:r,connect_id:t}),e.dataReport.uploadReport(o)})),(null!=(t=this.options)&&t.accessDomains&&0<(null==(t=this.options)?void 0:t.accessDomains.length)?null==(t=this.options)?void 0:t.accessDomains:V.domains).map((function(e){return"wss://"+e+"/accesshub"})));this.netAgent.setNetAgentDefaultServers(t),this.dispatchServers=this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Ve.prototype.getDispatchUrl=function(){var e=localStorage.getItem("z_net_access_servers_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||V.modeNo));if(e&&(e=H.decryptStores(e,G)))try{return JSON.parse(e)}catch(e){return[]}return[]},Ve.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),r=H.getBrowser(),n=t?"pagehide":"Firefox"===r?"beforeunload":"unload";window.addEventListener(n,(function(){e.logger.info(q.RTM_BIND_WINDOW_LISTENER+" "+n),e.logoutRoom()})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Ve.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},Ve.prototype.retryRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&(t.resetSessionInfo(),t.roomTryHandler.active(!0))}))},Ve.prototype.netOnLineHandle=function(){var e=this;this.logger.info(q.RTM_BIND_WINDOW_LISTENER+" network is online"),this.stateCenter.networkState=s.online,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",C.Reconnected,{code:0,msg:""}))}))},Ve.prototype.netOffLineHandle=function(){this.logger.info(q.RTM_BIND_WINDOW_LISTENER+" network is broken"),this.stateCenter.networkState=s.offline,this.stateCenter.useNetAgent||this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.onactive=function(t,r){e.roomHandler.disconnectedHandle(r)},e.roomTryHandler.startMaxTime(),e.roomHandler.roomStateHandle("CONNECTING",C.Reconnecting,P.NETWORK_BROKEN))}))},Ve.prototype.setLogConfig=function(e){this.logger.info(q.RTM_SET_LOG_CONFIG+" call");var t=g();if(this.dataReport.newReport(t),e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),this.dataReport.addMsgInfo(t,{log_level:te.kZegoTaskSetLog.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&this.dataReport.addMsgInfo(t,{remote_log_level:te.kZegoTaskSetLog.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))this.logger.setLogServer(e.logURL),this.dataReport.addMsgInfo(t,{log_url:te.kZegoTaskSetLog.log_url(e.logURL)}),this.dataReport.uploadReport(t,te.kZegoTaskSetLog.event);else if(e.logURL)return this.logger.error(q.RTM_SET_LOG_CONFIG+"log url must be a wss or https url"),this.dataReport.addMsgInfo(t,te.kZegoTaskSetLog.error.kInvalidParamError),this.dataReport.uploadReport(t,te.kZegoTaskSetLog.event),!1;return this.logger.info(q.RTM_SET_LOG_CONFIG+" call success"),!0},Ve.prototype.setDebugVerbose=function(e){var t=g();this.dataReport.newReport(t),"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,this.dataReport.addMsgInfo(t,{debug:te.kZegoTaskSetDebug.debug(e?"true":"false")})),this.dataReport.uploadReport(t,te.kZegoTaskSetDebug.event),this.logger.info(q.RTM_SET_DEBUG_VERBOSE+" call success")},Ve.prototype.setDebug=function(e){"string"==typeof e&&-1<e.indexOf("wss")?this.stateCenter.debug=H.isTestEnv(e):Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("wss")}))?this.stateCenter.debug=H.isTestEnv(e[0]):this.logger.info(q.RTM_CONSTRUCTOR+" server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Ve.prototype.renewToken=function(e,t){var r,n=this,o=g();if(this.dataReport.newReport(o),void 0!==t&&("string"!=typeof t||""==t))return this.logger.error(q.RTM_RENEWTOKEN+" roomID must be string and no empty"),!1;var s,i,a=this.getRoomModules(t)||this.stateCenter.roomModulesList[0];return a?"string"==typeof e&&a.roomTryHandler?(e===a.roomTryHandler.token?this.logger.info(q.RTM_RENEWTOKEN+" token has not changed"):this.stateCenter.configRoomAuth?(s=function(t){var r;null!=(r=a.roomTryHandler)&&r.renewLocalToken(e,null==(r=null==t?void 0:t.body)?void 0:r.token_remain_time),n.cloudSetting.setToken(e),n.stateCenter.configCheckToken=!0,n.logger.info(q.RTM_RENEWTOKEN+" "+JSON.stringify(t))},i=function(t){var r=null==(r=null==t?void 0:t.body)?void 0:r.err_code;!r||1000002014!==r&&2014!==r?n.logger.error(q.RTM_RENEWTOKEN+" "+JSON.stringify(t)):(n.stateCenter.configCheckToken=!1,null!=(r=a.roomTryHandler)&&r.renewLocalToken(e),n.cloudSetting.setToken(e),n.logger.warn(q.RTM_RENEWTOKEN+" "+JSON.stringify(t)))},this.stateCenter.useNetAgent?null!=(r=this.liveRoomHandler)&&r.renewToken({token:e},s,i,a):this.service.sendMessage("renew_token",{token:e},s,i,void 0,{sessionID:a.sessionID,roomID:t,roomSessionID:a.roomSessionID})):(null!=(r=a.roomTryHandler)&&r.renewLocalToken(e),this.cloudSetting.setToken(e)),this.dataReport.uploadReport(o,te.kZegoTaskReNewToken.event),!0):("string"!=typeof e||a.roomTryHandler?(this.logger.error(q.RTM_RENEWTOKEN+" token must be string and not empty"),this.dataReport.addMsgInfo(o,{error:te.kZegoTaskReNewToken.error.INPUT_PARAM.code,message:te.kZegoTaskReNewToken.error.INPUT_PARAM.msg+" param token error"})):(this.logger.error(q.RTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(o,{error:te.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:te.kZegoTaskReNewToken.error.NOT_LOGIN.msg})),this.dataReport.uploadReport(o,te.kZegoTaskReNewToken.event),!1):(this.logger.error(q.RTM_RENEWTOKEN+" calling must after loginRoom"),this.dataReport.addMsgInfo(o,{error:te.kZegoTaskReNewToken.error.NOT_LOGIN.code,message:te.kZegoTaskReNewToken.error.NOT_LOGIN.msg}),this.dataReport.uploadReport(o,te.kZegoTaskReNewToken.event),!1)},Ve.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info(q.RTM_SET_CLOUD_SETTING_URLS+" call "),Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("http")}))&&this.cloudSetting.init({product:j.product,appID:this.stateCenter.appid,urls:e,env:this.stateCenter.ENV,pollingNotify:function(e,r){t.logger.info(q.RTM_SET_CLOUD_SETTING_URLS," setting file changed "+e+" "+JSON.stringify(r)),t.stateCenter.actionListener("_cloudSettingNotify",e,r)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent})},Ve.prototype.loginRoom=function(e,t,r,n){var i=this;return this.logger.info(q.RTM_LOGIN_ROOM+" call by user "+(null==r?void 0:r.userID)+" "+e),new Promise((function(a,c){return je(i,void 0,void 0,(function(){var i,l,u,h,p=this;return xe(this,(function(_){switch(_.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){wx.getNetworkType({success:function(t){p.stateCenter.networkState="none"===t.networkType?s.offline:s.online,e()},fail:function(t){p.logger.error(q.RTM_CONSTRUCTOR+" network "+JSON.stringify(t)),p.stateCenter.networkState=s.online,e()}})}))];case 1:_.sent(),_.label=2;case 2:return i=this.loginReport(a,c,t,n),u=i.interResolve,i=i.interReject,(n=n||{}).maxMemberCount||(n.maxMemberCount=0),this.netAgent&&(this.stateCenter.idName=r.userID,this.netAgent.setUserInfo(r.userID),this.stateCenter.actionListener("_roomLogin",e,t),this.netAgent.isConnect()&&this.fetchAppConfig(t)),this.cloudSetting.setUserID(r.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.onListener("roomLoginResponse",(function(e){p.stateCenter.settingFetched||(p.getCloudSetting(),p.stateCenter.actionListener("_settingCanFetch"),p.stateCenter.settingFetched=!0)})),l=this.getRoomModules(e),h=te.kZegoTaskLoginRoom.error,l?(this.logger.setSessionInfo(this.stateCenter.appid,e,"",r.userID,"",this.stateCenter.sdKVersion),i(h.REPEATEDLY_LOGIN),[2]):((l=new ue(e,this.stateCenter,this.logger,this.dataReport,this.service,this,this.liveRoomHandler)).roomTryHandler||(l.roomTryHandler=new K(this.logger,this.stateCenter,l)),l.roomTryHandler.init(this.stateCenter.roomRetryTime),l.roomTryHandler.initRoom(l.roomHandler,e,t,r,this.stateCenter.server,this.stateCenter.serverBak,n),l.roomTryHandler.setLoginRoomCallback(u,i),l.roomHandler.roomStateHandle("CONNECTING",C.Logining,{code:0,msg:""}),(u=function(e,t){var r,n,o=[],s={};for(r in e)s[e[r].order]=e[r],e[r].key=r;for(n in s)o.push(s[n]);for(var i=0;i<o.length;i++)for(var a=o[i].rules,c=0;c<a.length;c++){var l={key:o[i].key,value:o[i].value,action:t.action,logger:t.logger},u=l.value,h=a[c].name?""+a[c].name:"";if((void 0===u&&h===F.NOT_EMPTY||void 0!==u)&&J[h]&&(h=J[h](l.key,u,l.action,l.logger,a[c]))!=X)return h}return X}({roomID:{order:0,value:e,rules:[{name:F.NOT_EMPTY,error:h.ROOM_ID_NULL},{name:F.TYPE_STRING,error:h.INPUT_PARAM,extMsg:"roomID must be string"},{name:F.MAX_LENGTH_128,error:h.ROOM_ID_TOO_LONG},{name:F.ILLEGAL_CHARACTERS,error:h.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:F.NOT_EMPTY,error:h.INPUT_PARAM},{name:F.TYPE_STRING,error:h.INPUT_PARAM}]},user:{order:2,value:r,rules:[{name:F.NOT_EMPTY,error:h.INPUT_PARAM,extMsg:" param user error."},{name:F.TYPE_OBJECT,error:h.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:r.userID,rules:[{name:F.NOT_EMPTY,error:h.USER_ID_NULL,extMsg:" param user error."},{name:F.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" param userID error."},{name:F.MAX_LENGTH_64,error:h.USER_ID_TOO_LONG},{name:F.ILLEGAL_CHARACTERS,error:h.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:r.userName,rules:[{name:F.TYPE_STRING,error:h.INPUT_PARAM,extMsg:" userName must be string."},{name:F.MAX_LENGTH_256,error:h.USER_NAME_TOO_LONG}]},config:{order:5,value:n,rules:[]},"config.maxMemberCount":{order:6,value:n.maxMemberCount,rules:[{name:F.TYPE_INTEGER,error:h.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:q.RTM_LOGIN_ROOM,logger:this.logger}))!==X?(l.roomHandler.roomStateHandle("DISCONNECTED",C.LoginFailed,u.error,u.extMsg),i(u.error,u.extMsg),[2]):(0<this.stateCenter.roomModulesList.length&&1==this.stateCenter.isMultiRoom?l.isMulti=!0:Ge(this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout()})),n&&(l.config=n),this.stateCenter.roomModulesList.push(l),h=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(h)&&0<h.length&&(this.logger.info(q.RTM_LOGIN_ROOM," setting room_server "+h),this.stateCenter.server=h[0],this.stateCenter.serverBak=h[1]||h[0]),this.stateCenter.setMultiRoom=!0,l.roomTryHandler.startMaxTime(),this.stateCenter.useNetAgent&&!this.netAgent.isConnect()?(this.logger.info(q.RTM_LOGIN_ROOM," us is not connected"),l.roomHandler.setRunState(o.trylogin),this.netAgent.connectUa()):l.roomTryHandler.active(!0),[2]))}}))}))}))},Ve.prototype.handleLogUpload=function(){var e=this.stateCenter.appConfig.app_config.domain;e&&(this.stateCenter.logDomain="weblogger"+this.stateCenter.appid+"-api."+e,e="",this.logger.setLogServer(e=0===this.stateCenter.ENV?"wss://"+this.stateCenter.logDomain+"/log":"https://"+this.stateCenter.logDomain+"/httplog"))},Ve.prototype.fetchAppConfig=function(e){return je(this,void 0,void 0,(function(){var t,r,n,o,s;return xe(this,(function(i){switch(i.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(q.RTM_FETCH_APP_CONFIG+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(q.RTM_FETCH_APP_CONFIG+" user not exist"),[2];if(t="",e)t=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(q.RTM_FETCH_APP_CONFIG+" token not exist"),[2];t=this.getToken()}r=g(),this.dataReport.newReport(r,te.kZegoSDKConfigInit.event),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3)];case 2:return s=i.sent(),n=s.code,s=s.data,this.dataReport.addMsgInfo(r,{trigger_reason:"refresh"}),this.dataReport.uploadReport(r),this.stateCenter.appConfigFetched=!0,this.logger.info(q.RTM_LOGIN_ROOM+" initConfig code:"+n+" data: "+JSON.stringify(s)),this.stateCenter.appConfig={app_config:n=s.app_config,media_config:{publish_config:o=(s=s.media_config).publish_config,play_config:s=s.play_config}},n=JSON.stringify(this.stateCenter.appConfig),o=H.encryptStores(n,G),localStorage.setItem(z+"_"+this.getAppID()+"_"+(this.stateCenter.mode||V.modeNo),o),this.handleLogUpload(),this.stateCenter.appConfig||this.stateCenter.actionListener("_appConfigRsp"),[3,4];case 3:return s=i.sent(),this.logger.error(q.RTM_LOGIN_ROOM+" fail "+JSON.stringify(s)),this.dataReport.addMsgInfo(r,{trigger_reason:"refresh"}),this.dataReport.uploadReport(r),[20012,20008].includes(null==s?void 0:s.code)&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&e.roomTryHandler.loginFail(P.APPID_INVALID)})),[3,4];case 4:return[2]}}))}))},Ve.prototype.getCloudSetting=function(){var e=this;this.cloudSetting.fetchMultiSetting([x,"room"]).then((function(t){var r,n;e.logger.info(q.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t)),t&&(e.stateCenter.settingConfig.setSetting(null==(t=null==t?void 0:t.init)?void 0:t.setting,["remote_log_level"]),(t=e.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(e.logger.info(q.RTM_LOGIN_ROOM+"  setting remote_log_level "+t),e.logger.setRemoteLogLevel(t)),(t=e.stateCenter.settingConfig.getSetting("unify",e.stateCenter.netHasSet))&&(e.logger.info(q.RTM_LOGIN_ROOM+" unify "+JSON.stringify(t)),r=t.enable,t=t.sdk_conn_ver,n=!!(r&&t<=V.connectVer),!0===e.stateCenter.useNetAgent&&!1===n&&(e.cloudSetting.setOptions({unify:!1}),"connecting"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connecting",e.stateCenter.actionListener("_connectChanged","connecting")),r=Ge(e.stateCenter.roomModulesList),Ge(e.stateCenter.roomModulesList).forEach((function(e){e.roomHandler.logout(!0,!0)})),e.stateCenter.useNetAgent=n,r.forEach((function(t){var r;e.stateCenter.roomModulesList.push(t),t.roomTryHandler||(t.roomTryHandler=new K(e.logger,e.stateCenter,t)),t.roomTryHandler.init(e.stateCenter.roomRetryTime),t.roomTryHandler.initRoom(t.roomHandler,t.roomID,t.token,{userID:e.stateCenter.idName,userName:e.stateCenter.nickName},e.stateCenter.server,e.stateCenter.serverBak,t.config),null!=(r=t.roomTryHandler)&&r.startMaxTime(),t.roomTryHandler.onactive=function(r,n){r?"connected"!==e.stateCenter.connectState&&(e.stateCenter.connectState="connected",e.stateCenter.actionListener("_connectChanged","connected",{roomID:t.roomID})):t.roomHandler.disconnectedHandle(n)},null!=(r=t.roomTryHandler)&&r.active()})))))})).catch((function(t){e.logger.warn(q.RTM_LOGIN_ROOM," settingConfig "+JSON.stringify(t))})),this.stateCenter.onListener("_cloudSettingNotify",(function(t,r){var n=g(),o=(e.dataReport.newReport(n,te.kZegoTaskCloudSettingRefresh.event),e.cloudSetting.getEnvVariables());e.dataReport.addMsgInfo(n,{params:o,files:[{name:t,content:r.setting,versions:r.versions}]}),e.dataReport.uploadReport(n),t===x&&(e.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting,["remote_log_level"]),(o=e.stateCenter.settingConfig.getSetting("remote_log_level"))&&(e.logger.info(q.RTM_LOGIN_ROOM," setting remote_log_level "+o),e.logger.setRemoteLogLevel(o)))}))},Ve.prototype.cloudReportNotify=function(e,t,r){var n;"request_start"===t?(n=g(),this.dataReport.newReport(n,te.kZegoTaskCloudSettingRequest.event),this.stateCenter.settingConfig.requestList[e]=n):"request_end"===t&&(n=this.stateCenter.settingConfig.requestList[e])&&(this.dataReport.addMsgInfo(n,{request_detail:null==r?void 0:r.reportData,files:null==r?void 0:r.files,error:null==r?void 0:r.code,request_params:null==r?void 0:r.params}),this.dataReport.uploadReport(n))},Ve.prototype.loginReport=function(e,t,r,n){var o=this,s=g(),i=(this.stateCenter.reportSeqList.login=s,te.kZegoTaskLoginRoom),a=(this.dataReport.newReport(s,i.event),this.cloudSetting.getEnvVariable("deviceid"));return this.dataReport.addMsgInfo(s,{deviceid:a,use_na:this.stateCenter.useNetAgent?1:0}),"string"==typeof r&&this.dataReport.addMsgInfo(s,{token:i.token(r),isMulti:this.stateCenter.isMultiRoom}),n&&(n.userUpdate&&"boolean"==typeof n.userUpdate&&this.dataReport.addMsgInfo(s,{user_update:i.user_update(n.userUpdate+"")}),n.maxMemberCount&&"number"==typeof n.maxMemberCount&&this.dataReport.addMsgInfo(s,{max_member_count:i.max_member_count(n.maxMemberCount+"")})),H.logReportCallback(i.event,this.dataReport,s,this.stateCenter.reportList),{interResolve:function(t){o.dataReport.uploadReport(s),o.stateCenter.reportSeqList.login=0,H.unregisterCallback(i.event,o.stateCenter.reportList),e(t)},interReject:function(e,r){var n,a;void 0===r&&(r=""),e.code<2e9&&1e9<e.code||e.code<1e6?(n=H.decodeServerError(e.code,e.msg),a=H.getLiveRoomError(e.code,o.stateCenter.useNetAgent)):n={code:e.code,message:e.msg},n&&o.dataReport.addMsgInfo(s,{error:n.code,message:n.message+r}),o.dataReport.uploadReport(s),o.stateCenter.reportSeqList.login=0,H.unregisterCallback(i.event,o.stateCenter.reportList),a&&P[a]&&(e.code=P[a].code),t(e.code&&e.msg&&""!==r?{code:e.code,msg:e.msg+r}:e)}}},Ve.prototype.logoutRoom=function(e){this.logger.info(q.RTM_LOGOUT_ROOM+" call by user "+e);var t=g();if(this.dataReport.newReport(t),this.dataReport.addMsgInfo(t,{roomid:e,isMulti:this.stateCenter.isMultiRoom}),void 0===e)Ge(this.stateCenter.roomModulesList).forEach((function(e){return e.roomHandler.logout(!0)})),this.cloudSetting.uninit();else{if("string"!=typeof e||""==e)return this.logger.error(q.RTM_LOGOUT_ROOM+" roomID must be string and not empty"),this.dataReport.addMsgInfo(t,{error:te.kZegoTaskLogoutRoom.error.INPUT_PARAM.code,message:te.kZegoTaskLogoutRoom.error.INPUT_PARAM.msg+" param roomID error"}),void this.dataReport.uploadReport(t,te.kZegoTaskLogoutRoom.event);(e=this.getRoomModules(e))?(e.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit()):(this.logger.error(q.RTM_LOGOUT_ROOM+" room not exist"),this.dataReport.addMsgInfo(t,{error:te.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.code,message:te.kZegoTaskLogoutRoom.error.ROOM_NOT_EXIST.msg})),this.dataReport.uploadReport(t,te.kZegoTaskLogoutRoom.event)}},Ve.prototype.loginHall=function(e,t,r){var n=this;return new Promise((function(e,t){return je(n,void 0,void 0,(function(){return xe(this,(function(e){return[2]}))}))}))},Ve.prototype.loginHallReport=function(e,t,r,n){},Ve.prototype.logoutHall=function(){},Ve.prototype.enterRoom=function(e,t){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.leaveRoom=function(){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype._sendCustomCommand=function(e,t,r){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype._sendBroadcastMessage=function(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype._setRoomExtraInfo=function(e,t,r){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(I),t()}))},Ve.prototype._sendBarrageMessage=function(e,t,r,n){return void 0===r&&(r=1),void 0===n&&(n=1),new Promise((function(e,t){console.error(I),t()}))},Ve.prototype.sendRelayMessage=function(e,t,r,n,o){console.error(I)},Ve.prototype.requestJoinLive=function(e,t,r,n,o){return console.error(I),!1},Ve.prototype.inviteJoinLive=function(e,t,r,n,o){return console.error(I),!1},Ve.prototype.endJoinLive=function(e,t,r,n){return console.error(I),!1},Ve.prototype.respondJoinLive=function(e,t,r,n,o){return console.error(I),!1},Ve.prototype.getVersion=function(){return this.version},Ve.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},Ve.prototype.on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(q.RTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(q.RTM_ON+" event "+e+" no found"),!1)},Ve.prototype.off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(q.RTM_OFF+" listener no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},Ve.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(q.RTM_ON+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(q.RTM_ON+" event "+e+" no found"),!1)},Ve.prototype._off=function(e,t){if(!this.stateCenter.listenerList[e])return this.logger.error(q.RTM_OFF+" listener no found"),!1;var r=this.stateCenter.listenerList[e];return t?r.splice(r.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0},Ve.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Ve.prototype.isLogin=function(e){return!!(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&e.isLogin()},Ve.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Ve.prototype.getAppID=function(){return this.stateCenter.appid},Ve.prototype.getUserID=function(){return this.stateCenter.idName},Ve.prototype.getUseNetAgent=function(){return this.stateCenter.useNetAgent},Ve.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},Ve.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},Ve.prototype.setRole=function(e){this.stateCenter.role=e},Ve.prototype.getSessionId=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.sessionID:"0"},Ve.prototype.getRoomSessionID=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.roomSessionID:"0"},Ve.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Ve.prototype.setAccess=function(e){this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=e,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.stateCenter.useNetAgent),this.cloudSetting.setOptions({unify:this.stateCenter.useNetAgent})},Ve.prototype.enableMultiRoom=function(e){var t=g();return this.dataReport.newReport(t,te.kZegoEnableMultiRoom.event),this.dataReport.addMsgInfo(t,{isMulti:e}),"boolean"!=typeof e?(this.logger.error(q.RTM_ENABLE_MULTI_ROOM+" param must be boolean"),this.dataReport.uploadReport(t,void 0,te.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error(q.RTM_ENABLE_MULTI_ROOM+" multi room can only be set once before first login"),this.dataReport.uploadReport(t,void 0,te.kZegoEnableMultiRoom.error.kAlreadyLoginError),!1):(this.dataReport.uploadReport(t),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0)},Ve.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},Ve.use=function(e){switch(e.type){case"message":case"live":e.install(Ve,ue,fe,Be)}},Ve.prototype.resetRoomTokenTimer=function(e,t){(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&t&&0<t&&e.roomHandler.resetTokenTimer(1e3*t-this.stateCenter.local_time_deviation)},Ve.prototype.isDisConnect=function(){return(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Ve.prototype.sendMessage=function(e,t,r,n){(this.stateCenter.useNetAgent?this.liveRoomHandler:this.service).sendMessage(e,t,r,n)},Ve.prototype.setProtoFormat=function(e){if(!["json","pb"].includes(e=void 0===e?"json":e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},Ve.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},Ve.prototype.sendMessageByService=function(e,t,r,n,o,s){return this.service.sendMessage(e,t,r,n,o,s)},Ve.prototype.getHeader=function(e){var t=this.stateCenter.roomModulesList[0];if(t&&t.isLogin())return this.service.getHeader(e,t.sessionID,t.roomID,t=t.roomSessionID);this.logger.error(q.RTM_GET_HEADER+" room no found or no login")},Ve.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error(q.RTM_SEND_PB+" type error"),!1)},Ve.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},Ve.prototype.getRoomID=function(){return this.stateCenter.roomid},Ve.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Ve.prototype.isUseNetAgent=function(){return this.stateCenter.useNetAgent},Ve.prototype.getReqHead=function(e){return e="string"==typeof e&&""!==e&&this.getRoomModules(e)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(e)},Ve.prototype.sendSwitchMessage=function(e,t){return"string"==typeof e&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,void 0,!1):-1},Ve.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},Ve);function Ve(e,t,r,n,o,i,a,c){var l=this;if(this.logger=r,this.dataReport=n,this.cloudSetting=o,this.version=i,this.options=c,this.stateCenter=new re(this.logger,this.dataReport),this.stateCenter.ENV=a,this.getReportSeq=g,this.getSeq=f,this.initCallback(),r=g(),this.dataReport.newReport(r),0!=a&&1!=a||this.setDebug(t),H.checkConfigParam(e,t,this.logger)){if(this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=b.MODE_TEST),this.netAgent=new k,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),this.netAgent.setAppInfo({appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode}),this.liveRoomHandler=new Be(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new fe(this.stateCenter,this.logger,this),this.stateCenter.deviceID=H.generateUUID(a),this.stateCenter.settingConfig=new me,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({product:j.product,appID:e,urls:j.URL,env:a,pollingNotify:function(e,t){l.logger.info(q.RTM_CONSTRUCTOR," setting file changed "+e+" "+JSON.stringify(t)),l.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.stateCenter.useNetAgent,connection:this.netAgent}),(n=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info(q.RTM_CONSTRUCTOR+" setting remote_log_level default "+n),this.logger.setRemoteLogLevel(n)),o="",0===a?o="rtc":1===a&&(o="xcx"),this.cloudSetting.setEnvVariable("environment",o),i=this.cloudSetting.getSettingCache(x),c=this.cloudSetting.getSettingCache("room"),Promise.all([i,c]).then((function(e){var t=null==e?void 0:e[0],r=(l.stateCenter.settingConfig.setSetting(null==t?void 0:t.setting),l.stateCenter.useNetAgent=l.getSettingUnify(l.stateCenter.netHasSet),l.cloudSetting.setOptions({unify:l.stateCenter.useNetAgent}),l.stateCenter.useNetAgent&&(l.createNetAgent(),l.getStoreAppConfig()),(r=l.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(l.logger.info(q.RTM_CONSTRUCTOR+"  setting remote_log_level "+r),l.logger.setRemoteLogLevel(r)),null==e?void 0:e[1]);l.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting),e=g(),l.dataReport.newReport(e,te.kZegoTaskCloudSettingCache.event),l.dataReport.addMsgInfo(e,{files:[{name:x,content:null==t?void 0:t.setting,versions:null==t?void 0:t.versions},{name:"room",content:null==r?void 0:r.setting,versions:null==r?void 0:r.versions}]}),l.dataReport.uploadReport(e)})).catch((function(e){l.logger.warn(q.RTM_CONSTRUCTOR+"  initConfig "+JSON.stringify(e))})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&0<t.length&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),0==a||2==a)this.bindWindowListener(),this.logger.info(q.RTM_CONSTRUCTOR+"  "+navigator.appVersion),this.stateCenter.networkState=!navigator||navigator.onLine?s.online:s.offline,this.dataReport.addMsgInfo(r,{system_info:te.kZegoTaskInitSetting.system_info});else if(1==a||3==a){this.bindWxListener();try{var u=wx.getSystemInfoSync(),h={brand:u.brand,model:u.model,system:u.system,platform:u.platform,version:u.version,SDKVersion:u.SDKVersion};this.dataReport.addMsgInfo(r,{system_info:h}),this.logger.warn(q.RTM_CONSTRUCTOR+" "+JSON.stringify(h))}catch(e){this.logger.warn(q.RTM_CONSTRUCTOR+" get system info error")}}}else this.logger.error(q.RTM_CONSTRUCTOR+" init sdk error"),this.dataReport.addMsgInfo(r,te.kZegoTaskInitSetting.error.kInvalidParamError);this.dataReport.uploadReport(r,te.kZegoTaskInitSetting.event)}var We=r(12),Ze=(Ye.prototype.setLog=function(e){this.zegoSetting.setLog(e)},Ye.prototype.init=function(e){this.zegoSetting.init(e)},Ye.prototype.setEnvVariable=function(e,t){this.zegoSetting.setEnvVariable(e,t)},Ye.prototype.fetchSetting=function(e,t,r){return this.zegoSetting.fetchSetting(e,t,r)},Ye.prototype.fetchMultiSetting=function(e,t,r){return this.zegoSetting.fetchMultiSetting(e,t,r)},Ye.prototype.setOptions=function(e){return this.zegoSetting.setOptions(e)},Ye.prototype.getSettingCache=function(e){return this.zegoSetting.getSettingCache(e)},Ye.prototype.setToken=function(e){this.zegoSetting.setToken(e)},Ye.prototype.setUserID=function(e){this.zegoSetting.setUserID(e)},Ye.prototype.activePolling=function(){this.zegoSetting.activePolling()},Ye.prototype.uninit=function(){var e;null!=(e=this.zegoSetting)&&e.uninit()},Ye.prototype.getEnvVariable=function(e){this.zegoSetting.getEnvVariable(e)},Ye);function Ye(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new We.ZegoSetting}Ke.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},Ke.prototype.loginRoom=function(e,t,r,n){return this.zegoWebRTM.loginRoom(e,t,r,n)},Ke.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},Ke.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},Ke.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},Ke.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},Ke.prototype.sendCustomCommand=function(e,t,r){return this.zegoWebRTM.sendCustomCommand(e,t,r)},Ke.prototype.setRoomExtraInfo=function(e,t,r){return this.zegoWebRTM.setRoomExtraInfo(e,t,r)},Ke.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},Ke.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},Ke.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},Ke.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},Ke.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},Ke.prototype.loginHall=function(e,t,r){return this.zegoWebRTM.loginHall(e,t,r)},Ke.prototype.logoutHall=function(){return this.zegoWebRTM.logoutHall()},Ke.prototype.enterRoom=function(e,t){return this.zegoWebRTM.enterRoom(e,t)},Ke.prototype.leaveRoom=function(){return this.zegoWebRTM.leaveRoom()},Ke.use=function(e){ze.use(e)},Ke.version="1.16.1";var Fe=Ke;function Ke(e,t,r,n){this.logger=new c.ZegoLogger(r=void 0===r?0:r),this.dataReport=new c.ZegoDataReport(this.logger),this.cloudSetting=new Ze,this.zegoWebRTM=new ze(e,t,this.logger,this.dataReport,this.cloudSetting,Ke.version,r,n)}}],n={},t.m=r,t.c=n,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=21);function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r,n}(r(782))},679:e=>{"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,s=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,i){r[n]=function(e){if(s)if(s=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,i(e))}}))}},420:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),o=new Array(123),s=0;s<64;)o[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var o,s=null,i=[],a=0,c=0;t<r;){var l=e[t++];switch(c){case 0:i[a++]=n[l>>2],o=(3&l)<<4,c=1;break;case 1:i[a++]=n[o|l>>4],o=(15&l)<<2,c=2;break;case 2:i[a++]=n[o|l>>6],i[a++]=n[63&l],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0)}return c&&(i[a++]=n[o],i[a++]=61,1===c&&(i[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};var i="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=o[l]))throw Error(i);switch(a){case 0:n=l,a=1;break;case 1:t[r++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:t[r++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:t[r++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(i);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},138:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},209:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function s(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:s,e.writeFloatBE=n?s:o,e.readFloatLE=n?i:a,e.readFloatBE=n?a:i}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2);e((o<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,n)}}function i(e,t,r){var n=e(t,r),o=2*(n>>31)+1,s=n>>>23&255,i=8388607&n;return 255===s?i?NaN:o*(1/0):0===s?1401298464324817e-60*o*i:o*Math.pow(2,s-150)*(i+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=i.bind(null,o),e.readFloatBE=i.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function s(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function i(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:s,e.writeDoubleBE=n?s:o,e.readDoubleLE=n?i:a,e.readDoubleBE=n?a:i}():function(){function t(e,t,r,n,o,s){var i=n<0?1:0;if(i&&(n=-n),0===n)e(0,o,s+t),e(1/n>0?0:2147483648,o,s+r);else if(isNaN(n))e(0,o,s+t),e(2146959360,o,s+r);else if(n>17976931348623157e292)e(0,o,s+t),e((i<<31|2146435072)>>>0,o,s+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,s+t),e((i<<31|a/4294967296)>>>0,o,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,s+t),e((i<<31|c+1023<<20|1048576*a&1048575)>>>0,o,s+r)}}}function i(e,t,r,n,o){var s=e(n,o+t),i=e(n,o+r),a=2*(i>>31)+1,c=i>>>20&2047,l=4294967296*(1048575&i)+s;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=i.bind(null,o,0,4),e.readDoubleBE=i.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},556:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},794:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(r){if(r<1||r>o)return e(r);i+r>n&&(s=e(n),i=0);var a=t.call(s,i,i+=r);return 7&i&&(i=1+(7|i)),a}}},482:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,s=[],i=0;t<r;)(n=e[t++])<128?s[i++]=n:n>191&&n<224?s[i++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[i++]=55296+(n>>10),s[i++]=56320+(1023&n)):s[i++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))},r.write=function(e,t,r){for(var n,o,s=r,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(i+1)))?(++i,t[r++]=(n=65536+((1023&n)<<10)+(1023&o))>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}},782:(e,t,r)=>{"use strict";e.exports=r(656)},656:(e,t,r)=>{"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(401),n.BufferWriter=r(927),n.Reader=r(961),n.BufferReader=r(154),n.util=r(775),n.rpc=r(786),n.roots=r(885),n.configure=o,o()},961:(e,t,r)=>{"use strict";e.exports=c;var n,o=r(775),s=o.LongBits,i=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},h=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function p(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function _(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw a(this,8);return new s(_(this.buf,this.pos+=4),_(this.buf,this.pos+=4))}c.create=h(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return _(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|_(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=h(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return d.call(this)[t](!0)},sfixed64:function(){return d.call(this)[t](!1)}})}},154:(e,t,r)=>{"use strict";e.exports=s;var n=r(961);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(775);function s(e){n.call(this,e)}s._configure=function(){o.Buffer&&(s.prototype._slice=o.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},885:e=>{"use strict";e.exports={}},786:(e,t,r)=>{"use strict";t.Service=r(266)},266:(e,t,r)=>{"use strict";e.exports=o;var n=r(775);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,s,i){if(!s)throw TypeError("request must be specified");var a=this;if(!i)return n.asPromise(e,a,t,r,o,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),i(e)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){i(e)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},686:(e,t,r)=>{"use strict";e.exports=o;var n=r(775);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=o.zero=new o(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):s},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===i?s:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},775:function(e,t,r){"use strict";var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(679),n.base64=r(420),n.EventEmitter=r(138),n.float=r(209),n.inquire=r(556),n.utf8=r(482),n.pool=r(794),n.LongBits=r(686),n.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&null!=this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},401:(e,t,r)=>{"use strict";e.exports=h;var n,o=r(775),s=o.LongBits,i=o.base64,a=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function _(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=p(),h.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(h.alloc=o.pool(h.alloc,o.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},(d.prototype=Object.create(c.prototype)).fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(f,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){var t=s.from(e);return this._push(f,t.length(),t)},h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(f,t.length(),t)},h.prototype.bool=function(e){return this._push(_,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){var t=s.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},h.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(_,1,0);if(o.isString(e)){var r=h.alloc(t=i.length(e));i.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(_,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=p(),n._configure()}},927:(e,t,r)=>{"use strict";e.exports=s;var n=r(401);(s.prototype=Object.create(n.prototype)).constructor=s;var o=r(775);function s(){n.call(this)}function i(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=o._Buffer_allocUnsafe,s.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},s._configure()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__(608);return __webpack_exports__})()));